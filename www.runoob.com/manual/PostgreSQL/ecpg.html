<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<HTML><HEAD><TITLE>ECPG - 在C中嵌入SQL</TITLE><META NAME="GENERATOR" CONTENT="Modular DocBook HTML Stylesheet Version 1.79"><LINK REV="MADE" HREF="mailto:pgsql-docs@postgresql.org"><LINK REL="HOME" TITLE="PostgreSQL 9.3.1 中文手册" HREF="https://school.yunwei.edu/manual/PostgreSQL/index.html"><LINK REL="UP" TITLE="客户端接口" HREF="client-interfaces.html"><LINK REL="PREVIOUS" TITLE="例子程序" HREF="https://school.yunwei.edu/manual/PostgreSQL/lo-examplesect.html"><LINK REL="NEXT" TITLE="概念" HREF="https://school.yunwei.edu/manual/PostgreSQL/ecpg-concept.html"><LINK REL="STYLESHEET" TYPE="text/css" HREF="stylesheet.css"><META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=utf-8"><META NAME="creation" CONTENT="2015-07-11T14:00:17"></HEAD><BODY CLASS="CHAPTER">
<div style="text-align:right">
<a style="margin : 0px 0px 0px 10px;" href="https://github.com/postgres-cn/pgdoc-cn/issues/new" target="_blank" title="在Github上报告问题（请注明问题内容及所在章节）">问题报告</a>
<a style="margin : 0px 0px 0px 10px;" href="https://github.com/postgres-cn/pgdoc-cn/edit/master/postgresql/doc/src/sgml/ecpg.sgml" target="_blank" title="直接在Github上纠错本页面">纠错本页面</a>
</div>
<DIV CLASS="NAVHEADER"><TABLE SUMMARY="Header navigation table" WIDTH="100%" BORDER="0" CELLPADDING="0" CELLSPACING="0"><TR><TH COLSPAN="5" ALIGN="center" VALIGN="bottom"><A HREF="https://school.yunwei.edu/manual/PostgreSQL/index.html">PostgreSQL 9.3.1 中文手册</A></TH></TR><TR><TD WIDTH="10%" ALIGN="left" VALIGN="top"><A TITLE="例子程序" HREF="https://school.yunwei.edu/manual/PostgreSQL/lo-examplesect.html" ACCESSKEY="P">&#19978;&#19968;&#39029;</A></TD><TD WIDTH="10%" ALIGN="left" VALIGN="top"><A HREF="client-interfaces.html" ACCESSKEY="U">&#19978;&#19968;&#32423;</A></TD><TD WIDTH="60%" ALIGN="center" VALIGN="bottom"></TD><TD WIDTH="20%" ALIGN="right" VALIGN="top"><A TITLE="概念" HREF="https://school.yunwei.edu/manual/PostgreSQL/ecpg-concept.html" ACCESSKEY="N">&#19979;&#19968;&#39029;</A></TD></TR></TABLE><HR ALIGN="LEFT" WIDTH="100%"></DIV><DIV CLASS="CHAPTER"><H1><A NAME="ECPG"></A>&#31456; 33. <SPAN CLASS="APPLICATION">ECPG</SPAN> - 在C中嵌入<ACRONYM CLASS="ACRONYM">SQL</ACRONYM></H1><DIV CLASS="TOC"><DL><DT><B>&#30446;&#24405;</B></DT><DT>33.1. <A HREF="https://school.yunwei.edu/manual/PostgreSQL/ecpg-concept.html">概念</A></DT><DT>33.2. <A HREF="https://school.yunwei.edu/manual/PostgreSQL/ecpg-connect.html">管理数据库连接</A></DT><DD><DL><DT>33.2.1. <A HREF="https://school.yunwei.edu/manual/PostgreSQL/ecpg-connect.html#ECPG-CONNECTING">与数据库服务器连接</A></DT><DT>33.2.2. <A HREF="https://school.yunwei.edu/manual/PostgreSQL/ecpg-connect.html#ECPG-SET-CONNECTION">选择一个连接</A></DT><DT>33.2.3. <A HREF="https://school.yunwei.edu/manual/PostgreSQL/ecpg-connect.html#ECPG-DISCONNECT">关闭一个连接</A></DT></DL></DD><DT>33.3. <A HREF="https://school.yunwei.edu/manual/PostgreSQL/ecpg-commands.html">运行SQL命令</A></DT><DD><DL><DT>33.3.1. <A HREF="https://school.yunwei.edu/manual/PostgreSQL/ecpg-commands.html#ECPG-EXECUTING">执行SQL语句</A></DT><DT>33.3.2. <A HREF="https://school.yunwei.edu/manual/PostgreSQL/ecpg-commands.html#ECPG-CURSORS">使用游标</A></DT><DT>33.3.3. <A HREF="https://school.yunwei.edu/manual/PostgreSQL/ecpg-commands.html#ECPG-TRANSACTIONS">管理事务</A></DT><DT>33.3.4. <A HREF="https://school.yunwei.edu/manual/PostgreSQL/ecpg-commands.html#ECPG-PREPARED">预备语句</A></DT></DL></DD><DT>33.4. <A HREF="https://school.yunwei.edu/manual/PostgreSQL/ecpg-variables.html">使用宿主变量</A></DT><DD><DL><DT>33.4.1. <A HREF="https://school.yunwei.edu/manual/PostgreSQL/ecpg-variables.html#ECPG-VARIABLES-OVERVIEW">概述</A></DT><DT>33.4.2. <A HREF="https://school.yunwei.edu/manual/PostgreSQL/ecpg-variables.html#ECPG-DECLARE-SECTIONS">声明段</A></DT><DT>33.4.3. <A HREF="https://school.yunwei.edu/manual/PostgreSQL/ecpg-variables.html#ECPG-RETRIEVING">检索查询结果</A></DT><DT>33.4.4. <A HREF="https://school.yunwei.edu/manual/PostgreSQL/ecpg-variables.html#ECPG-VARIABLES-TYPE-MAPPING">类型映射</A></DT><DT>33.4.5. <A HREF="https://school.yunwei.edu/manual/PostgreSQL/ecpg-variables.html#ECPG-VARIABLES-NONPRIMITIVE-SQL">处理非初级的SQL数据类型</A></DT><DT>33.4.6. <A HREF="https://school.yunwei.edu/manual/PostgreSQL/ecpg-variables.html#ECPG-INDICATORS">指示器</A></DT></DL></DD><DT>33.5. <A HREF="https://school.yunwei.edu/manual/PostgreSQL/ecpg-dynamic.html">动态SQL</A></DT><DD><DL><DT>33.5.1. <A HREF="https://school.yunwei.edu/manual/PostgreSQL/ecpg-dynamic.html#ECPG-DYNAMIC-WITHOUT-RESULT">执行没有结果集的语句</A></DT><DT>33.5.2. <A HREF="https://school.yunwei.edu/manual/PostgreSQL/ecpg-dynamic.html#ECPG-DYNAMIC-INPUT">执行具有输入参数的语句</A></DT><DT>33.5.3. <A HREF="https://school.yunwei.edu/manual/PostgreSQL/ecpg-dynamic.html#ECPG-DYNAMIC-WITH-RESULT">执行带有结果集的语句</A></DT></DL></DD><DT>33.6. <A HREF="https://school.yunwei.edu/manual/PostgreSQL/ecpg-pgtypes.html">pgtypes 库</A></DT><DD><DL><DT>33.6.1. <A HREF="https://school.yunwei.edu/manual/PostgreSQL/ecpg-pgtypes.html#ECPG-PGTYPES-NUMERIC">数值类型</A></DT><DT>33.6.2. <A HREF="https://school.yunwei.edu/manual/PostgreSQL/ecpg-pgtypes.html#ECPG-PGTYPES-DATE">日期类型</A></DT><DT>33.6.3. <A HREF="https://school.yunwei.edu/manual/PostgreSQL/ecpg-pgtypes.html#ECPG-PGTYPES-TIMESTAMP">时间戳类型</A></DT><DT>33.6.4. <A HREF="https://school.yunwei.edu/manual/PostgreSQL/ecpg-pgtypes.html#ECPG-PGTYPES-INTERVAL">区间类型</A></DT><DT>33.6.5. <A HREF="https://school.yunwei.edu/manual/PostgreSQL/ecpg-pgtypes.html#ECPG-PGTYPES-DECIMAL">十进制类型</A></DT><DT>33.6.6. <A HREF="https://school.yunwei.edu/manual/PostgreSQL/ecpg-pgtypes.html#ECPG-PGTYPES-ERRNO">pgtypeslib的errno值</A></DT><DT>33.6.7. <A HREF="https://school.yunwei.edu/manual/PostgreSQL/ecpg-pgtypes.html#ECPG-PGTYPES-CONSTANTS">pgtypeslib的特殊常量</A></DT></DL></DD><DT>33.7. <A HREF="https://school.yunwei.edu/manual/PostgreSQL/ecpg-descriptors.html">使用描述符范围</A></DT><DD><DL><DT>33.7.1. <A HREF="https://school.yunwei.edu/manual/PostgreSQL/ecpg-descriptors.html#ECPG-NAMED-DESCRIPTORS">命名SQL描述符范围</A></DT><DT>33.7.2. <A HREF="https://school.yunwei.edu/manual/PostgreSQL/ecpg-descriptors.html#ECPG-SQLDA-DESCRIPTORS">SQLDA描述符范围</A></DT></DL></DD><DT>33.8. <A HREF="https://school.yunwei.edu/manual/PostgreSQL/ecpg-errors.html">错误处理</A></DT><DD><DL><DT>33.8.1. <A HREF="https://school.yunwei.edu/manual/PostgreSQL/ecpg-errors.html#ECPG-WHENEVER">设置回调</A></DT><DT>33.8.2. <A HREF="https://school.yunwei.edu/manual/PostgreSQL/ecpg-errors.html#ECPG-SQLCA">sqlca</A></DT><DT>33.8.3. <A HREF="https://school.yunwei.edu/manual/PostgreSQL/ecpg-errors.html#ECPG-SQLSTATE-SQLCODE"><TT CLASS="LITERAL">SQLSTATE</TT> vs. <TT CLASS="LITERAL">SQLCODE</TT></A></DT></DL></DD><DT>33.9. <A HREF="https://school.yunwei.edu/manual/PostgreSQL/ecpg-preproc.html">预处理器指令</A></DT><DD><DL><DT>33.9.1. <A HREF="https://school.yunwei.edu/manual/PostgreSQL/ecpg-preproc.html#ECPG-INCLUDE">包含文件</A></DT><DT>33.9.2. <A HREF="https://school.yunwei.edu/manual/PostgreSQL/ecpg-preproc.html#ECPG-DEFINE">define和undef指令</A></DT><DT>33.9.3. <A HREF="https://school.yunwei.edu/manual/PostgreSQL/ecpg-preproc.html#ECPG-IFDEF">ifdef，ifndef，else，elif和endif指令</A></DT></DL></DD><DT>33.10. <A HREF="https://school.yunwei.edu/manual/PostgreSQL/ecpg-process.html">处理嵌入的SQL程序</A></DT><DT>33.11. <A HREF="https://school.yunwei.edu/manual/PostgreSQL/ecpg-library.html">库函数</A></DT><DT>33.12. <A HREF="https://school.yunwei.edu/manual/PostgreSQL/ecpg-lo.html">大对象</A></DT><DT>33.13. <A HREF="https://school.yunwei.edu/manual/PostgreSQL/ecpg-cpp.html"><ACRONYM CLASS="ACRONYM">C++</ACRONYM>应用程序</A></DT><DD><DL><DT>33.13.1. <A HREF="https://school.yunwei.edu/manual/PostgreSQL/ecpg-cpp.html#ECPG-CPP-SCOPE">宿主变量范围</A></DT><DT>33.13.2. <A HREF="https://school.yunwei.edu/manual/PostgreSQL/ecpg-cpp.html#ECPG-CPP-AND-C">C++应用程序开发与外部C模块</A></DT></DL></DD><DT>33.14. <A HREF="https://school.yunwei.edu/manual/PostgreSQL/ecpg-sql-commands.html">嵌入的SQL命令</A></DT><DD><DL><DT><A HREF="https://school.yunwei.edu/manual/PostgreSQL/ecpg-sql-allocate-descriptor.html">ALLOCATE DESCRIPTOR</A>&nbsp;--&nbsp;分配一个SQL描述区</DT><DT><A HREF="https://school.yunwei.edu/manual/PostgreSQL/ecpg-sql-connect.html">CONNECT</A>&nbsp;--&nbsp;建立数据库连接</DT><DT><A HREF="https://school.yunwei.edu/manual/PostgreSQL/ecpg-sql-deallocate-descriptor.html">DEALLOCATE DESCRIPTOR</A>&nbsp;--&nbsp;重新分配SQL描述符区域</DT><DT><A HREF="https://school.yunwei.edu/manual/PostgreSQL/ecpg-sql-declare.html">DECLARE</A>&nbsp;--&nbsp;定义游标</DT><DT><A HREF="https://school.yunwei.edu/manual/PostgreSQL/ecpg-sql-describe.html">DESCRIBE</A>&nbsp;--&nbsp;获得关于预备语句或者结果集的信息</DT><DT><A HREF="https://school.yunwei.edu/manual/PostgreSQL/ecpg-sql-disconnect.html">DISCONNECT</A>&nbsp;--&nbsp;终止数据库连接</DT><DT><A HREF="https://school.yunwei.edu/manual/PostgreSQL/ecpg-sql-execute-immediate.html">EXECUTE IMMEDIATE</A>&nbsp;--&nbsp;动态准备和执行语句</DT><DT><A HREF="https://school.yunwei.edu/manual/PostgreSQL/ecpg-sql-get-descriptor.html">GET DESCRIPTOR</A>&nbsp;--&nbsp;从SQL标识符区域获得信息</DT><DT><A HREF="https://school.yunwei.edu/manual/PostgreSQL/ecpg-sql-open.html">OPEN</A>&nbsp;--&nbsp;打开一个动态游标</DT><DT><A HREF="https://school.yunwei.edu/manual/PostgreSQL/ecpg-sql-prepare.html">PREPARE</A>&nbsp;--&nbsp;准备一个执行语句</DT><DT><A HREF="https://school.yunwei.edu/manual/PostgreSQL/ecpg-sql-set-autocommit.html">SET AUTOCOMMIT</A>&nbsp;--&nbsp;设置当前会话自动提交操作</DT><DT><A HREF="https://school.yunwei.edu/manual/PostgreSQL/ecpg-sql-set-connection.html">SET CONNECTION</A>&nbsp;--&nbsp;选择一个数据库连接</DT><DT><A HREF="https://school.yunwei.edu/manual/PostgreSQL/ecpg-sql-set-descriptor.html">SET DESCRIPTOR</A>&nbsp;--&nbsp;设置SQL描述符区域信息</DT><DT><A HREF="https://school.yunwei.edu/manual/PostgreSQL/ecpg-sql-type.html">TYPE</A>&nbsp;--&nbsp;定义新的数据类型</DT><DT><A HREF="https://school.yunwei.edu/manual/PostgreSQL/ecpg-sql-var.html">VAR</A>&nbsp;--&nbsp;定义一个变量</DT><DT><A HREF="https://school.yunwei.edu/manual/PostgreSQL/ecpg-sql-whenever.html">WHENEVER</A>&nbsp;--&nbsp;当SQL语句导致一个要发生的特定类条件时，
则指定要采取的行动</DT></DL></DD><DT>33.15. <A HREF="https://school.yunwei.edu/manual/PostgreSQL/ecpg-informix-compat.html"><SPAN CLASS="PRODUCTNAME">Informix</SPAN>兼容模式</A></DT><DD><DL><DT>33.15.1. <A HREF="https://school.yunwei.edu/manual/PostgreSQL/ecpg-informix-compat.html#ECPG-INFORMIX-TYPES">附加类型</A></DT><DT>33.15.2. <A HREF="https://school.yunwei.edu/manual/PostgreSQL/ecpg-informix-compat.html#ECPG-INFORMIX-STATEMENTS">附加的/失踪的嵌入的SQL语句</A></DT><DT>33.15.3. <A HREF="https://school.yunwei.edu/manual/PostgreSQL/ecpg-informix-compat.html#ECPG-INFORMIX-SQLDA">Informix兼容SQLDA描述符区域</A></DT><DT>33.15.4. <A HREF="https://school.yunwei.edu/manual/PostgreSQL/ecpg-informix-compat.html#ECPG-INFORMIX-FUNCTIONS">附加函数</A></DT><DT>33.15.5. <A HREF="https://school.yunwei.edu/manual/PostgreSQL/ecpg-informix-compat.html#ECPG-INFORMIX-CONSTANTS">附加常量</A></DT></DL></DD><DT>33.16. <A HREF="https://school.yunwei.edu/manual/PostgreSQL/ecpg-develop.html">内部</A></DT></DL></DIV><P> 这章描写一种用于<SPAN CLASS="PRODUCTNAME">PostgreSQL</SPAN>的嵌入<ACRONYM CLASS="ACRONYM">SQL</ACRONYM>包。
它是由Linus Tolke(<CODE CLASS="EMAIL">&#60;<A HREF="mailto:linus@epact.se">linus@epact.se</A>&#62;</CODE>)和
Michael Meskes(<CODE CLASS="EMAIL">&#60;<A HREF="mailto:meskes@postgresql.org">meskes@postgresql.org</A>&#62;</CODE>)写的。
最初它是为了在<ACRONYM CLASS="ACRONYM">C</ACRONYM>里面使用书写的。它也可以用于<ACRONYM CLASS="ACRONYM">C++</ACRONYM>，
但是它还不能识别所有<ACRONYM CLASS="ACRONYM">C++</ACRONYM>构造。</P><P> 这份文档相当不完整。但是因为这个接口是标准，
所以我们可以在有关SQL的资源里找到许多额外的信息。 </P></DIV><DIV CLASS="NAVFOOTER"><HR ALIGN="LEFT" WIDTH="100%"><TABLE SUMMARY="Footer navigation table" WIDTH="100%" BORDER="0" CELLPADDING="0" CELLSPACING="0"><TR><TD WIDTH="33%" ALIGN="left" VALIGN="top"><A HREF="https://school.yunwei.edu/manual/PostgreSQL/lo-examplesect.html" ACCESSKEY="P">&#19978;&#19968;&#39029;</A></TD><TD WIDTH="34%" ALIGN="center" VALIGN="top"><A HREF="https://school.yunwei.edu/manual/PostgreSQL/index.html" ACCESSKEY="H">&#36215;&#22987;&#39029;</A></TD><TD WIDTH="33%" ALIGN="right" VALIGN="top"><A HREF="https://school.yunwei.edu/manual/PostgreSQL/ecpg-concept.html" ACCESSKEY="N">&#19979;&#19968;&#39029;</A></TD></TR><TR><TD WIDTH="33%" ALIGN="left" VALIGN="top">例子程序</TD><TD WIDTH="34%" ALIGN="center" VALIGN="top"><A HREF="client-interfaces.html" ACCESSKEY="U">&#19978;&#19968;&#32423;</A></TD><TD WIDTH="33%" ALIGN="right" VALIGN="top">概念</TD></TR></TABLE></DIV></BODY></HTML>
