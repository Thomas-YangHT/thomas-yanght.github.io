<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<HTML><HEAD><TITLE>版本9.2</TITLE><META NAME="GENERATOR" CONTENT="Modular DocBook HTML Stylesheet Version 1.79"><LINK REV="MADE" HREF="mailto:pgsql-docs@postgresql.org"><LINK REL="HOME" TITLE="PostgreSQL 9.3.1 中文手册" HREF="http://school.yunwei.edu/manual/PostgreSQL/index.html"><LINK REL="UP" TITLE="版本说明" HREF="http://school.yunwei.edu/manual/PostgreSQL/release.html"><LINK REL="PREVIOUS" TITLE="版本9.2.1" HREF="release-9-2-1.html"><LINK REL="NEXT" TITLE="发布9.1.10" HREF="release-9-1-10.html"><LINK REL="STYLESHEET" TYPE="text/css" HREF="http://school.yunwei.edu/manual/PostgreSQL/stylesheet.css"><META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=utf-8"><META NAME="creation" CONTENT="2015-07-11T14:00:17"></HEAD><BODY CLASS="SECT1">
<div style="text-align:right">
<a style="margin : 0px 0px 0px 10px;" href="https://github.com/postgres-cn/pgdoc-cn/issues/new" target="_blank" title="在Github上报告问题（请注明问题内容及所在章节）">问题报告</a>
<a style="margin : 0px 0px 0px 10px;" href="https://github.com/postgres-cn/pgdoc-cn/edit/master/postgresql/doc/src/sgml/release-9.2.sgml" target="_blank" title="直接在Github上纠错本页面">纠错本页面</a>
</div>
<DIV CLASS="NAVHEADER"><TABLE SUMMARY="Header navigation table" WIDTH="100%" BORDER="0" CELLPADDING="0" CELLSPACING="0"><TR><TH COLSPAN="5" ALIGN="center" VALIGN="bottom"><A HREF="http://school.yunwei.edu/manual/PostgreSQL/index.html">PostgreSQL 9.3.1 中文手册</A></TH></TR><TR><TD WIDTH="10%" ALIGN="left" VALIGN="top"><A TITLE="版本9.2.1" HREF="release-9-2-1.html" ACCESSKEY="P">&#19978;&#19968;&#39029;</A></TD><TD WIDTH="10%" ALIGN="left" VALIGN="top"><A HREF="http://school.yunwei.edu/manual/PostgreSQL/release.html" ACCESSKEY="U">&#19978;&#19968;&#32423;</A></TD><TD WIDTH="60%" ALIGN="center" VALIGN="bottom">&#38468;&#24405; E. 版本说明</TD><TD WIDTH="20%" ALIGN="right" VALIGN="top"><A TITLE="发布9.1.10" HREF="release-9-1-10.html" ACCESSKEY="N">&#19979;&#19968;&#39029;</A></TD></TR></TABLE><HR ALIGN="LEFT" WIDTH="100%"></DIV><DIV CLASS="SECT1"><H1 CLASS="SECT1"><A NAME="RELEASE-9-2">E.8. 版本9.2</A></H1><DIV CLASS="NOTE"><BLOCKQUOTE CLASS="NOTE"><P><B>发布日期: </B>2012-09-10</P></BLOCKQUOTE></DIV><DIV CLASS="SECT2"><H2 CLASS="SECT2"><A NAME="AEN115785">E.8.1. 概述</A></H2><P> 此版本主要集中在性能上的改进，但新的SQL功能不缺乏。工作在备份支持领域继续进行。主要功能包括：</P><P></P><UL><LI><P> 允许查询从索引中检索数据，避免堆访问(<I CLASS="FIRSTTERM">索引扫描</I>)</P></LI><LI><P> 即使当使用预备语句时，允许规划器为特定参数值产生自定义规划</P></LI><LI><P> 提高规划器使用嵌套循环内部索引扫描的能力</P></LI><LI><P> 允许流复制转发数据到其他从属(<A HREF="warm-standby.html#CASCADING-REPLICATION"><I CLASS="FIRSTTERM">级联复制</I></A>)</P></LI><LI><P> 允许<A HREF="app-pgbasebackup.html"><SPAN CLASS="APPLICATION">pg_basebackup</SPAN></A>执行来自备用服务器的基础备份</P></LI><LI><P> 添加<A HREF="app-pgreceivexlog.html"><SPAN CLASS="APPLICATION">pg_receivexlog</SPAN></A>工具以归档作为他们写入的WAL文件</P></LI><LI><P> 添加<A HREF="http://school.yunwei.edu/manual/PostgreSQL/spgist.html">SP-GiST</A> (空间划分GiST)索引访问方法</P></LI><LI><P> 添加<A HREF="rangetypes.html">range data types</A>支持</P></LI><LI><P> 添加<A HREF="datatype-json.html"><TT CLASS="TYPE">JSON</TT></A>数据类型</P></LI><LI><P> 为视图增加<A HREF="sql-createview.html"><TT CLASS="LITERAL">security_barrier</TT></A>选项</P></LI><LI><P> 允许<SPAN CLASS="APPLICATION">libpq</SPAN>连接字符串有<A HREF="libpq-connect.html#LIBPQ-CONNSTRING"><ACRONYM CLASS="ACRONYM">URI</ACRONYM></A>的格式</P></LI><LI><P> 添加<A HREF="libpq-single-row-mode.html">单行处理模式</A>到<SPAN CLASS="APPLICATION">libpq</SPAN>
更好的处理大的结果集</P></LI></UL><P> 以上项的更多详情在下面的章节有介绍。</P></DIV><DIV CLASS="SECT2"><H2 CLASS="SECT2"><A NAME="AEN115832">E.8.2. 迁移到版本9.2</A></H2><P> 使用<SPAN CLASS="APPLICATION">pg_dump</SPAN>转储/恢复，或者使用<SPAN CLASS="APPLICATION">pg_upgrade</SPAN>
从任何以前版本中迁移数据。</P><P> 版本9.2包含可能影响与先前版本的兼容性的一些变化。
观察下面的不兼容：</P><DIV CLASS="SECT3"><H3 CLASS="SECT3"><A NAME="AEN115838">E.8.2.1. 系统目录</A></H3><P></P><UL><LI><P> 从<A HREF="catalog-pg-tablespace.html"><TT CLASS="STRUCTNAME">pg_tablespace</TT></A>中删除<TT CLASS="STRUCTFIELD">spclocation</TT>字段(Magnus Hagander)</P><P> 该字段实际上定义表空间位置的符号链接的复制，从而当移动表空间时，可能有遗漏错误风险。
在服务器关闭时，通过手动调节符号链接，这种变化允许删除表空间目录。
为了替换该字段，我们添加<A HREF="functions-info.html#FUNCTIONS-INFO-CATALOG-TABLE"><CODE CLASS="FUNCTION">pg_tablespace_location()</CODE></A>
允许符号链接查询。</P></LI><LI><P> 移动<TT CLASS="TYPE">tsvector</TT>最常见元素统计到新的<A HREF="view-pg-stats.html"><TT CLASS="STRUCTNAME">pg_stats</TT></A>列(Alexander Korotkov)</P><P> 为了在<TT CLASS="STRUCTFIELD">most_common_vals</TT>
和<TT CLASS="STRUCTFIELD">most_common_freqs</TT>的<TT CLASS="TYPE">tsvector</TT>列中可用的原先的数据
查询<TT CLASS="STRUCTFIELD">most_common_elems</TT>和<TT CLASS="STRUCTFIELD">most_common_elem_freqs</TT>。</P></LI></UL></DIV><DIV CLASS="SECT3"><H3 CLASS="SECT3"><A NAME="AEN115860">E.8.2.2. 函数</A></H3><P></P><UL><LI><P> 删除<A HREF="hstore.html">hstore</A>'s <TT CLASS="LITERAL">=&gt;</TT>操作符(Robert Haas)</P><P> 用户应该使用<CODE CLASS="FUNCTION">hstore(text, text)</CODE>。
自<SPAN CLASS="PRODUCTNAME">PostgreSQL</SPAN> 9.0，
当创建命名<TT CLASS="LITERAL">=&gt;</TT>的操作符，则发出一个警告信息。
因为<ACRONYM CLASS="ACRONYM">SQL</ACRONYM>标准保留了另一个使用的标记。</P></LI><LI><P> 确保<A HREF="functions-xml.html#FUNCTIONS-XML-PROCESSING"><CODE CLASS="FUNCTION">xpath()</CODE></A>在字符串值中转义特殊字符(Florian Pflug)</P><P> 倘若没有这个，那么对于结果可能不是有效的<ACRONYM CLASS="ACRONYM">XML</ACRONYM>。</P></LI><LI><P> 使用<A HREF="functions-admin.html#FUNCTIONS-ADMIN-DBOBJECT"><CODE CLASS="FUNCTION">pg_relation_size()</CODE></A>
并且如果该对象不存在则返回空(Phil Sorber)</P><P> 这可以防止查询调用这些函数从并发<TT CLASS="COMMAND">DROP</TT>后立即返回错误。</P></LI><LI><P> 使用<A HREF="functions-datetime.html#FUNCTIONS-DATETIME-EXTRACT"><CODE CLASS="FUNCTION">EXTRACT(EPOCH FROM <TT CLASS="REPLACEABLE"><I>timestamp without time zone</I></TT>)</CODE></A>从当地午夜测量时间，而不是<ACRONYM CLASS="ACRONYM">UTC</ACRONYM>午夜(Tom Lane)</P><P> 这一变化恢复在版本7.3中缺乏考虑的变化。
从<ACRONYM CLASS="ACRONYM">UTC</ACRONYM>午夜测量是不一致的，
因为它使结果依赖于<A HREF="runtime-config-client.html#GUC-TIMEZONE"><TT CLASS="VARNAME">timezone</TT></A>设置，
这不应该有<TT CLASS="TYPE">timestamp without time zone</TT>的计算。以前的操作仍然可以通过映射输入
值到<TT CLASS="TYPE">timestamp with time zone</TT>可用。</P></LI><LI><P> 正确解析带有尾随<TT CLASS="LITERAL">yesterday</TT>,<TT CLASS="LITERAL">today</TT>和<TT CLASS="LITERAL">tomorrow</TT>的时间字符串(Dean Rasheed)</P><P> 先前<TT CLASS="LITERAL">SELECT '04:00:00 yesterday'::timestamp</TT>返回午夜时yesterday的日期。</P></LI><LI><P> 修复<A HREF="functions-formatting.html"><CODE CLASS="FUNCTION">to_date()</CODE></A>和
<CODE CLASS="FUNCTION">to_timestamp()</CODE>以封装不完整日期到2020(Bruce Momjian)</P><P> 先前，提供年以及不一致封装低于四位的年掩码。</P></LI></UL></DIV><DIV CLASS="SECT3"><H3 CLASS="SECT3"><A NAME="AEN115909">E.8.2.3. 对象修改</A></H3><P></P><UL><LI><P> 防止<A HREF="sql-alterdomain.html"><TT CLASS="COMMAND">ALTER DOMAIN</TT></A>工作于非域类型上(Peter Eisentraut)</P><P> 在非域类型上所有者和模式变化是可能的。</P></LI><LI><P> 在<A HREF="sql-createfunction.html"><TT CLASS="COMMAND">CREATE FUNCTION</TT></A>中
不再强制小写过程语言名字(Robert Haas)</P><P> 当反引号语言标识符仍然是小写字母时，字符串和带引号的标识符不再强行向下。
因此，例如<TT CLASS="LITERAL">CREATE FUNCTION ... LANGUAGE 'C'</TT>将不再工作；
它必须拼写<TT CLASS="LITERAL">'c'</TT>，或更好地省略引号。</P></LI><LI><P> 改变外键执行触发器系统产生的名称(Tom Lane)</P><P> 这一变化确保在涉及自我参照的外键约束的情况下以正确的顺序触发触发器。</P></LI></UL></DIV><DIV CLASS="SECT3"><H3 CLASS="SECT3"><A NAME="AEN115927">E.8.2.4. 命令行工具</A></H3><P></P><UL><LI><P> 提供一致的反引号，变量扩张，
以及<A HREF="app-psql.html"><SPAN CLASS="APPLICATION">psql</SPAN></A>元命令参数中的引用子字符串操作(Tom Lane)</P><P> 以前，当不通过相邻文本空白分隔的时候。奇怪地处理这种引用。
例如<TT CLASS="LITERAL">'FOO'BAR</TT>作为<TT CLASS="LITERAL">FOO BAR</TT>被输出
（空间意外插入）并且<TT CLASS="LITERAL">FOO'BAR'BAZ</TT>输出不变（不删除期望的引用）。</P></LI><LI><P> 不再将<A HREF="app-clusterdb.html"><SPAN CLASS="APPLICATION">clusterdb</SPAN></A>表名看作双引号；
不再将<A HREF="app-reindexdb.html"><SPAN CLASS="APPLICATION">reindexdb</SPAN></A>表和索引名看作双引号(Bruce Momjian)</P><P> 如果希望引用，那么用户现在必须在命令参数中包含双引号。</P></LI><LI><P> <A HREF="app-createuser.html"><SPAN CLASS="APPLICATION">createuser</SPAN></A>缺省不再提示选项设置(Peter Eisentraut)</P><P> 使用<TT CLASS="OPTION">--interactive</TT>获得旧的操作。</P></LI><LI><P> 禁用<A HREF="app-dropuser.html"><SPAN CLASS="APPLICATION">dropuser</SPAN></A>中的用户名提示，
除非指定<TT CLASS="OPTION">--interactive</TT>(Peter Eisentraut)</P></LI></UL></DIV><DIV CLASS="SECT3"><H3 CLASS="SECT3"><A NAME="AEN115956">E.8.2.5. 服务器设置</A></H3><P></P><UL><LI><P> 添加服务器参数以指定<A HREF="runtime-config-connection.html#GUC-SSL-CA-FILE">服务器端<ACRONYM CLASS="ACRONYM">SSL</ACRONYM>文件位置</A></P><P> 这允许改变名字和文件位置，该文件先前作为<TT CLASS="FILENAME">server.crt</TT>,
<TT CLASS="FILENAME">server.key</TT>, <TT CLASS="FILENAME">root.crt</TT>和数据目录中
<TT CLASS="FILENAME">root.crl</TT>的硬编码。<SPAN CLASS="emphasis"><I CLASS="EMPHASIS">缺省时服务器将不再检查<TT CLASS="FILENAME">root.crt</TT>或者
<TT CLASS="FILENAME">root.crl</TT></I></SPAN>；加载这些文件，相关参数必须设置为非缺省值。</P></LI><LI><P> 删除<TT CLASS="VARNAME">silent_mode</TT>参数(Heikki Linnakangas)</P><P> 可以使用<TT CLASS="COMMAND">pg_ctl start -l postmaster.log</TT>获得类似操作。</P></LI><LI><P> 删除不再需要的<TT CLASS="VARNAME">wal_sender_delay</TT>参数(Tom Lane)</P></LI><LI><P> 删除<TT CLASS="VARNAME">custom_variable_classes</TT>参数(Tom Lane)</P><P> 通过该设置提供的检查是含糊的。现在可以以任何类名作为任何设置前缀。</P></LI></UL></DIV><DIV CLASS="SECT3"><H3 CLASS="SECT3"><A NAME="AEN115983">E.8.2.6. 监控</A></H3><P></P><UL><LI><P> 重命名<A HREF="monitoring-stats.html#MONITORING-STATS-VIEWS-TABLE"><TT CLASS="STRUCTNAME">pg_stat_activity</TT></A><TT CLASS="STRUCTFIELD">.procpid</TT>
到<TT CLASS="STRUCTFIELD">pid</TT>，匹配其他系统表(Magnus Hagander)</P></LI><LI><P> 创建一个单一的<TT CLASS="STRUCTFIELD">pg_stat_activity</TT>列以报告进程状态(Scott Mead, Magnus Hagander)</P><P> 先前的<TT CLASS="STRUCTFIELD">query</TT>和<TT CLASS="STRUCTFIELD">query_start</TT>值现在仍然可用于空闲会话，
允许增强分析。</P></LI><LI><P> 当查询完成时，重命名<TT CLASS="STRUCTNAME">pg_stat_activity</TT>.<TT CLASS="STRUCTFIELD">current_query</TT>到
<TT CLASS="STRUCTFIELD">query</TT>，因为它是不清楚的(Magnus Hagander)</P></LI><LI><P> 改变所有<ACRONYM CLASS="ACRONYM">SQL</ACRONYM>级别统计时序值到以毫秒计的<TT CLASS="TYPE">float8</TT>列</P><P> 这种变化消除设计假设该值精确到微秒，没有更多的（因为<TT CLASS="TYPE">float8</TT>值可以是分数）。
受影响的列：<TT CLASS="STRUCTNAME">pg_stat_user_functions</TT>.<TT CLASS="STRUCTFIELD">total_time</TT>,<TT CLASS="STRUCTNAME">pg_stat_user_functions</TT>.<TT CLASS="STRUCTFIELD">self_time</TT>,<TT CLASS="STRUCTNAME">pg_stat_xact_user_functions</TT>.<TT CLASS="STRUCTFIELD">total_time</TT>,
和<TT CLASS="STRUCTNAME">pg_stat_xact_user_functions</TT>.<TT CLASS="STRUCTFIELD">self_time</TT>。
潜在这些列的统计函数现在返回<TT CLASS="TYPE">float8</TT>毫秒，而不是<TT CLASS="TYPE">bigint</TT>
微秒。现在以毫秒测量<TT CLASS="FILENAME">contrib/pg_stat_statements</TT>的<TT CLASS="STRUCTFIELD">total_time</TT>列。</P></LI></UL></DIV></DIV><DIV CLASS="SECT2"><H2 CLASS="SECT2"><A NAME="AEN116021">E.8.3. 变化</A></H2><P> 下面你将发现在<SPAN CLASS="PRODUCTNAME">PostgreSQL</SPAN> 9.2和先前主要版本之间变化的详细情况。</P><DIV CLASS="SECT3"><H3 CLASS="SECT3"><A NAME="AEN116025">E.8.3.1. 服务器</A></H3><DIV CLASS="SECT4"><H4 CLASS="SECT4"><A NAME="AEN116027">E.8.3.1.1. 性能</A></H4><P></P><UL><LI><P> 允许查询只从索引中检索数据，避免堆访问(Robert Haas, Ibrar Ahmed, Heikki Linnakangas, Tom Lane)</P><P> 此功能通常被称为<I CLASS="FIRSTTERM">只索引扫描</I>。
为了只包含对所有会话可见的元组堆页可以忽略堆访问，
正如可见视图报道的；因此该效益主要适用于大多数静态数据。可见视图将损坏安全作为
执行该功能的必要组成部分。</P></LI><LI><P> 增加<A HREF="http://school.yunwei.edu/manual/PostgreSQL/spgist.html">SP-GiST</A>(空间划分GiST)索引访问方法(Teodor Sigaev, Oleg Bartunov, Tom Lane)</P><P> SP-GiST与GIST的灵活性相比较，但支持不平衡分段搜索结构而不是平衡树。
为了适当的问题，SP-GiST在索引编译时间和搜索时间上比GiST更快。</P></LI><LI><P> 允许组提交在重负载下有效工作(Peter Geoghegan, Simon Riggs, Heikki Linnakangas)</P><P> 此前，批量提交无效作为已增加的写入工作量，由于内部锁争用。 </P></LI><LI><P> 允许使用一个新的快速路径锁定机制管理未竞争锁(Robert Haas)</P></LI><LI><P> 减少创建虚拟事务ID锁的开销(Robert Haas)</P></LI><LI><P> 减少串行化隔离级别锁的开销(Dan Ports)</P></LI><LI><P> 提高PowerPC和Itanium spinlock性能(Manabu Ori, Robert Haas, Tom Lane)</P></LI><LI><P> 减少共享的无效缓存消息开销(Robert Haas)</P></LI><LI><P> 移动<TT CLASS="STRUCTNAME">PGPROC</TT>共享内存数组频繁访问的成员到一个单独数组中(Pavan Deolasee, Heikki Linnakangas, Robert Haas)</P></LI><LI><P> 通过成批地添加元组到堆中提高<TT CLASS="COMMAND">COPY</TT>性能(Heikki Linnakangas)</P></LI><LI><P> 通过产生内存分配开销少的树的几何数据类型提高GiST索引性能。</P></LI><LI><P> 提高GiST索引编译时间(Alexander Korotkov, Heikki Linnakangas)</P></LI><LI><P> 允许提示位被迅速设置为临时的和未标记表(Robert Haas)</P></LI><LI><P> 允许通过内联进行排序，非<ACRONYM CLASS="ACRONYM">SQL</ACRONYM>可调用比较函数(Peter Geoghegan, Robert Haas, Tom Lane)</P></LI><LI><P> 增大基于<A HREF="runtime-config-resource.html#GUC-SHARED-BUFFERS"><TT CLASS="VARNAME">shared_buffers</TT></A>的CLOG缓冲区规模数量(Robert Haas, Simon Riggs, Tom Lane)</P></LI><LI><P> 当删除表或者数据库时，提高发生的缓冲池扫描性能(Jeff Janes, Simon Riggs)</P></LI><LI><P> 当许多表被删除或截断时，提高检查点的fsync请求阵列性能(Tom Lane)</P></LI><LI><P> Windows上传递文件描述符安全码到子进程(Heikki Linnakangas)</P><P> 这允许Windows会话使用比以前更多的打开文件描述符。</P></LI></UL></DIV><DIV CLASS="SECT4"><H4 CLASS="SECT4"><A NAME="AEN116077">E.8.3.1.2. 进程管理</A></H4><P></P><UL><LI><P> 创建一个执行检查点的专门后台进程(Simon Riggs)</P><P> 原先后端写进程执行脏页写入和检查点。分离成两个过程允许每个目标可预见地完成。</P></LI><LI><P> 通过快速唤醒walwriter提高异步提交操作(Simon Riggs)</P><P> 以前，<A HREF="runtime-config-wal.html#GUC-WAL-WRITER-DELAY"><TT CLASS="VARNAME">wal_writer_delay</TT></A>触发<ACRONYM CLASS="ACRONYM">WAL</ACRONYM>冲洗磁盘；
现在填充<ACRONYM CLASS="ACRONYM">WAL</ACRONYM>缓冲区也触发<ACRONYM CLASS="ACRONYM">WAL</ACRONYM>写入。</P></LI><LI><P> 在不活跃期间让bgwriter, walwriter，检查点，数据采集器，日志收集器和归档日志后端进程更有效睡眠(Peter Geoghegan, Tom Lane)</P><P> 当没什么事可做的时候，这一系列的变化会降低进程唤醒频率，大幅降低空闲服务器上的功耗。</P></LI></UL></DIV><DIV CLASS="SECT4"><H4 CLASS="SECT4"><A NAME="AEN116094">E.8.3.1.3. 优化器</A></H4><P></P><UL><LI><P> 允许规划器生成特定参数的自定义规划，即使当使用预处理语句的时候(Tom Lane)</P><P> 以往，一个预备语句总是有一个单一的<SPAN CLASS="QUOTE">"通用"</SPAN>计划被用于所有的参数值，
通常远不如用于包含显式恒定值的非预备语句规划。现在，规划器
试图生成特定参数值的自定义规划。
一个通用计划将只能用在自定义规划多次证明没有任何好处的情况。
这种变化应该消除原先从预备语句使用中见到过的性能损失（包括PL/pgSQL中的非动态语句）。</P></LI><LI><P> 提高规划器使用嵌套循环内部索引扫描的能力(Tom Lane)</P><P> 新的<SPAN CLASS="QUOTE">"参数化路径"</SPAN>机制允许内部索引扫描使用超过扫描中一个连接水平的关系值。
这可以大大提高语义限制（如外连接）允许的连接顺序的情况下的性能。</P></LI><LI><P> 提高对外部数据封装器的规划<ACRONYM CLASS="ACRONYM">API</ACRONYM> (Etsuro Fujita, Shigeru Hanada, Tom Lane)</P><P> 封装器现在可以为表提供多种访问<SPAN CLASS="QUOTE">"路径"</SPAN>，在连接规划中更加灵活。</P></LI><LI><P> 识别非表关系的自相矛盾限制分句(Tom Lane)</P><P>当<A HREF="runtime-config-query.html#GUC-CONSTRAINT-EXCLUSION"><TT CLASS="VARNAME">constraint_exclusion</TT></A> <TT CLASS="LITERAL">打开</TT>时，执行
这个检查。</P></LI><LI><P> 允许<TT CLASS="LITERAL">indexed_col op ANY(ARRAY[...])</TT>条件用于纯索引扫描并且仅仅索引扫描(Tom Lane)</P><P> 以前这样的条件只能用于位图索引扫描。</P></LI><LI><P> 在<TT CLASS="TYPE">boolean</TT>列上支持<CODE CLASS="FUNCTION">MIN</CODE>/<CODE CLASS="FUNCTION">MAX</CODE>索引优化(Marti Raudsepp) </P></LI><LI><P> 当估计设置行数时，解释了在<TT CLASS="COMMAND">SELECT</TT>目标列中设置返回函数的原因(Tom Lane)</P></LI><LI><P> 修复规划器更可靠的处理带有重复列索引(Tom Lane)</P></LI><LI><P> 收集并且使用数组元素次数统计(Alexander Korotkov, Tom Lane)</P><P> 这种变化提高了数组<TT CLASS="LITERAL">&lt;@</TT>, <TT CLASS="LITERAL">&amp;&amp;</TT>和
<TT CLASS="LITERAL">@&gt;</TT>操作符（数组容量和重叠部分）的选择性估计。</P></LI><LI><P> 允许收集外表的统计(Etsuro Fujita)</P></LI><LI><P> 提高使用部分索引的成本估计(Tom Lane)</P></LI><LI><P> 提高在子查询中引用列统计的规划器能力(Tom Lane)</P></LI><LI><P> 提高子查询使用<TT CLASS="LITERAL">DISTINCT</TT>的统计估计(Tom Lane)</P></LI></UL></DIV><DIV CLASS="SECT4"><H4 CLASS="SECT4"><A NAME="AEN116145">E.8.3.1.4. 认证</A></H4><P></P><UL><LI><P> 不要把角色名字和 <A HREF="auth-pg-hba-conf.html"><TT CLASS="FILENAME">pg_hba.conf</TT></A>中
声明的<TT CLASS="LITERAL">samerole</TT>看作自动包含超级用户的(Andrew Dunstan)</P><P> 这使得它更容易使用组角色的<TT CLASS="LITERAL">reject</TT>行。</P></LI><LI><P> 调节<TT CLASS="FILENAME">pg_hba.conf</TT>过程更加一致地处理令牌解析(Brendan Jurd, &Aacute;lvaro Herrera)</P></LI><LI><P> 不允许空<TT CLASS="FILENAME">pg_hba.conf</TT>文件(Tom Lane)</P><P> 这样做是为了更快速检测配置错误。</P></LI><LI><P> 使用超级用户权限意味着复制权限(Noah Misch)</P><P> 这样避免了需要明确地分配这类权限。</P></LI></UL></DIV><DIV CLASS="SECT4"><H4 CLASS="SECT4"><A NAME="AEN116165">E.8.3.1.5. 监控</A></H4><P></P><UL><LI><P> 试图在后端崩溃期间记录当前查询字符串(Marti Raudsepp)</P></LI><LI><P> 使得自动清理I/O活动日志更加冗长(Greg Smith, Noah Misch)</P><P> 这条记录是通过<A HREF="runtime-config-autovacuum.html#GUC-LOG-AUTOVACUUM-MIN-DURATION"><TT CLASS="VARNAME">log_autovacuum_min_duration</TT></A>触发的。</P></LI><LI><P> 使<ACRONYM CLASS="ACRONYM">WAL</ACRONYM>回放尽快报告错误(Fujii Masao)</P><P> 一旦服务器到主模式只报告错误的情况。</P></LI><LI><P> 添加<A HREF="functions-admin.html#FUNCTIONS-ADMIN-BACKUP"><CODE CLASS="FUNCTION">pg_xlog_location_diff()</CODE></A>
以简化WAL位置比较(Euler Taveira de Oliveira)</P><P> 这对于计算复制滞后是有用的。</P></LI><LI><P> 支持Windows上可配置的事件日志应用程序名称(MauMau, Magnus Hagander)</P><P> 这允许不同的情况下使用不同的标识符事件日志，
通过设置<A HREF="runtime-config-logging.html#GUC-EVENT-SOURCE"><TT CLASS="VARNAME">event_source</TT></A>服务器参数，
这类似于<A HREF="runtime-config-logging.html#GUC-SYSLOG-IDENT"><TT CLASS="VARNAME">syslog_ident</TT></A>工作方式。</P></LI><LI><P> 改变<SPAN CLASS="QUOTE">"意外的块结束"</SPAN>消息到<TT CLASS="LITERAL">DEBUG1</TT>级别，除非有一个已打开事务(Magnus Hagander)</P><P> 这种变化减少笨拙地关闭数据库连接应用导致的日志振动。</P></LI></UL></DIV><DIV CLASS="SECT4"><H4 CLASS="SECT4"><A NAME="AEN116196">E.8.3.1.6. 统计视图</A></H4><P></P><UL><LI><P> 跟踪临时文件大小和<A HREF="monitoring-stats.html#PG-STAT-DATABASE-VIEW"><TT CLASS="STRUCTNAME">pg_stat_database</TT></A>系统视图中的文件数(Tomas Vondra)</P></LI><LI><P> 添加一个死锁计数器到<TT CLASS="STRUCTNAME">pg_stat_database</TT>系统视图(Magnus Hagander)</P></LI><LI><P> 添加服务器参数<A HREF="runtime-config-statistics.html#GUC-TRACK-IO-TIMING"><TT CLASS="VARNAME">track_io_timing</TT></A>跟踪I/O时序(Ants Aasma, Robert Haas)</P></LI><LI><P> 报告<A HREF="monitoring-stats.html#PG-STAT-BGWRITER-VIEW"><TT CLASS="STRUCTNAME">pg_stat_bgwriter</TT></A>中的检查点定时信息(Greg Smith, Peter Geoghegan)</P></LI></UL></DIV><DIV CLASS="SECT4"><H4 CLASS="SECT4"><A NAME="AEN116214">E.8.3.1.7. 服务器设置</A></H4><P></P><UL><LI><P> 默默忽略<A HREF="runtime-config-client.html#GUC-SEARCH-PATH"><TT CLASS="VARNAME">search_path</TT></A>指定的不存在的模式(Tom Lane)</P><P> 这使得更加方便使用通用路径设置，可能包含一些不存在于数据库中的模式。</P></LI><LI><P> 允许超级用户设置<A HREF="runtime-config-locks.html#GUC-DEADLOCK-TIMEOUT"><TT CLASS="VARNAME">deadlock_timeout</TT></A>每个会话，
而不是每个集群(Noah Misch)</P><P> 这允许为了可能涉及到死锁的事务减少<TT CLASS="VARNAME">deadlock_timeout</TT>，
因此更快地检查故障。另外，增加该值可以用于减少由于死锁选择取消会话机会。</P></LI><LI><P> 添加服务器参数<A HREF="runtime-config-resource.html#GUC-TEMP-FILE-LIMIT"><TT CLASS="VARNAME">temp_file_limit</TT></A>限制每个会话临时文件空间使用率(Mark Kirkwood)</P></LI><LI><P> 在加载相关扩展之前允许超级用户<TT CLASS="COMMAND">SET</TT>扩展的超级用户自定义变量(Tom Lane) </P><P> 系统现在记得是否<TT CLASS="COMMAND">SET</TT>通过超级用户被执行，
因此当加载扩展时，可以执行适当的权限检查。</P></LI><LI><P> 添加<A HREF="app-postmaster.html">postmaster</A> <TT CLASS="OPTION">-C</TT>选项查询配置参数(Bruce Momjian)</P><P> 允许<SPAN CLASS="APPLICATION">pg_ctl</SPAN>更好地处理<TT CLASS="ENVAR">PGDATA</TT>或者<TT CLASS="OPTION">-D</TT>指向配置目录的情况。</P></LI><LI><P> 以<TT CLASS="COMMAND">CREATE DATABASE</TT>中隐含值替换空的区域名(Tom Lane)</P><P> 这可以防止服务器重启后不同地解释<TT CLASS="STRUCTNAME">pg_database</TT>.<TT CLASS="STRUCTFIELD">datcollate</TT>或者
<TT CLASS="STRUCTFIELD">datctype</TT>的情况。</P></LI></UL><DIV CLASS="SECT5"><H5 CLASS="SECT5"><A NAME="AEN116252">E.8.3.1.7.1. <TT CLASS="FILENAME">postgresql.conf</TT></A></H5><P></P><UL><LI><P> 允许报告<TT CLASS="FILENAME">postgresql.conf</TT>中的多个错误，
而不仅仅是第一个(Alexey Klyukin, Tom Lane)</P></LI><LI><P> 允许通过所有会话处理<TT CLASS="FILENAME">postgresql.conf</TT>的加载，即使有一些设置对特定会话是无效的(Alexey Klyukin)</P><P> 以前，这种无效会话值可能导致所有设置变化被该会话忽略。</P></LI><LI><P> 为配置文件添加一个<TT CLASS="LITERAL">include_if_exists</TT>功能(Greg Smith)</P><P> 这个和<TT CLASS="LITERAL">include</TT>一样运行，除了如果忽略该文件不会抛出错误外。</P></LI><LI><P> 在<SPAN CLASS="APPLICATION">initdb</SPAN>期间识别服务器时区，并且相应设置<TT CLASS="FILENAME">postgresql.conf</TT>项
<A HREF="runtime-config-client.html#GUC-TIMEZONE"><TT CLASS="VARNAME">timezone</TT></A>和
<A HREF="runtime-config-logging.html#GUC-LOG-TIMEZONE"><TT CLASS="VARNAME">log_timezone</TT></A></P><P>
这避免了服务器启动时昂贵的时区探测。</P></LI><LI><P> 修复<A HREF="view-pg-settings.html"><TT CLASS="STRUCTNAME">pg_settings</TT></A>以
报告Windows上<TT CLASS="FILENAME">postgresql.conf</TT>行号(Tom Lane)</P></LI></UL></DIV></DIV></DIV><DIV CLASS="SECT3"><H3 CLASS="SECT3"><A NAME="AEN116282">E.8.3.2. 备份和恢复</A></H3><P></P><UL><LI><P> 允许流复制转发数据到其他从属(<A HREF="warm-standby.html#CASCADING-REPLICATION"><I CLASS="FIRSTTERM">级联复制</I></A>)(Fujii Masao)</P><P> 以前只有主服务器可以提供流复制日志文件到备用服务器。</P></LI><LI><P> 添加新的<A HREF="runtime-config-wal.html#GUC-SYNCHRONOUS-COMMIT"><TT CLASS="VARNAME">synchronous_commit</TT></A>
模式<TT CLASS="LITERAL">remote_write</TT> (Fujii Masao, Simon Riggs)</P><P> 该模式等待备用服务器写事务数据到它自己的操作系统，但是不等待数据被刷新到备用磁盘。</P></LI><LI><P> 添加<A HREF="app-pgreceivexlog.html"><SPAN CLASS="APPLICATION">pg_receivexlog</SPAN></A>工具
归档他们写入的WAL文件变化，而不是等待完成的WAL文件(Magnus Hagander)</P></LI><LI><P> 允许<A HREF="app-pgbasebackup.html"><SPAN CLASS="APPLICATION">pg_basebackup</SPAN></A>从
备用服务器上做基础备份(Jun Ishizuka, Fujii Masao)</P><P> 该功能允许基础备份工作从主服务器上被卸载。</P></LI><LI><P> 当<SPAN CLASS="APPLICATION">pg_basebackup</SPAN>在执行备份时，允许WAL文件流(Magnus Hagander)</P><P> 允许在主库上丢弃之前传递WAL文件到备库。</P></LI></UL></DIV><DIV CLASS="SECT3"><H3 CLASS="SECT3"><A NAME="AEN116309">E.8.3.3. 查询</A></H3><P></P><UL><LI><P> 如果断开客户端连接，取消运行的查询(Florian Pflug)</P><P> 如果在查询中后端监测客户端连接损坏，那么它现在将取消查询而不是尝试完成它。</P></LI><LI><P> 在行表达式运行时保留列名(Andrew Dunstan, Tom Lane)</P><P> 当行值被转换为<TT CLASS="TYPE">hstore</TT>或者<TT CLASS="TYPE">json</TT>类型时：结果值字段有期望名，那么该变化允许有更好结果。</P></LI><LI><P> 改善用于子-<TT CLASS="COMMAND">SELECT</TT>结果的列标签(Marti Raudsepp)</P><P> 以前使用一般标签<TT CLASS="LITERAL">?column?</TT>。</P></LI><LI><P> 提高决定未知值类型的探索法(Tom Lane)</P><P> 当考虑多态操作符的时候，
长期规则是一个未知常量可能与现在应用它的操作者一端的值有同样类型，
而不仅仅操作符匹配。&#13;</P></LI><LI><P> 关于创建映射或者来自域类型的警告(Robert Haas)</P><P> 这种投射没有影响。</P></LI><LI><P> 当行不能进行<TT CLASS="LITERAL">CHECK</TT>或者<TT CLASS="LITERAL">NOT NULL</TT>约束时，
显示行内容作为错误详细信息
(Jan Kundr&aacute;t)</P><P> 当插入或者更新处理多行时，这将很容易识别哪行是有问题的。</P></LI></UL></DIV><DIV CLASS="SECT3"><H3 CLASS="SECT3"><A NAME="AEN116336">E.8.3.4. 对象操作</A></H3><P></P><UL><LI><P> 在并行<ACRONYM CLASS="ACRONYM">DDL</ACRONYM>中提供更可靠操作(Robert Haas, Noah Misch)</P><P> 该变化增加了锁定，它应该删除多种情况中<SPAN CLASS="QUOTE">"高速缓存查找失败"</SPAN>错误。
另外，不再可能添加关系到正在删除的模式中，先前导致不一致系统目录内容的情况。</P></LI><LI><P> 添加<TT CLASS="LITERAL">CONCURRENTLY</TT>选项到
<A HREF="sql-dropindex.html"><TT CLASS="COMMAND">DROP INDEX</TT></A>
(Simon Riggs)</P><P> 允许索引删除不锁定其他会话。</P></LI><LI><P> 允许外数据包有每一列选项(Shigeru Hanada)</P></LI><LI><P> 改进视图定义的输出(Andrew Dunstan)</P></LI></UL><DIV CLASS="SECT4"><H4 CLASS="SECT4"><A NAME="AEN116354">E.8.3.4.1. 约束</A></H4><P></P><UL><LI><P> 允许<A HREF="ddl-constraints.html"><TT CLASS="LITERAL">CHECK</TT></A>
约束被声明为<TT CLASS="LITERAL">NOT VALID</TT>
(&Aacute;lvaro Herrera)</P><P> 添加<TT CLASS="LITERAL">NOT VALID</TT>约束不会导致扫描的表可以验证已存在行满足该约束。
随后，检查新添加或者更新的行。当考虑<TT CLASS="VARNAME">constraint_exclusion</TT>时，
规划器忽略这些约束。因为它不确定所有行可以满足该约束。&#13;</P><P> 新的<TT CLASS="COMMAND">ALTER TABLE VALIDATE</TT>命令允许为已存在
行检查<TT CLASS="LITERAL">NOT VALID</TT>限制，之后被转换成普通约束。</P></LI><LI><P> 允许<TT CLASS="LITERAL">CHECK</TT>限制被声明为
<TT CLASS="LITERAL">NO INHERIT</TT> (Nikhil Sontakke, Alex Hunsaker, &Aacute;lvaro Herrera)</P><P> 这使得它们只在父表是可执行的，而不是子表。</P></LI><LI><P> 添加该能力到<A HREF="sql-altertable.html">rename</A>约束(Peter Eisentraut)</P></LI></UL></DIV><DIV CLASS="SECT4"><H4 CLASS="SECT4"><A NAME="AEN116376">E.8.3.4.2. <TT CLASS="COMMAND">ALTER</TT></A></H4><P></P><UL><LI><P> 减少重新编译表需要以及
索引某个
<A HREF="sql-altertable.html"><TT CLASS="COMMAND">ALTER TABLE</TT></A>... <TT CLASS="LITERAL">ALTER COLUMN TYPE</TT>操作(Noah Misch)</P><P> 增加<TT CLASS="TYPE">varchar</TT>或者<TT CLASS="TYPE">varbit</TT>列长度限制，或者完全删除限制，不再需要表重写。
类似地，增加<TT CLASS="TYPE">numeric</TT>列允许的精度，或者改变约束的<TT CLASS="TYPE">numeric</TT>列到不受约束的<TT CLASS="TYPE">numeric</TT>，
不再需要表重写。
在涉及<TT CLASS="TYPE">interval</TT>, <TT CLASS="TYPE">timestamp</TT>和<TT CLASS="TYPE">timestamptz</TT>类型的相似情况中避免表重写。</P></LI><LI><P> 避免
<A HREF="sql-altertable.html"><TT CLASS="COMMAND">ALTER TABLE</TT></A>在
不必要的情况下验证外键约束(Noah Misch)</P></LI><LI><P> 增加<TT CLASS="LITERAL">IF EXISTS</TT>选项到一些<TT CLASS="COMMAND">ALTER</TT>命令中(Pavel Stehule)</P><P> 比如
<TT CLASS="COMMAND">ALTER FOREIGN TABLE IF EXISTS foo RENAME TO bar</TT>。</P></LI><LI><P> 添加
<A HREF="sql-alterforeigndatawrapper.html"><TT CLASS="COMMAND">ALTER FOREIGN DATA WRAPPER</TT></A> ... <TT CLASS="LITERAL">RENAME</TT>
和<A HREF="sql-alterserver.html"><TT CLASS="COMMAND">ALTER SERVER</TT></A> ... <TT CLASS="LITERAL">RENAME</TT> (Peter Eisentraut)</P></LI><LI><P> 添加
<A HREF="sql-alterdomain.html"><TT CLASS="COMMAND">ALTER DOMAIN</TT></A> ... <TT CLASS="LITERAL">RENAME</TT> (Peter Eisentraut)</P><P> 你可能已经使用
<TT CLASS="COMMAND">ALTER TYPE</TT>重命名域。</P></LI><LI><P> 在不存在约束上为
<TT CLASS="COMMAND">ALTER DOMAIN</TT> ... <TT CLASS="LITERAL">DROP CONSTRAINT</TT>抛出一个错误(Peter Eisentraut)</P><P> 一个<TT CLASS="LITERAL">IF EXISTS</TT>选项已被添加以提供先前操作。</P></LI></UL></DIV><DIV CLASS="SECT4"><H4 CLASS="SECT4"><A NAME="AEN116425">E.8.3.4.3. <A HREF="sql-createtable.html"><TT CLASS="COMMAND">CREATE TABLE</TT></A></A></H4><P></P><UL><LI><P> 允许<TT CLASS="COMMAND">CREATE TABLE (LIKE ...)</TT>来自外表，视图和复合类型(Peter Eisentraut)</P><P> 比如，模式匹配视图的允许创建表。</P></LI><LI><P> 当拷贝索引注释时，修复<TT CLASS="COMMAND">CREATE TABLE (LIKE ...)</TT>以避免索引名冲突(Tom Lane)</P></LI><LI><P> 修复<TT CLASS="COMMAND">CREATE TABLE</TT> ... <TT CLASS="LITERAL">AS EXECUTE</TT>
以处理<TT CLASS="LITERAL">WITH NO DATA</TT>和列名称规格(Tom Lane)</P></LI></UL></DIV><DIV CLASS="SECT4"><H4 CLASS="SECT4"><A NAME="AEN116442">E.8.3.4.4. 对象权限</A></H4><P></P><UL><LI><P> 为视图添加
<A HREF="sql-createview.html"><TT CLASS="LITERAL">security_barrier</TT></A>选项(KaiGai Kohei, Robert Haas)</P><P> 该选项可以防止优化可能允许视图受保护数据暴露给用户，
比如推动涉及不安全函数的子句到视图的<TT CLASS="LITERAL">WHERE</TT>子句。
这种视图预期比普通视图执行更差。</P></LI><LI><P> 添加新的
<A HREF="sql-createfunction.html"><TT CLASS="LITERAL">LEAKPROOF</TT></A>函数属性以标记函
数可以安全地向下推进到<TT CLASS="LITERAL">security_barrier</TT>视图(KaiGai Kohei)</P></LI><LI><P> 增加数据类型权限支持(Peter Eisentraut)</P><P> 在类型和域上添加<ACRONYM CLASS="ACRONYM">SQL</ACRONYM>-一致<TT CLASS="LITERAL">USAGE</TT>权限支持。
其意图是可以限制哪个用户在类型上可以创建依赖，因为这种依赖
限制修改该类型的用户能力。&#13;</P></LI><LI><P> 检查在
<TT CLASS="COMMAND">SELECT INTO</TT> / <TT CLASS="COMMAND">CREATE TABLE AS</TT>中的
<TT CLASS="COMMAND">INSERT</TT>权限(KaiGai Kohei)</P><P> 因为通过<TT CLASS="COMMAND">SELECT INTO</TT>
或者<TT CLASS="COMMAND">CREATE TABLE AS</TT>创建该对象，那么创建者通常有插入权限；
但是有一种不真的困境情况，
比如当<TT CLASS="LITERAL">ALTER DEFAULT PRIVILEGES</TT>已经删除该权限时。</P></LI></UL></DIV></DIV><DIV CLASS="SECT3"><H3 CLASS="SECT3"><A NAME="AEN116470">E.8.3.5. 实用操作</A></H3><P></P><UL><LI><P> 允许<A HREF="sql-vacuum.html"><TT CLASS="COMMAND">VACUUM</TT></A>更容易忽略不能被锁定的页(Simon Riggs, Robert Haas)</P><P> 这种变化会大大降低<TT CLASS="COMMAND">VACUUM</TT>获得<SPAN CLASS="QUOTE">"stuck"</SPAN>等待其他会话的发生率。</P></LI><LI><P> 使得<A HREF="sql-explain.html"><TT CLASS="COMMAND">EXPLAIN</TT></A>
<TT CLASS="LITERAL">(BUFFERS)</TT>计算脏块和写入的(Robert Haas)</P></LI><LI><P> 使得<TT CLASS="COMMAND">EXPLAIN ANALYZE</TT>报告通过过滤步骤拒绝的行数(Marko Tiikkaja)</P></LI><LI><P> 当时间值是不想要的，允许<TT CLASS="COMMAND">EXPLAIN ANALYZE</TT>避免时间开销(Tomas Vondra)</P><P> 通过设置新的<TT CLASS="LITERAL">TIMING</TT>选项到<TT CLASS="LITERAL">FALSE</TT>来完成。</P></LI></UL></DIV><DIV CLASS="SECT3"><H3 CLASS="SECT3"><A NAME="AEN116494">E.8.3.6. 数据类型</A></H3><P></P><UL><LI><P> 添加支持<A HREF="rangetypes.html">range data types</A>
(Jeff Davis, Tom Lane, Alexander Korotkov)</P><P> 一系列数据类型存储从属于它的基本数据类型的上限和下限。
它支持类似包含，重叠和交叉的操作。
</P></LI><LI><P> 添加<A HREF="datatype-json.html"><TT CLASS="TYPE">JSON</TT></A>
数据类型(Robert Haas)</P><P> 这种类型存储带有适当验证的<ACRONYM CLASS="ACRONYM">JSON</ACRONYM> (JavaScript对象表示法)数据。</P></LI><LI><P> 添加
<A HREF="functions-json.html"><CODE CLASS="FUNCTION">array_to_json()</CODE></A>
和<CODE CLASS="FUNCTION">row_to_json()</CODE> (Andrew Dunstan)</P></LI><LI><P> 添加<A HREF="datatype-numeric.html#DATATYPE-SERIAL"><TT CLASS="TYPE">SMALLSERIAL</TT></A>
数据类型(Mike Pultz)</P><P> 这就像<TT CLASS="TYPE">SERIAL</TT>，除了它以两个字节整数列(<TT CLASS="TYPE">int2</TT>)存储序列之外。</P></LI><LI><P> 允许<A HREF="sql-createdomain.html">domains</A>被
声明为<TT CLASS="LITERAL">NOT VALID</TT> (&Aacute;lvaro Herrera)</P><P> 在域创建时间设置该选项，或者通过
<TT CLASS="COMMAND">ALTER DOMAIN</TT> ... <TT CLASS="LITERAL">ADD CONSTRAINT</TT> ... <TT CLASS="LITERAL">NOT VALID</TT>. <TT CLASS="COMMAND">ALTER DOMAIN</TT> ... <TT CLASS="LITERAL">VALIDATE CONSTRAINT</TT>充分验证该限制。</P></LI><LI><P> 为了<A HREF="datatype-money.html"><TT CLASS="TYPE">money</TT></A>数据类型支持更多的区域指定格式选项(Tom Lane)</P><P> 特别的，为了该值顺序，标志，以及货币输出中的货币符号纪念POSIX选项。另外，
确保千位分隔符只被插入到小数点左边，正如POSIX要求的。</P></LI><LI><P> 为<TT CLASS="TYPE">macaddr</TT>数据类型添加按位<SPAN CLASS="QUOTE">"and"</SPAN>, <SPAN CLASS="QUOTE">"or"</SPAN>和<SPAN CLASS="QUOTE">"not"</SPAN>操作符(Brendan Jurd)</P></LI><LI><P> 当提供一个标量值时，
允许<A HREF="functions-xml.html#FUNCTIONS-XML-PROCESSING"><CODE CLASS="FUNCTION">xpath()</CODE></A>返回
单一元素<ACRONYM CLASS="ACRONYM">XML</ACRONYM>数组(Florian Pflug)</P><P> 先前，它返回空数组。这种变化也将导致<CODE CLASS="FUNCTION">xpath_exists()</CODE>为这种表达式返回真，而不是假。</P></LI><LI><P> 提高<ACRONYM CLASS="ACRONYM">XML</ACRONYM>错误处理以变得更健壮(Florian Pflug)</P></LI></UL></DIV><DIV CLASS="SECT3"><H3 CLASS="SECT3"><A NAME="AEN116550">E.8.3.7. 函数</A></H3><P></P><UL><LI><P> 允许非超级用户在其他会话从属于同一用户时使用
<A HREF="functions-admin.html#FUNCTIONS-ADMIN-SIGNAL"><CODE CLASS="FUNCTION">pg_cancel_backend()</CODE></A>
和<A HREF="functions-admin.html#FUNCTIONS-ADMIN-SIGNAL"><CODE CLASS="FUNCTION">pg_terminate_backend()</CODE></A>
(Magnus Hagander, Josh Kupershmidt, Dan Farina)</P><P> 以前只有超级用户被允许使用这些函数。</P></LI><LI><P> 允许事务快照的输入和输出(Joachim Wieland, Tom Lane)</P><P>这允许多个事务共享数据库状态的同一视图。快照是通过
<A HREF="functions-admin.html#FUNCTIONS-SNAPSHOT-SYNCHRONIZATION"><CODE CLASS="FUNCTION">pg_export_snapshot()</CODE></A>输出，通过
<A HREF="sql-set-transaction.html"><TT CLASS="COMMAND">SET TRANSACTION SNAPSHOT</TT></A>输入。只有当前正在运行的事务快照可以被输入。</P></LI><LI><P> 支持表达式上的<A HREF="functions-info.html#FUNCTIONS-INFO-CATALOG-TABLE"><TT CLASS="LITERAL">COLLATION FOR</TT></A>(Peter Eisentraut)</P><P> 返回表达式排序规则的字符串表示。</P></LI><LI><P> 添加<A HREF="functions-info.html#FUNCTIONS-INFO-SCHEMA-TABLE"><CODE CLASS="FUNCTION">pg_opfamily_is_visible()</CODE></A>
(Josh Kupershmidt)</P></LI><LI><P> 添加<TT CLASS="TYPE">numeric</TT> variant of <A HREF="functions-admin.html#FUNCTIONS-ADMIN-DBSIZE"><CODE CLASS="FUNCTION">pg_size_pretty()</CODE></A>
适用于<CODE CLASS="FUNCTION">pg_xlog_location_diff()</CODE> (Fujii Masao)</P></LI><LI><P> 添加<A HREF="functions-info.html#FUNCTIONS-INFO-SESSION-TABLE"><CODE CLASS="FUNCTION">pg_trigger_depth()</CODE></A>函数(Kevin Grittner)</P><P> 报告当前触发器调用深度。 </P></LI><LI><P> 允许
<A HREF="functions-aggregate.html#FUNCTIONS-AGGREGATE-TABLE"><CODE CLASS="FUNCTION">string_agg()</CODE></A>
处理<TT CLASS="TYPE">bytea</TT>值(Pavel Stehule)</P></LI><LI><P> 在一个较大的量化子表达式中发生后向引用的地方修复正则表达式(Tom Lane)</P><P> 比如<TT CLASS="LITERAL">^(\w+)( \1)+$</TT>。先前版本并不检查后向引用实际匹配第一次出现。</P></LI></UL></DIV><DIV CLASS="SECT3"><H3 CLASS="SECT3"><A NAME="AEN116596">E.8.3.8. <A HREF="http://school.yunwei.edu/manual/PostgreSQL/information-schema.html">信息模式</A></A></H3><P></P><UL><LI><P> 添加信息模式视图
<TT CLASS="STRUCTNAME">role_udt_grants</TT>, <TT CLASS="STRUCTNAME">udt_privileges</TT>,
和<TT CLASS="STRUCTNAME">user_defined_types</TT> (Peter Eisentraut)</P></LI><LI><P> 添加复合类型属性到信息模式<TT CLASS="STRUCTNAME">element_types</TT>视图(Peter Eisentraut)</P></LI><LI><P> 信息模式中实现<TT CLASS="STRUCTFIELD">interval_type</TT>列(Peter Eisentraut)</P><P> 以前这些列读取为空。</P></LI><LI><P> 在信息模式<TT CLASS="STRUCTNAME">attributes</TT>, <TT CLASS="STRUCTNAME">columns</TT>,
<TT CLASS="STRUCTNAME">domains</TT>和<TT CLASS="STRUCTNAME">element_types</TT>视图中实现排序规则相关列(Peter Eisentraut)</P></LI><LI><P> 在信息模式<TT CLASS="STRUCTNAME">table_privileges</TT>视图中实现<TT CLASS="STRUCTFIELD">with_hierarchy</TT>列
(Peter Eisentraut)</P></LI><LI><P> 增加序列<TT CLASS="LITERAL">USAGE</TT>权限显示到信息模式中(Peter Eisentraut)</P></LI><LI><P> 使信息模式显示缺省权限(Peter Eisentraut)</P><P> 先前，非空缺省权限没有出现在视图中。</P></LI></UL></DIV><DIV CLASS="SECT3"><H3 CLASS="SECT3"><A NAME="AEN116628">E.8.3.9. 服务器端语言</A></H3><DIV CLASS="SECT4"><H4 CLASS="SECT4"><A NAME="AEN116630">E.8.3.9.1. <A HREF="http://school.yunwei.edu/manual/PostgreSQL/plpgsql.html">PL/pgSQL</A>服务器端语言</A></H4><P></P><UL><LI><P> 允许PL/pgSQL <TT CLASS="COMMAND">OPEN</TT>游标命令提供参数名(Yeb Havinga)</P></LI><LI><P> 添加<TT CLASS="COMMAND">GET STACKED DIAGNOSTICS</TT> PL/pgSQL命令检索异常信息(Pavel Stehule)</P></LI><LI><P> 通过缓存类型信息加快PL/pgSQL数组赋值(Pavel Stehule)</P></LI><LI><P> 提高性能以及为长连续<TT CLASS="LITERAL">ELSIF</TT>子句内存损耗(Tom Lane)</P></LI><LI><P> 在PL/pgSQL错误消息中输出函数签名，而不仅仅是名字(Pavel Stehule)</P></LI></UL></DIV><DIV CLASS="SECT4"><H4 CLASS="SECT4"><A NAME="AEN116647">E.8.3.9.2. <A HREF="http://school.yunwei.edu/manual/PostgreSQL/plpython.html">PL/Python</A>服务器端语言</A></H4><P></P><UL><LI><P> 添加PL/Python <ACRONYM CLASS="ACRONYM">SPI</ACRONYM>游标支持
(Jan Urbanski)</P><P> 这允许PL/Python读取部分结果集。</P></LI><LI><P> 添加结果元数据函数到PL/Python (Peter Eisentraut)</P><P> 具体地说，这增加了结果对象函数
<TT CLASS="LITERAL">.colnames</TT>, <TT CLASS="LITERAL">.coltypes</TT>和
<TT CLASS="LITERAL">.coltypmods</TT>。</P></LI><LI><P> 删除支持Python 2.2 (Peter Eisentraut)</P></LI></UL></DIV><DIV CLASS="SECT4"><H4 CLASS="SECT4"><A NAME="AEN116663">E.8.3.9.3. <A HREF="xfunc-sql.html">SQL</A>服务器端语言</A></H4><P></P><UL><LI><P> 允许<ACRONYM CLASS="ACRONYM">SQL</ACRONYM>语言函数参照参数名(Matthew Draper)</P><P> 为了使用这个，仅仅命名函数参数，并且然后参考<ACRONYM CLASS="ACRONYM">SQL</ACRONYM>
函数体中的参数名。</P></LI></UL></DIV></DIV><DIV CLASS="SECT3"><H3 CLASS="SECT3"><A NAME="AEN116672">E.8.3.10. 客户端应用</A></H3><P></P><UL><LI><P> 添加<A HREF="app-initdb.html"><SPAN CLASS="APPLICATION">initdb</SPAN></A>
选项<TT CLASS="OPTION">--auth-local</TT>和<TT CLASS="OPTION">--auth-host</TT>
(Peter Eisentraut)</P><P> 这允许
<TT CLASS="LITERAL">local</TT>和<TT CLASS="LITERAL">host</TT> <TT CLASS="FILENAME">pg_hba.conf</TT>认证设置的分散控制，
<TT CLASS="OPTION">--auth</TT>仍然控制着两个。</P></LI><LI><P> 添加<TT CLASS="OPTION">--replication</TT>/<TT CLASS="OPTION">--no-replication</TT>标记到
<A HREF="app-createuser.html"><SPAN CLASS="APPLICATION">createuser</SPAN></A>以控制备份权限(Fujii Masao)</P></LI><LI><P> 添加<TT CLASS="OPTION">--if-exists</TT>选项到
<A HREF="app-dropdb.html"><SPAN CLASS="APPLICATION">dropdb</SPAN></A>和
<A HREF="app-dropuser.html"><SPAN CLASS="APPLICATION">dropuser</SPAN></A>
(Josh Kupershmidt)</P></LI><LI><P> 给出命令行工具以指定要连接数据库名字，
如果<TT CLASS="LITERAL">postgres</TT>数据库连接失败，
那么回退到<TT CLASS="LITERAL">template1</TT> (Robert Haas)</P></LI></UL><DIV CLASS="SECT4"><H4 CLASS="SECT4"><A NAME="AEN116703">E.8.3.10.1. <A HREF="app-psql.html"><SPAN CLASS="APPLICATION">psql</SPAN></A></A></H4><P></P><UL><LI><P> 添加基于显示宽度的显示模式以自动扩展输出(Peter Eisentraut)</P><P> 增加<TT CLASS="LITERAL">auto</TT>选项到<TT CLASS="COMMAND">\x</TT>命令，当正常
输出比屏幕宽的时候，会切换到扩展模式。</P></LI><LI><P> 允许脚本文件的包含是相对于它被调用的文件目录命名的(Gurjeet Singh)</P><P> 这是执行新的命令<TT CLASS="COMMAND">\ir</TT>。</P></LI><LI><P>
在<SPAN CLASS="APPLICATION">psql</SPAN>变量名中添加支持非<ACRONYM CLASS="ACRONYM">ASCII</ACRONYM>字符(Tom Lane)</P></LI><LI><P> 添加支持主要版本特定<TT CLASS="FILENAME">.psqlrc</TT>文件(Bruce Momjian)</P><P> <SPAN CLASS="APPLICATION">psql</SPAN>支持次要版本特定<TT CLASS="FILENAME">.psqlrc</TT>文件。</P></LI><LI><P> 提供环境变量覆盖<SPAN CLASS="APPLICATION">psql</SPAN>历史并且启动文件位置(Andrew Dunstan)</P><P> 如果设置，那么<TT CLASS="ENVAR">PSQL_HISTORY</TT>和<TT CLASS="ENVAR">PSQLRC</TT>决定这些文件名。</P></LI><LI><P> 添加<TT CLASS="COMMAND">\setenv</TT>命令修改传递给子进程的环境变量(Andrew Dunstan)</P></LI><LI><P> 命名<TT CLASS="FILENAME">.sql</TT>扩展的<SPAN CLASS="APPLICATION">psql</SPAN>的临时编辑文件(Peter Eisentraut)</P><P> 这允许扩展敏感编辑者选择正确模式。</P></LI><LI><P> 允许<SPAN CLASS="APPLICATION">psql</SPAN>使用零字节字段并且记录分隔符(Peter Eisentraut)</P><P> 使用零字节(NUL)分隔符的各种shell工具，比如<SPAN CLASS="APPLICATION">find</SPAN>。</P></LI><LI><P> 使用<TT CLASS="COMMAND">\timing</TT>选项报告查询失败时间(Magnus Hagander)</P><P> 以前只为成功查询报道时间。</P></LI><LI><P> 统一并固定<TT CLASS="COMMAND">\copy</TT>和SQL <TT CLASS="COMMAND">COPY</TT>的<SPAN CLASS="APPLICATION">psql</SPAN>处理(Noah Misch)</P><P> 这修复错误操作更加可预测并且设置<TT CLASS="COMMAND">\set ON_ERROR_ROLLBACK</TT>。</P></LI></UL></DIV><DIV CLASS="SECT4"><H4 CLASS="SECT4"><A NAME="AEN116757">E.8.3.10.2. 信息命令</A></H4><P></P><UL><LI><P> 使得<TT CLASS="COMMAND">\d</TT>在序列上显示拥有它的表/列名(Magnus Hagander)</P></LI><LI><P> 显示<TT CLASS="COMMAND">\d+</TT>中列的统计目标(Magnus Hagander)</P></LI><LI><P> 显示<TT CLASS="COMMAND">\du</TT>中角色密码截止日期(Fabr&iacute;zio de Royes Mello)</P></LI><LI><P> 显示投射，转换，域和语言说明(Josh Kupershmidt)</P><P> 这些分别包含在<TT CLASS="COMMAND">\dC+</TT>，
<TT CLASS="COMMAND">\dc+</TT>, <TT CLASS="COMMAND">\dD+</TT>和<TT CLASS="COMMAND">\dL</TT>输出中。</P></LI><LI><P> 显示<ACRONYM CLASS="ACRONYM">SQL</ACRONYM>/<ACRONYM CLASS="ACRONYM">MED</ACRONYM>对象说明(Josh Kupershmidt)</P><P> 这些分别包括在<TT CLASS="COMMAND">\des+</TT>,
<TT CLASS="COMMAND">\det+</TT>输出，<TT CLASS="COMMAND">\dew+</TT>外服务器，外
表，和外数据包装器。</P></LI><LI><P> 改变<TT CLASS="COMMAND">\dd</TT>仅显示没有自身反斜杠命令对象类型的说明(Josh Kupershmidt)&#13;</P></LI></UL></DIV><DIV CLASS="SECT4"><H4 CLASS="SECT4"><A NAME="AEN116787">E.8.3.10.3. Tab实现</A></H4><P></P><UL><LI><P> 在<SPAN CLASS="APPLICATION">psql</SPAN> tab实现中，
在大小写情况下依照新的
<A HREF="app-psql.html#APP-PSQL-VARIABLES"><TT CLASS="LITERAL">COMP_KEYWORD_CASE</TT></A>设置
实现<ACRONYM CLASS="ACRONYM">SQL</ACRONYM>关键字</P></LI><LI><P> 添加tab实现支持
<TT CLASS="COMMAND">EXECUTE</TT> (Andreas Karlsson)</P></LI><LI><P> 在<TT CLASS="COMMAND">GRANT</TT>/<TT CLASS="COMMAND">REVOKE</TT>中
添加角色引用的tab实现(Peter Eisentraut)</P></LI><LI><P> 当必要的时候，允许文件名的tab实现可以提供引用(Noah Misch)</P></LI><LI><P> 改变tab实现支持<TT CLASS="COMMAND">TABLE</TT>也包含视图(Magnus Hagander)</P></LI></UL></DIV><DIV CLASS="SECT4"><H4 CLASS="SECT4"><A NAME="AEN116808">E.8.3.10.4. <A HREF="app-pgdump.html"><SPAN CLASS="APPLICATION">pg_dump</SPAN></A></A></H4><P></P><UL><LI><P> 添加<TT CLASS="OPTION">--exclude-table-data</TT>选项到
<SPAN CLASS="APPLICATION">pg_dump</SPAN> (Andrew Dunstan)</P><P> 这允许在每个表基础上备份表的定义而不是它的数据。</P></LI><LI><P> 添加<TT CLASS="OPTION">--section</TT>选项到<SPAN CLASS="APPLICATION">pg_dump</SPAN>
和<SPAN CLASS="APPLICATION">pg_restore</SPAN> (Andrew Dunstan)</P><P> 有效值是<TT CLASS="LITERAL">pre-data</TT>, <TT CLASS="LITERAL">data</TT>,
和<TT CLASS="LITERAL">post-data</TT>。给定的该选项不止一次的选择两个或更多部分。</P></LI><LI><P> 使用
<A HREF="app-pg-dumpall.html"><SPAN CLASS="APPLICATION">pg_dumpall</SPAN></A>首先备份
所有角色，然后角色上的所有配置设置(Phil Sorber)</P><P> 这允许角色的配置设置提及其他没有产生错误的角色。</P></LI><LI><P> 如果在新的集群中丢失<TT CLASS="LITERAL">postgres</TT>数据库，那么允许
<SPAN CLASS="APPLICATION">pg_dumpall</SPAN>避免错误(Robert Haas)</P></LI><LI><P> 按照用户名顺序备份外服务器用户映射(Peter Eisentraut)</P><P> 这有助于产生确定性备份文件。</P></LI><LI><P> 以可预见性顺序备份操作符(Peter Eisentraut)</P></LI><LI><P> 当扩展配置表通过<SPAN CLASS="APPLICATION">pg_dump</SPAN>被备份时，收紧规则(Tom Lane)</P></LI><LI><P> 使得<SPAN CLASS="APPLICATION">pg_dump</SPAN>发出更多有用的依赖信息(Tom Lane)</P><P> 包含在归档格式转储中的依赖关系以前使用非常有限，
因为他们经常引用似乎
不在转储中的对象。
现在他们在转储对象之间
代表实际的依赖关系（可能是间接的）。</P></LI><LI><P> 当备份多个数据库对象时，提高<SPAN CLASS="APPLICATION">pg_dump</SPAN>的性能(Tom Lane)</P></LI></UL></DIV></DIV><DIV CLASS="SECT3"><H3 CLASS="SECT3"><A NAME="AEN116851">E.8.3.11. <A HREF="http://school.yunwei.edu/manual/PostgreSQL/libpq.html"><SPAN CLASS="APPLICATION">libpq</SPAN></A></A></H3><P></P><UL><LI><P> 允许<SPAN CLASS="APPLICATION">libpq</SPAN>连接
字符串有<A HREF="libpq-connect.html#LIBPQ-CONNSTRING"><ACRONYM CLASS="ACRONYM">URI</ACRONYM></A>
的格式(Alexander Shulgin)</P><P> 该语法以<TT CLASS="LITERAL">postgres://</TT>开头。
这可以允许应用程序为URI表示数据库连接避免实现它们自身解析器。&#13;</P></LI><LI><P> 添加<A HREF="libpq-connect.html#LIBPQ-CONNECT-SSLCOMPRESSION">连接选项</A>
以禁用<ACRONYM CLASS="ACRONYM">SSL</ACRONYM>压缩
(Laurenz Albe)</P><P> 这可以用于删除快速网络中<ACRONYM CLASS="ACRONYM">SSL</ACRONYM>压缩的开销。</P></LI><LI><P> 为了更好处理大的结果集添加
<A HREF="libpq-single-row-mode.html">单行处理模式</A></P><P> 此前，<SPAN CLASS="APPLICATION">libpq</SPAN>将
其返回给应用程序之前总是收集内存中整个查询结果。</P></LI><LI><P> 添加<TT CLASS="LITERAL">const</TT>限定符
到函数<CODE CLASS="FUNCTION">PQconnectdbParams</CODE>, <CODE CLASS="FUNCTION">PQconnectStartParams</CODE>,
和<CODE CLASS="FUNCTION">PQpingParams</CODE>的声明(Lionel Elie Mamane)</P></LI><LI><P> 允许<TT CLASS="FILENAME">.pgpass</TT>文件在密码域中包含转义字符(Robert Haas)</P></LI><LI><P> 当必须终止进程时，尝试库函数使用<CODE CLASS="FUNCTION">abort()</CODE>代替<CODE CLASS="FUNCTION">exit()</CODE>(Peter Eisentraut)</P><P> 这个选择并不妨碍使用正常退出代码程序，
并产生一个可以由调用者捕捉的信号。</P></LI></UL></DIV><DIV CLASS="SECT3"><H3 CLASS="SECT3"><A NAME="AEN116888">E.8.3.12. 源码</A></H3><P></P><UL><LI><P> 删除封闭端口号(Peter Eisentraut)</P><P> 不再支持下列平台：dgux,
nextstep, sunos4, svr4, ultrix4, univel, bsdi。</P></LI><LI><P> 添加使用
<A HREF="http://school.yunwei.edu/manual/PostgreSQL/install-windows.html">MS Visual Studio 2010</A>支持编译(Brar Piening)</P></LI><LI><P> 启动使用MinGW-w64 32-位编译器进行编译(Lars Kanis)</P></LI><LI><P> 在安装期间安装<TT CLASS="FILENAME">plpgsql.h</TT>到<TT CLASS="FILENAME">include/server</TT>(Heikki Linnakangas) </P></LI><LI><P> 提高闩锁装置以包含postmaster终止的检测(Peter Geoghegan, Heikki Linnakangas, Tom Lane)</P><P> 后端进程先前必须意识到调查事件，这消除了主要原因之一。</P></LI><LI><P> 支持的地方使用C灵活数组元素(Peter Eisentraut)</P></LI><LI><P> 提高并行事务回归测试(<SPAN CLASS="APPLICATION">isolationtester</SPAN>) (Noah Misch)</P></LI><LI><P> 在当前目录中修改<SPAN CLASS="APPLICATION">thread_test</SPAN>创建它的测试文件，而不是<TT CLASS="FILENAME">/tmp</TT> (Bruce Momjian)</P></LI><LI><P> 提高flex和bison警告和错误报告(Tom Lane)</P></LI><LI><P> 添加内存屏障支持(Robert Haas)</P><P> 这是目前未使用的。</P></LI><LI><P> 修改pgindent使用typedef文件(Bruce Momjian)</P></LI><LI><P> 由于被发送到服务器添加处理消息钩子(Martin Pihlak)</P></LI><LI><P> 为<TT CLASS="COMMAND">DROP</TT>命令添加对象访问钩(KaiGai Kohei)</P></LI><LI><P> 集中<TT CLASS="COMMAND">DROP</TT>处理一些对象类型(KaiGai Kohei)</P></LI><LI><P> 添加<SPAN CLASS="APPLICATION">pg_upgrade</SPAN>测试套件(Peter Eisentraut)</P></LI><LI><P> 伴随<ACRONYM CLASS="ACRONYM">TCL</ACRONYM> 8.5.11 同步正则表达式代码
并且改善内部处理(Tom Lane)</P></LI><LI><P> 移动<ACRONYM CLASS="ACRONYM">CRC</ACRONYM>表到libpgport，
在一个单独的include文件中提供它们(Daniel Farina)</P></LI><LI><P> 为了用于主要发布声明
创建添加选项到<SPAN CLASS="APPLICATION">git_changelog</SPAN> (Bruce Momjian)</P></LI><LI><P> 支持Linux的<TT CLASS="FILENAME">/proc/self/oom_score_adj</TT> API (Tom Lane)</P></LI></UL></DIV><DIV CLASS="SECT3"><H3 CLASS="SECT3"><A NAME="AEN116945">E.8.3.13. 额外模块</A></H3><P></P><UL><LI><P> 通过使用libpq的新单行处理模式提高<A HREF="dblink.html">dblink</A>的效率
(Kyotaro Horiguchi, Marko Kreen)</P><P> 这个改进不适用于<CODE CLASS="FUNCTION">dblink_send_query()</CODE>/<CODE CLASS="FUNCTION">dblink_get_result()</CODE>。</P></LI><LI><P> 在<A HREF="file-fdw.html">file_fdw</A>中支持<TT CLASS="LITERAL">force_not_null</TT>选项(Shigeru Hanada)</P></LI><LI><P> 为<A HREF="pgarchivecleanup.html"><SPAN CLASS="APPLICATION">pg_archivecleanup</SPAN></A>实现
演习模式(Gabriele Bartolini)</P><P> 这只输出已删除文件名。</P></LI><LI><P> 添加新的<A HREF="pgbench.html">pgbench</A>切换<TT CLASS="OPTION">--unlogged-tables</TT>,
<TT CLASS="OPTION">--tablespace</TT>和<TT CLASS="OPTION">--index-tablespace</TT> (Robert Haas)</P></LI><LI><P> 改变<A HREF="pgtestfsync.html"><SPAN CLASS="APPLICATION">pg_test_fsync</SPAN></A>以测试
一定量的时间，而不是固定周期数(Bruce Momjian)</P><P> 删除<TT CLASS="OPTION">-o</TT>/周期选项，并且添加<TT CLASS="OPTION">-s</TT>/秒。</P></LI><LI><P> 添加
<A HREF="pgtesttiming.html"><SPAN CLASS="APPLICATION">pg_test_timing</SPAN></A>功能
以测量时钟一致性和时间开销
(Ants Aasma, Greg Smith)</P></LI><LI><P> 添加<A HREF="tcn.html">tcn</A>（触发变更通知）
模块在表变更上生成<TT CLASS="COMMAND">NOTIFY</TT>事件(Kevin Grittner)</P></LI></UL><DIV CLASS="SECT4"><H4 CLASS="SECT4"><A NAME="AEN116984">E.8.3.13.1. <A HREF="pgupgrade.html"><SPAN CLASS="APPLICATION">pg_upgrade</SPAN></A></A></H4><P></P><UL><LI><P> 调整<SPAN CLASS="APPLICATION">pg_upgrade</SPAN>环境变量(Bruce Momjian)</P><P> 重命名data,bin和以<TT CLASS="LITERAL">PG</TT>开头的port环境变量，
支持<TT CLASS="ENVAR">PGPORTOLD</TT>/<TT CLASS="ENVAR">PGPORTNEW</TT>,
取代<TT CLASS="ENVAR">PGPORT</TT>。</P></LI><LI><P> 检查<SPAN CLASS="APPLICATION">pg_upgrade</SPAN>记录和错误报告(Bruce Momjian)</P><P> 创建四个附加的日志文件，并且成功时删除它们。
添加<TT CLASS="OPTION">-r</TT>/<TT CLASS="OPTION">--retain</TT>选项无条件的保留这些文件。同时
删除不必要的<SPAN CLASS="APPLICATION">pg_upgrade</SPAN>选项<TT CLASS="OPTION">-g</TT>/<TT CLASS="OPTION">-G</TT>/<TT CLASS="OPTION">-l</TT>选项，
固定日志文件的权限。</P></LI><LI><P> 使<SPAN CLASS="APPLICATION">pg_upgrade</SPAN>创建一个脚本增量
生成更精确的优化统计(Bruce Momjian)</P><P> 这降低了升级后产生最小的集群统计所需要的时间。</P></LI><LI><P> 允许<SPAN CLASS="APPLICATION">pg_upgrade</SPAN>更新没有<TT CLASS="LITERAL">postgres</TT>数据库的旧的集群(Bruce Momjian) </P></LI><LI><P> 允许<SPAN CLASS="APPLICATION">pg_upgrade</SPAN>处理新的或旧的数据库丢失情况，只要它们是空的(Bruce Momjian)</P></LI><LI><P> 允许<SPAN CLASS="APPLICATION">pg_upgrade</SPAN>处理配置目录安装(Bruce Momjian)</P></LI><LI><P> 在<SPAN CLASS="APPLICATION">pg_upgrade</SPAN>中，添加<TT CLASS="OPTION">-o</TT>/<TT CLASS="OPTION">-O</TT>选项传递参数到服务器(Bruce Momjian)</P><P> 对配置目录安装有作用。</P></LI><LI><P> 改变<SPAN CLASS="APPLICATION">pg_upgrade</SPAN>使用缺省port 50432(Bruce Momjian)</P><P> 这有助于在更新期间避免意外的客户端连接。</P></LI><LI><P> 减少<SPAN CLASS="APPLICATION">pg_upgrade</SPAN>集群锁定(Bruce Momjian)</P><P> 具体来说，如果使用链接模式，那么只锁定旧的集群。
并且在存储模式之后执行。</P></LI></UL></DIV><DIV CLASS="SECT4"><H4 CLASS="SECT4"><A NAME="AEN117035">E.8.3.13.2. <A HREF="pgstatstatements.html"><SPAN CLASS="APPLICATION">pg_stat_statements</SPAN></A></A></H4><P></P><UL><LI><P> 允许<SPAN CLASS="APPLICATION">pg_stat_statements</SPAN>通过SQL文本标准化聚集类似查询(Peter Geoghegan, Tom Lane)</P><P> 使用非参数化SQL应用程序的用户可以没有详细的日志分析监控查询性能。</P></LI><LI><P> 增加脏块和写入块计算以及读/写时间到<SPAN CLASS="APPLICATION">pg_stat_statements</SPAN> (Robert Haas, Ants Aasma)</P></LI><LI><P> 避免<SPAN CLASS="APPLICATION">pg_stat_statements</SPAN>来自
<TT CLASS="COMMAND">PREPARE</TT>和<TT CLASS="COMMAND">EXECUTE</TT>命令的重复计算(Tom Lane)</P></LI></UL></DIV><DIV CLASS="SECT4"><H4 CLASS="SECT4"><A NAME="AEN117052">E.8.3.13.3. <A HREF="sepgsql.html">sepgsql</A></A></H4><P></P><UL><LI><P> 在全局对象上支持<TT CLASS="LITERAL">SECURITY LABEL</TT>
(KaiGai Kohei, Robert Haas)</P><P> 具体来说，添加数据库安全标签，表空间，和角色。</P></LI><LI><P> 允许sepgsql接受数据库标签(KaiGai Kohei)</P></LI><LI><P> 在各种对象的创建过程中执行sepgsql权限检查(KaiGai Kohei) </P></LI><LI><P> 添加<CODE CLASS="FUNCTION">sepgsql_setcon()</CODE>和相关函数以控制sepgsql安全域(KaiGai Kohei)</P></LI><LI><P> 添加sepgsql用户空间访问缓存以提高性能(KaiGai Kohei)</P></LI></UL></DIV></DIV><DIV CLASS="SECT3"><H3 CLASS="SECT3"><A NAME="AEN117069">E.8.3.14. 文档</A></H3><P></P><UL><LI><P> 使用网站上的样式表添加规则用以随意编译HTML文档(Magnus Hagander)</P><P> 使用<TT CLASS="COMMAND">gmake STYLE=website draft</TT>.</P></LI><LI><P> 改善<TT CLASS="COMMAND">EXPLAIN</TT>文档(Tom Lane)</P></LI><LI><P> 记录用户/数据库名通过命令行工具如<SPAN CLASS="APPLICATION">vacuumdb</SPAN>
使用双引号保存(Bruce Momjian)</P></LI><LI><P> 记录通过客户端MD5认证返回的实际字符串(Cyan Ogilvie)</P></LI><LI><P> 反对在<TT CLASS="COMMAND">CREATE TEMP TABLE</TT>中使用<TT CLASS="LITERAL">GLOBAL</TT>和<TT CLASS="LITERAL">LOCAL</TT> (Noah Misch)</P><P> <SPAN CLASS="PRODUCTNAME">PostgreSQL</SPAN>早已把这些关键词看作没有操作，
并且继续这样做；但在未来他们可能意味着SQL标准的内容，
所以应用程序应避免使用它们。</P></LI></UL></DIV></DIV></DIV><DIV CLASS="NAVFOOTER"><HR ALIGN="LEFT" WIDTH="100%"><TABLE SUMMARY="Footer navigation table" WIDTH="100%" BORDER="0" CELLPADDING="0" CELLSPACING="0"><TR><TD WIDTH="33%" ALIGN="left" VALIGN="top"><A HREF="release-9-2-1.html" ACCESSKEY="P">&#19978;&#19968;&#39029;</A></TD><TD WIDTH="34%" ALIGN="center" VALIGN="top"><A HREF="http://school.yunwei.edu/manual/PostgreSQL/index.html" ACCESSKEY="H">&#36215;&#22987;&#39029;</A></TD><TD WIDTH="33%" ALIGN="right" VALIGN="top"><A HREF="release-9-1-10.html" ACCESSKEY="N">&#19979;&#19968;&#39029;</A></TD></TR><TR><TD WIDTH="33%" ALIGN="left" VALIGN="top">版本9.2.1</TD><TD WIDTH="34%" ALIGN="center" VALIGN="top"><A HREF="http://school.yunwei.edu/manual/PostgreSQL/release.html" ACCESSKEY="U">&#19978;&#19968;&#32423;</A></TD><TD WIDTH="33%" ALIGN="right" VALIGN="top">发布9.1.10</TD></TR></TABLE></DIV></BODY></HTML>
