<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html lang="en" xml:lang="en" xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta content="text/html; charset=UTF-8" http-equiv="Content-Type"/>

    <title>OpenStack Docs: Large objects</title>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

<!-- Bootstrap CSS -->
<link href="_static/css/bootstrap.css" rel="stylesheet">

<!-- Pygments CSS -->
<link href="_static/css/native.css" rel="stylesheet">

<!-- Fonts -->
<link href="_static/css/font-awesome.css" rel="stylesheet">
<link href='https://fonts.googleapis.com/css?family=Open+Sans:300,400,700' rel='stylesheet' type='text/css'>

<!-- Custom CSS -->
<link href="_static/css/combined.css" rel="stylesheet">
<link href="_static/css/styles.css" rel="stylesheet">

<!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
<!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
<!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
    <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
<![endif]-->
  


<!-- Google Analytics -->
<script>
(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','//www.google-analytics.com/analytics.js','ga');

ga('create', 'UA-17511903-1', 'auto');
ga('send', 'pageview');
</script>
<!-- End Google Analytics -->

  </head>
  <body>
<nav class="navbar navbar-default inner" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button class="navbar-toggle" data-target="#bs-example-navbar-collapse-1" data-toggle="collapse" type="button">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <div class="brand-wrapper">
        <a class="navbar-brand" href="https://docs.openstack.org/"></a>
      </div>
      <div class="search-icon show"><i class="fa fa-search"></i> Search</div></div>
      <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
      <div class="search-container tiny">
        <div id="gcse">
          <script type="text/javascript">
(function() {
  var cx = '000108871792296872333:noj9nikm74i';
  var gcse = document.createElement('script');
  gcse.type = 'text/javascript';
  gcse.async = true;
  gcse.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') +
      '//www.google.com/cse/cse.js?cx=' + cx;
  var s = document.getElementsByTagName('script')[0];
  s.parentNode.insertBefore(gcse, s);
})();
          </script>
          <gcse:search gname="standard"></gcse:search>
        </div>
        <i class="fa fa-times close-search"></i>
      </div>
      <ul class="nav navbar-nav navbar-main show">
        <li>
          <div id="gcse-mobile">
            <gcse:search gname="mobile"></gcse:search>
          </div>
        </li>
        <li>
          <a href="http://www.openstack.org/software/" class="drop" id="dropdownMenuSoftware">Software <i class="fa fa-caret-down"></i></a>
          <ul class="dropdown-menu" role="menu" aria-labelledby="dropdownMenuSoftware">
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://www.openstack.org/software/">Overview</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://www.openstack.org/software/project-navigator/">Project Navigator</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://www.openstack.org/software/sample-configs/">Sample Configs</a></li>
            <li role="presentation" class="divider"></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="https://www.openstack.org/software/security/">Security</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://www.openstack.org/software/start/">Get Started</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://www.openstack.org/software/roadmap/">Roadmap</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://www.openstack.org/software/latest-release/">Latest Release</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://www.openstack.org/software/sourcecode/">Source Code</a></li>
          </ul>
        </li>
        <li>
          <a href="http://www.openstack.org/user-stories/" class="drop" id="dropdownMenuUsers">Users <i class="fa fa-caret-down"></i></a>
          <ul class="dropdown-menu" role="menu" aria-labelledby="dropdownMenuUsers">
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://www.openstack.org/user-stories/">Overview</a></li>
            <li role="presentation" class="divider"></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="https://www.openstack.org/telecoms-and-nfv/">Telecoms and NFV</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://www.openstack.org/enterprise/">OpenStack in the Enterprise</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://www.openstack.org/appdev/">Application Developers & ISVs</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://superuser.openstack.org/">Superuser Magazine</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://www.openstack.org/surveys/landing">User Survey</a></li>
          </ul>
        </li>
        <li>
          <a href="http://www.openstack.org/community/" class="drop" id="dropdownMenuCommunity">Community <i class="fa fa-caret-down"></i></a>
          <ul class="dropdown-menu" role="menu" aria-labelledby="dropdownMenuCommunity">
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://www.openstack.org/community/">Welcome! Start Here</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://www.openstack.org/foundation/">OpenStack Foundation</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://wiki.openstack.org">OpenStack Wiki</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://groups.openstack.org">User Groups</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://www.openstack.org/community/speakers/">Speakers Bureau</a></li>
            <li role="presentation" class="divider"></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://www.openstack.org/foundation/companies/">Supporting Companies</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://www.openstack.org/community/jobs/">Jobs</a></li>
            <li role="presentation" class="divider"></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://www.openstack.org/join/">Join The Community</a></li>
          </ul>
        </li>
        <li>
          <a href="http://www.openstack.org/marketplace/">Marketplace</a>
        </li>
        <li>
          <a href="http://www.openstack.org/events/" class="drop" id="dropdownMenuEvents">Events <i class="fa fa-caret-down"></i></a>
          <ul class="dropdown-menu" role="menu" aria-labelledby="dropdownMenuEvents">
            <li role="presentation"><a role="menuitem" tabindex="-1" href="https://www.openstack.org/community/events/">Overview</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="https://www.openstack.org/summit/">The OpenStack Summit</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="https://www.openstack.org/community/events/">More OpenStack Events</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://www.openstack.org/community/events/#openstack_days">OpenStack Days</a></li>
          </ul>
        </li>
        <li>
          <a href="http://www.openstack.org/learn/" class="drop" id="dropdownMenuLearn">Learn <i class="fa fa-caret-down"></i></a>
          <ul class="dropdown-menu dropdown-hover" role="menu" aria-labelledby="dropdownMenuEvents">
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://www.openstack.org/marketplace/training/">Training</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="https://www.openstack.org/marketplace/coa/">Get Certified</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="https://ask.openstack.org/">Ask a Technical Question</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="https://superuser.openstack.org/">Superuser Magazine</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="https://www.openstack.org/videos/">Summit Videos</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="https://www.openstack.org/analysts/">Analyst Reports</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://www.openstack.org/news/">News</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://www.openstack.org/blog/">Blog</a></li>
          </ul>
        </li>
        <li>
          <a href="http://docs.openstack.org/">Docs</a>
        </li>
      </ul>
    </div>
  </div>
</nav>
    <div class="container docs-book-wrapper">
      <div class="row">
        <div class="col-lg-9 col-md-8 col-sm-8 col-lg-push-3 col-md-push-4 col-sm-push-4">
<div class="row">
  <div class="col-lg-8">
      <h2>Large objects</h2>
    
  </div>
  <div class="docs-actions">
    
    <a href="cli-swift-discoverability.html"><i class="fa fa-angle-double-left" data-toggle="tooltip" data-placement="top" title="Previous: Discoverability"></i></a>
    
    
    <a href="cli-swift-archive-auto-extract.html"><i class="fa fa-angle-double-right" data-toggle="tooltip" data-placement="top" title="Next: Auto-extract archive files"></i></a>
    
    <a id="logABugLink1" href="cli-swift-large-object-creation.html" target="_blank" title="Found an error? Report a bug against this page"><i class="fa fa-bug" data-toggle="tooltip" data-placement="top" title="Report a Bug"></i></a>
  </div>
</div>
          <div class="row docs-byline">
            <div class="docs-updated">updated: 2018-02-08 07:37</div>
          </div>
          <div class="row">
            <div class="col-lg-12">
              <div class="docs-top-contents">

<h5><a href="index.html">Contents</a></h5>
<ul>
<li><a class="reference internal" href="cli-swift-large-object-creation.html#">Large objects</a><ul>
<li><a class="reference internal" href="cli-swift-large-object-creation.html#static-large-objects">Static large objects</a><ul>
<li><a class="reference internal" href="cli-swift-large-object-creation.html#static-large-object-manifest-list">Static large object manifest list</a></li>
</ul>
</li>
<li><a class="reference internal" href="cli-swift-large-object-creation.html#dynamic-large-objects">Dynamic large objects</a><ul>
<li><a class="reference internal" href="cli-swift-large-object-creation.html#upload-segment-of-large-object-request-http">Upload segment of large object request: HTTP</a></li>
<li><a class="reference internal" href="cli-swift-large-object-creation.html#upload-next-segment-of-large-object-request-http">Upload next segment of large object request: HTTP</a></li>
<li><a class="reference internal" href="cli-swift-large-object-creation.html#upload-manifest-request-http">Upload manifest request: HTTP</a></li>
<li><a class="reference internal" href="cli-swift-large-object-creation.html#upload-manifest-response-http">Upload manifest response: HTTP</a></li>
</ul>
</li>
<li><a class="reference internal" href="cli-swift-large-object-creation.html#extra-transaction-information">Extra transaction information</a></li>
<li><a class="reference internal" href="cli-swift-large-object-creation.html#comparison-of-static-and-dynamic-large-objects">Comparison of static and dynamic large objects</a></li>
<li><a class="reference internal" href="cli-swift-large-object-creation.html#upload-large-objects-with-python-swiftclient">Upload large objects with python-swiftclient</a></li>
</ul>
</li>
</ul>

              </div>
              <div class="docs-body">

  <div class="section" id="large-objects">
<span id="large-object-creation"></span><h1>Large objects<a class="headerlink" href="cli-swift-large-object-creation.html#large-objects" title="Permalink to this headline">¶</a></h1>
<p>To discover whether your Object Storage system supports this feature, see
<a class="reference internal" href="cli-swift-discoverability.html#discoverability"><span class="std std-ref">Discoverability</span></a> or check with your service provider.</p>
<p>By default, the content of an object cannot be greater than 5 GB.
However, you can use a number of smaller objects to construct a large
object. The large object is comprised of two types of objects:</p>
<ul>
<li><p class="first"><code class="docutils literal"><span class="pre">Segment</span> <span class="pre">objects</span></code> store the object content. You can divide your content
into segments and upload each segment into its own segment object. Segment
objects do not have any special features. You create, update, download, and
delete segment objects just as you do with normal objects.</p>
</li>
<li><p class="first">A <code class="docutils literal"><span class="pre">manifest</span> <span class="pre">object</span></code> links the segment objects into one logical large
object. When you download a manifest object, Object Storage concatenates and
returns the contents of the segment objects in the response body. This
behavior extends to the response headers returned by <code class="docutils literal"><span class="pre">GET</span></code> and <code class="docutils literal"><span class="pre">HEAD</span></code>
requests. The <code class="docutils literal"><span class="pre">Content-Length</span></code> response header contains the total size of
all segment objects.</p>
<p>Object Storage takes the <code class="docutils literal"><span class="pre">ETag</span></code> value of each segment, concatenates them
together, and returns the MD5 checksum of the result to calculate the
<code class="docutils literal"><span class="pre">ETag</span></code> response header value. The manifest object types are:</p>
<dl class="docutils">
<dt>Static large objects</dt>
<dd><p class="first last">The manifest object content is an ordered list of the names of
the segment objects in JSON format. See <a class="reference internal" href="cli-swift-large-object-creation.html#static-large-objects"><span class="std std-ref">Static large objects</span></a>.</p>
</dd>
<dt>Dynamic large objects</dt>
<dd><p class="first last">The manifest object has no content but it has a
<code class="docutils literal"><span class="pre">X-Object-Manifest</span></code> metadata header. The value of this header
is <code class="docutils literal"><span class="pre">CONTAINER/PREFIX</span></code>, where <code class="docutils literal"><span class="pre">CONTAINER</span></code> is the name of
the container where the segment objects are stored, and
<code class="docutils literal"><span class="pre">PREFIX</span></code> is a string that all segment objects have in common.
See <a class="reference internal" href="cli-swift-large-object-creation.html#dynamic-large-objects"><span class="std std-ref">Dynamic large objects</span></a>.</p>
</dd>
</dl>
</li>
</ul>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">If you use a manifest object as the source of a <code class="docutils literal"><span class="pre">COPY</span></code> request, the
new object is a normal, and not a segment, object. If the total size of the
source segment objects exceeds 5 GB, the <code class="docutils literal"><span class="pre">COPY</span></code> request fails. However,
you can make a duplicate of the manifest object and this new object can be
larger than 5 GB.</p>
</div>
<div class="section" id="static-large-objects">
<span id="id1"></span><h2>Static large objects<a class="headerlink" href="cli-swift-large-object-creation.html#static-large-objects" title="Permalink to this headline">¶</a></h2>
<p>To create a static large object, divide your content into pieces and create
(upload) a segment object to contain each piece.</p>
<p>You must record the <code class="docutils literal"><span class="pre">ETag</span></code> response header value that the <code class="docutils literal"><span class="pre">PUT</span></code> operation
returns. Alternatively, you can calculate the MD5 checksum of the segment
before you perform the upload and include this value in the <code class="docutils literal"><span class="pre">ETag</span></code> request
header. This action ensures that the upload cannot corrupt your data.</p>
<p>List the name of each segment object along with its size and MD5
checksum in order.</p>
<p>Create a manifest object. Include the <code class="docutils literal"><span class="pre">?multipart-manifest=put</span></code>
query string at the end of the manifest object name to indicate that
this is a manifest object.</p>
<p>The body of the <code class="docutils literal"><span class="pre">PUT</span></code> request on the manifest object comprises a JSON
list where each element contains these attributes:</p>
<dl class="docutils">
<dt>path</dt>
<dd>The container and object name in the format:
<code class="docutils literal"><span class="pre">CONTAINER_NAME/OBJECT_NAME</span></code>.</dd>
<dt>etag</dt>
<dd>The MD5 checksum of the content of the segment object. This value
must match the <code class="docutils literal"><span class="pre">ETag</span></code> of that object.</dd>
<dt>size_bytes</dt>
<dd>The size of the segment object. This value must match the
<code class="docutils literal"><span class="pre">Content-Length</span></code> of that object.</dd>
</dl>
<div class="section" id="static-large-object-manifest-list">
<h3>Static large object manifest list<a class="headerlink" href="cli-swift-large-object-creation.html#static-large-object-manifest-list" title="Permalink to this headline">¶</a></h3>
<p>This example shows three segment objects. You can use several containers
and the object names do not have to conform to a specific pattern, in
contrast to dynamic large objects.</p>
<div class="highlight-json"><div class="highlight"><pre><span></span><span class="p">[</span>
    <span class="p">{</span>
        <span class="nt">&quot;path&quot;</span><span class="p">:</span> <span class="s2">&quot;mycontainer/objseg1&quot;</span><span class="p">,</span>
        <span class="nt">&quot;etag&quot;</span><span class="p">:</span> <span class="s2">&quot;0228c7926b8b642dfb29554cd1f00963&quot;</span><span class="p">,</span>
        <span class="nt">&quot;size_bytes&quot;</span><span class="p">:</span> <span class="mi">1468006</span>
    <span class="p">},</span>
    <span class="p">{</span>
        <span class="nt">&quot;path&quot;</span><span class="p">:</span> <span class="s2">&quot;mycontainer/pseudodir/seg-obj2&quot;</span><span class="p">,</span>
        <span class="nt">&quot;etag&quot;</span><span class="p">:</span> <span class="s2">&quot;5bfc9ea51a00b790717eeb934fb77b9b&quot;</span><span class="p">,</span>
        <span class="nt">&quot;size_bytes&quot;</span><span class="p">:</span> <span class="mi">1572864</span>
    <span class="p">},</span>
    <span class="p">{</span>
        <span class="nt">&quot;path&quot;</span><span class="p">:</span> <span class="s2">&quot;other-container/seg-final&quot;</span><span class="p">,</span>
        <span class="nt">&quot;etag&quot;</span><span class="p">:</span> <span class="s2">&quot;b9c3da507d2557c1ddc51f27c54bae51&quot;</span><span class="p">,</span>
        <span class="nt">&quot;size_bytes&quot;</span><span class="p">:</span> <span class="mi">256</span>
    <span class="p">}</span>
<span class="p">]</span>
</pre></div>
</div>
<div class="line-block">
<div class="line"><br /></div>
</div>
<p>The <code class="docutils literal"><span class="pre">Content-Length</span></code> request header must contain the length of the
JSON content and not the length of the segment objects. However, after the
<code class="docutils literal"><span class="pre">PUT</span></code> operation completes, the <code class="docutils literal"><span class="pre">Content-Length</span></code> metadata is set to
the total length of all the object segments. A similar situation applies
to the <code class="docutils literal"><span class="pre">ETag</span></code>. If used in the <code class="docutils literal"><span class="pre">PUT</span></code> operation, it must contain the
MD5 checksum of the JSON content. The <code class="docutils literal"><span class="pre">ETag</span></code> metadata value is then
set to be the MD5 checksum of the concatenated <code class="docutils literal"><span class="pre">ETag</span></code> values of the
object segments. You can also set the <code class="docutils literal"><span class="pre">Content-Type</span></code> request header
and custom object metadata.</p>
<p>When the <code class="docutils literal"><span class="pre">PUT</span></code> operation sees the <code class="docutils literal"><span class="pre">?multipart-manifest=put</span></code> query
parameter, it reads the request body and verifies that each segment
object exists and that the sizes and ETags match. If there is a
mismatch, the <code class="docutils literal"><span class="pre">PUT</span></code> operation fails.</p>
<p>If everything matches, the API creates the manifest object and sets the
<code class="docutils literal"><span class="pre">X-Static-Large-Object</span></code> metadata to <code class="docutils literal"><span class="pre">true</span></code> to indicate that the manifest is
a static object manifest.</p>
<p>Normally when you perform a <code class="docutils literal"><span class="pre">GET</span></code> operation on the manifest object, the
response body contains the concatenated content of the segment objects. To
download the manifest list, use the <code class="docutils literal"><span class="pre">?multipart-manifest=get</span></code> query
parameter. The list in the response is not formatted the same as the manifest
that you originally used in the <code class="docutils literal"><span class="pre">PUT</span></code> operation.</p>
<p>If you use the <code class="docutils literal"><span class="pre">DELETE</span></code> operation on a manifest object, the manifest
object is deleted. The segment objects are not affected. However, if you
add the <code class="docutils literal"><span class="pre">?multipart-manifest=delete</span></code> query parameter, the segment
objects are deleted and if all are successfully deleted, the manifest
object is also deleted.</p>
<p>To change the manifest, use a <code class="docutils literal"><span class="pre">PUT</span></code> operation with the
<code class="docutils literal"><span class="pre">?multipart-manifest=put</span></code> query parameter. This request creates a
manifest object. You can also update the object metadata in the usual
way.</p>
</div>
</div>
<div class="section" id="dynamic-large-objects">
<span id="id2"></span><h2>Dynamic large objects<a class="headerlink" href="cli-swift-large-object-creation.html#dynamic-large-objects" title="Permalink to this headline">¶</a></h2>
<p>Before you can upload objects that are larger than 5 GB, you must segment
them. You upload the segment objects like you do with any other object and
create a dynamic large manifest object. The manifest object tells Object
Storage how to find the segment objects that comprise the large object. You
can still access each segment individually, but when you retrieve the manifest
object, the API concatenates the segments. You can include any number of
segments in a single large object.</p>
<p>To ensure the download works correctly, you must upload all the object
segments to the same container and prefix each object name so that the
segments sort in correct concatenation order.</p>
<p>You also create and upload a manifest file. The manifest file is a zero-byte
file with the extra <code class="docutils literal"><span class="pre">X-Object-Manifest</span></code> <code class="docutils literal"><span class="pre">CONTAINER/PREFIX</span></code> header. The
<code class="docutils literal"><span class="pre">CONTAINER</span></code> is the container the object segments are in and <code class="docutils literal"><span class="pre">PREFIX</span></code> is
the common prefix for all the segments. You must UTF-8-encode and then
URL-encode the container and common prefix in the <code class="docutils literal"><span class="pre">X-Object-Manifest</span></code> header.</p>
<p>It is best to upload all the segments first and then create or update
the manifest. With this method, the full object is not available for
downloading until the upload is complete. Also, you can upload a new set
of segments to a second location and update the manifest to point to
this new location. During the upload of the new segments, the original
manifest is still available to download the first set of segments.</p>
<div class="section" id="upload-segment-of-large-object-request-http">
<h3>Upload segment of large object request: HTTP<a class="headerlink" href="cli-swift-large-object-creation.html#upload-segment-of-large-object-request-http" title="Permalink to this headline">¶</a></h3>
<div class="highlight-console"><div class="highlight"><pre><span></span><span class="go">PUT /API_VERSION/ACCOUNT/CONTAINER/OBJECT HTTP/1.1</span>
<span class="go">Host: storage.example.com</span>
<span class="go">X-Auth-Token: eaaafd18-0fed-4b3a-81b4-663c99ec1cbb</span>
<span class="go">ETag: 8a964ee2a5e88be344f36c22562a6486</span>
<span class="go">Content-Length: 1</span>
<span class="go">X-Object-Meta-PIN: 1234</span>
</pre></div>
</div>
<p>No response body is returned.</p>
<p>The 2``nn`` response code indicates a successful write. <code class="docutils literal"><span class="pre">nn</span></code> is a value from
00 to 99.</p>
<p>The <code class="docutils literal"><span class="pre">Length</span> <span class="pre">Required</span> <span class="pre">(411)</span></code> response code indicates that the request does
not include a required <code class="docutils literal"><span class="pre">Content-Length</span></code> or <code class="docutils literal"><span class="pre">Content-Type</span></code> header.</p>
<p>The <code class="docutils literal"><span class="pre">Unprocessable</span> <span class="pre">Entity</span> <span class="pre">(422)</span></code> response code indicates that the MD5
checksum of the data written to the storage system does NOT match the optional
ETag value.</p>
<p>You can continue to upload segments, like this example shows, before you
upload the manifest.</p>
</div>
<div class="section" id="upload-next-segment-of-large-object-request-http">
<h3>Upload next segment of large object request: HTTP<a class="headerlink" href="cli-swift-large-object-creation.html#upload-next-segment-of-large-object-request-http" title="Permalink to this headline">¶</a></h3>
<div class="highlight-console"><div class="highlight"><pre><span></span><span class="go">PUT /API_VERSION/ACCOUNT/CONTAINER/OBJECT HTTP/1.1</span>
<span class="go">Host: storage.example.com</span>
<span class="go">X-Auth-Token: eaaafd18-0fed-4b3a-81b4-663c99ec1cbb</span>
<span class="go">ETag: 8a964ee2a5e88be344f36c22562a6486</span>
<span class="go">Content-Length: 1</span>
<span class="go">X-Object-Meta-PIN: 1234</span>
</pre></div>
</div>
<p>Next, upload the manifest. This manifest specifies the container where the
object segments reside. Note that if you upload additional segments after you
create the manifest, the concatenated object becomes that much larger but you
do not need to recreate the manifest file for subsequent additional segments.</p>
</div>
<div class="section" id="upload-manifest-request-http">
<h3>Upload manifest request: HTTP<a class="headerlink" href="cli-swift-large-object-creation.html#upload-manifest-request-http" title="Permalink to this headline">¶</a></h3>
<div class="highlight-console"><div class="highlight"><pre><span></span><span class="go">PUT /API_VERSION/ACCOUNT/CONTAINER/OBJECT HTTP/1.1</span>
<span class="go">Host: storage.clouddrive.com</span>
<span class="go">X-Auth-Token: eaaafd18-0fed-4b3a-81b4-663c99ec1cbb</span>
<span class="go">Content-Length: 0</span>
<span class="go">X-Object-Meta-PIN: 1234</span>
<span class="go">X-Object-Manifest: CONTAINER/PREFIX</span>
</pre></div>
</div>
</div>
<div class="section" id="upload-manifest-response-http">
<h3>Upload manifest response: HTTP<a class="headerlink" href="cli-swift-large-object-creation.html#upload-manifest-response-http" title="Permalink to this headline">¶</a></h3>
<div class="highlight-console"><div class="highlight"><pre><span></span><span class="go">[...]</span>
</pre></div>
</div>
<p>A <code class="docutils literal"><span class="pre">GET</span></code> or <code class="docutils literal"><span class="pre">HEAD</span></code> request on the manifest returns a <code class="docutils literal"><span class="pre">Content-Type</span></code>
response header value that is the same as the <code class="docutils literal"><span class="pre">Content-Type</span></code> request header
value in the <code class="docutils literal"><span class="pre">PUT</span></code> request that created the manifest. To change the
<code class="docutils literal"><span class="pre">Content-</span> <span class="pre">Type</span></code>, reissue the <code class="docutils literal"><span class="pre">PUT</span></code> request.</p>
</div>
</div>
<div class="section" id="extra-transaction-information">
<h2>Extra transaction information<a class="headerlink" href="cli-swift-large-object-creation.html#extra-transaction-information" title="Permalink to this headline">¶</a></h2>
<p>You can use the <code class="docutils literal"><span class="pre">X-Trans-Id-Extra</span></code> request header to include extra
information to help you debug any errors that might occur with large object
upload and other Object Storage transactions.</p>
<p>The Object Storage API appends the first 32 characters of the
<code class="docutils literal"><span class="pre">X-Trans-Id-Extra</span></code> request header value to the transaction ID value in the
generated <code class="docutils literal"><span class="pre">X-Trans-Id</span></code> response header. You must UTF-8-encode and then
URL-encode the extra transaction information before you include it in
the <code class="docutils literal"><span class="pre">X-Trans-Id-Extra</span></code> request header.</p>
<p>For example, you can include extra transaction information when you upload
large objects such as images.</p>
<p>When you upload each segment and the manifest, include the same value in the
<code class="docutils literal"><span class="pre">X-Trans-Id-Extra</span></code> request header. If an error occurs, you can find all
requests that are related to the large object upload in the Object Storage
logs.</p>
<p>You can also use <code class="docutils literal"><span class="pre">X-Trans-Id-Extra</span></code> strings to help operators debug requests
that fail to receive responses. The operator can search for the extra
information in the logs.</p>
</div>
<div class="section" id="comparison-of-static-and-dynamic-large-objects">
<h2>Comparison of static and dynamic large objects<a class="headerlink" href="cli-swift-large-object-creation.html#comparison-of-static-and-dynamic-large-objects" title="Permalink to this headline">¶</a></h2>
<p>While static and dynamic objects have similar behavior, this table describes
their differences:</p>
<table border="1" class="colwidths-given docutils">
<colgroup>
<col width="29%" />
<col width="36%" />
<col width="36%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head stub">Description</th>
<th class="head">Static large object</th>
<th class="head">Dynamic large object</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><th class="stub">End-to-end integrity</th>
<td>Assured. The list of segments includes the MD5 checksum
(<code class="docutils literal"><span class="pre">ETag</span></code>) of each segment. You cannot upload the manifest
object if the <code class="docutils literal"><span class="pre">ETag</span></code> in the list differs from the uploaded
segment object. If a segment is somehow lost, an attempt to
download the manifest object results in an error.</td>
<td>Not guaranteed. The eventual consistency model means that
although you have uploaded a segment object, it might not
appear in the container listing until later. If you download
the manifest before it appears in the container, it does not
form part of the content returned in response to a <code class="docutils literal"><span class="pre">GET</span></code>
request.</td>
</tr>
<tr class="row-odd"><th class="stub">Upload order</th>
<td>You must upload the segment objects before upload the manifest
object.</td>
<td>You can upload manifest and segment objects in any order. You
are recommended to upload the manifest object after the
segments in case a premature download of the manifest occurs.
However, this is not enforced.</td>
</tr>
<tr class="row-even"><th class="stub">Removal or addition of segment objects</th>
<td>You cannot add or remove segment objects from the manifest.
However, you can create a completely new manifest object of the
same name with a different manifest list.</td>
<td>You can upload new segment objects or remove existing segments.
The names must simply match the <code class="docutils literal"><span class="pre">PREFIX</span></code> supplied in
<code class="docutils literal"><span class="pre">X-Object-Manifest</span></code>.</td>
</tr>
<tr class="row-odd"><th class="stub">Segment object size and number</th>
<td>Segment objects must be at least 1 MB in size (by default). The
final segment object can be any size. At most, 1000 segments
are supported (by default).</td>
<td>Segment objects can be any size.</td>
</tr>
<tr class="row-even"><th class="stub">Segment object container name</th>
<td>The manifest list includes the container name of each object.
Segment objects can be in different containers.</td>
<td>All segment objects must be in the same container.</td>
</tr>
<tr class="row-odd"><th class="stub">Manifest object metadata</th>
<td>The object has <code class="docutils literal"><span class="pre">X-Static-Large-Object</span></code> set to <code class="docutils literal"><span class="pre">true</span></code>. You
do not set this metadata directly. Instead the system sets it
when you <code class="docutils literal"><span class="pre">PUT</span></code> a static manifest object.</td>
<td>The <code class="docutils literal"><span class="pre">X-Object-Manifest</span></code> value is the <code class="docutils literal"><span class="pre">CONTAINER/PREFIX</span></code>,
which indicates where the segment objects are located. You
supply this request header in the <code class="docutils literal"><span class="pre">PUT</span></code> operation.</td>
</tr>
<tr class="row-even"><th class="stub">Copying the manifest object</th>
<td>Include the <code class="docutils literal"><span class="pre">?multipart-manifest=get</span></code> query string in the
<code class="docutils literal"><span class="pre">COPY</span></code> request. The new object contains the same manifest as
the original. The segment objects are not copied. Instead, both
the original and new manifest objects share the same set of
segment objects.</td>
<td>The <code class="docutils literal"><span class="pre">COPY</span></code> operation does not create a manifest object. To
duplicate a manifest object, use the <code class="docutils literal"><span class="pre">GET</span></code> operation to read
the value of <code class="docutils literal"><span class="pre">X-Object-Manifest</span></code> and use this value in the
<code class="docutils literal"><span class="pre">X-Object-Manifest</span></code> request header in a <code class="docutils literal"><span class="pre">PUT</span></code> operation.
This creates a new manifest object that shares the same set of
segment objects as the original manifest object.</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="upload-large-objects-with-python-swiftclient">
<h2>Upload large objects with python-swiftclient<a class="headerlink" href="cli-swift-large-object-creation.html#upload-large-objects-with-python-swiftclient" title="Permalink to this headline">¶</a></h2>
<p>You can use <code class="docutils literal"><span class="pre">python-swiftclient</span></code> to easily upload large objects.</p>
<ul>
<li><p class="first">Upload a large file by specifying the segment size with the
<code class="docutils literal"><span class="pre">--segment-size</span></code> or <code class="docutils literal"><span class="pre">-S</span></code> arguments:</p>
<div class="highlight-console"><div class="highlight"><pre><span></span><span class="gp">$</span> swift upload CONTAINER OBJECT_FILENAME --segment-size &lt;bytes&gt;
</pre></div>
</div>
<p>This will automatically break the file into the desired segment size
and upload segments to a container named <code class="docutils literal"><span class="pre">&lt;container&gt;_segments</span></code>.</p>
</li>
<li><p class="first">After upload has completed, you can download the large object as a
single file:</p>
<div class="highlight-console"><div class="highlight"><pre><span></span><span class="gp">$</span> swift download CONTAINER OBJECT_FILENAME
</pre></div>
</div>
</li>
<li><p class="first">Additional large object arguments can be found by using <code class="docutils literal"><span class="pre">--help</span></code>:</p>
<div class="highlight-console"><div class="highlight"><pre><span></span><span class="gp">$</span> swift upload --help
</pre></div>
</div>
</li>
</ul>
</div>
</div>


              </div>
            </div>
          </div>
          <div class="docs-actions">
          
            <a href="cli-swift-discoverability.html"><i class="fa fa-angle-double-left" data-toggle="tooltip" data-placement="top" title="Previous: Discoverability"></i></a>
          
          
            <a href="cli-swift-archive-auto-extract.html"><i class="fa fa-angle-double-right" data-toggle="tooltip" data-placement="top" title="Next: Auto-extract archive files"></i></a>
          
            <a id="logABugLink3" href="cli-swift-large-object-creation.html" target="_blank" title="Found an error? Report a bug against this page"><i class="fa fa-bug" data-toggle="tooltip" data-placement="top" title="Report a Bug"></i></a>
          </div>
          <div class="row docs-byline bottom">
            <div class="docs-updated">updated: 2018-02-08 07:37</div>
          </div>
          <div class="row">
            <div class="col-lg-8 col-md-8 col-sm-8 docs-license">
<a href="https://creativecommons.org/licenses/by/3.0/">
 <img src="_static/images/docs/license.png" alt="Creative Commons Attribution 3.0 License"/>
</a>
<p>
 Except where otherwise noted, this document is licensed under
 <a href="https://creativecommons.org/licenses/by/3.0/">Creative Commons
 Attribution 3.0 License</a>. See all <a href="http://www.openstack.org/legal">
 OpenStack Legal Documents</a>.
</p>
            </div>
            <div class="col-lg-4 col-md-4 col-sm-4 docs-actions-wrapper">
            <!-- ID buglinkbottom added so that pre-filled doc bugs
                 are sent to Launchpad projects related to the document -->
              <a href="cli-swift-large-object-creation.html#" id="logABugLink2" class="docs-footer-actions"><i class="fa fa-bug"></i> found an error? report a bug</a>
              <a href="http://ask.openstack.org" class="docs-footer-actions"><i class="fa fa-question-circle"></i> questions?</a>
            </div>
          </div>
        </div>
<div class="col-lg-3 col-md-4 col-sm-4 col-lg-pull-9 col-md-pull-8 col-sm-pull-8 docs-sidebar">
  <div class="btn-group docs-sidebar-releases">
    <button onclick="location.href='/'" class="btn docs-sidebar-home" data-toggle="tooltip" data-placement="top" title="Docs Home"><i class="fa fa-arrow-circle-o-left"></i></button>
<button href="#" type="button" data-toggle="dropdown" class="btn docs-sidebar-release-select">OpenStack Documentation<i class="fa fa-caret-down"></i></button>
    <ul class="dropdown-menu docs-sidebar-dropdown" role="menu" aria-labelledby="dLabel">
      <li role="presentation" class="dropdown-header">Guides</li>
      <li role="presentation"><a role="menuitem" tabindex="-1" href="http://docs.openstack.org/index.html#install-guides">Install Guides</a></li>
      <li role="presentation"><a role="menuitem" tabindex="-1" href="http://docs.openstack.org/index.html#user-guides">User Guides</a></li>
      <li role="presentation"><a role="menuitem" tabindex="-1" href="http://docs.openstack.org/index.html#configuration-guides">Configuration Guides</a></li>
      <li role="presentation"><a role="menuitem" tabindex="-1" href="http://docs.openstack.org/index.html#ops-and-admin-guides">Operations and Administration Guides</a></li>
      <li role="presentation"><a role="menuitem" tabindex="-1" href="http://docs.openstack.org/index.html#api-guides">API Guides</a></li>
      <li role="presentation"><a role="menuitem" tabindex="-1" href="http://docs.openstack.org/index.html#contributor-guides">Contributor Guides</a></li>
      <li role="presentation" class="dropdown-header">Languages</li>
      <li role="presentation"><a role="menuitem" tabindex="-1" href="http://docs.openstack.org/ja/">日本語 (Japanese)</a></li>
      <li role="presentation"><a role="menuitem" tabindex="-1" href="http://docs.openstack.org/de/">Deutsch (German)</a></li>
      <li role="presentation"><a role="menuitem" tabindex="-1" href="http://docs.openstack.org/fr/">Français (French)</a></li>
      <li role="presentation"><a role="menuitem" tabindex="-1" href="http://docs.openstack.org/pt_BR/">Português (Portuguese)</a></li>
      <li role="presentation"><a role="menuitem" tabindex="-1" href="http://docs.openstack.org/zh_CN/">简体中文 (Simplified Chinese)</a></li>
      <li role="presentation"><a role="menuitem" tabindex="-1" href="http://docs.openstack.org/ko_KR/">한국어 (Korean)</a></li>
    </ul>
  </div>
  <div class="docs-sidebar-toc">
    <div class="docs-sidebar-section" id="table-of-contents">
      <a href="index.html" class="docs-sidebar-section-title"><h4>Contents</h4></a>
      <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="common/conventions.html">Conventions</a></li>
<li class="toctree-l1"><a class="reference internal" href="intro-user.html">How can I use an OpenStack cloud?</a></li>
<li class="toctree-l1"><a class="reference internal" href="dashboard.html">OpenStack dashboard</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="cli.html">OpenStack command-line clients</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="common/cli-overview.html">Command-line client overview</a></li>
<li class="toctree-l2"><a class="reference internal" href="common/cli-install-openstack-command-line-clients.html">Install the OpenStack command-line clients</a></li>
<li class="toctree-l2"><a class="reference internal" href="common/cli-discover-version-number-for-a-client.html">Discover the version number for a client</a></li>
<li class="toctree-l2"><a class="reference internal" href="common/cli-set-environment-variables-using-openstack-rc.html">Set environment variables using the OpenStack RC file</a></li>
<li class="toctree-l2"><a class="reference internal" href="common/cli-manage-images.html">Manage images</a></li>
<li class="toctree-l2"><a class="reference internal" href="cli-manage-images-curl.html">Manage images using cURL</a></li>
<li class="toctree-l2"><a class="reference internal" href="common/cli-manage-volumes.html">Manage volumes</a></li>
<li class="toctree-l2"><a class="reference internal" href="cli-manage-shares.html">Manage shares</a></li>
<li class="toctree-l2"><a class="reference internal" href="cli-nova-configure-access-security-for-instances.html">Configure access and security for instances</a></li>
<li class="toctree-l2"><a class="reference internal" href="cli-launch-instances.html">Launch instances</a></li>
<li class="toctree-l2"><a class="reference internal" href="cli-manage-instances-hosts.html">Manage instances and hosts</a></li>
<li class="toctree-l2"><a class="reference internal" href="cli-provide-user-data-to-instances.html">Provide user data to instances</a></li>
<li class="toctree-l2"><a class="reference internal" href="cli-use-snapshots-to-migrate-instances.html">Use snapshots to migrate instances</a></li>
<li class="toctree-l2"><a class="reference internal" href="cli-config-drive.html">Store metadata on a configuration drive</a></li>
<li class="toctree-l2"><a class="reference internal" href="cli-create-and-manage-networks.html">Create and manage networks</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="managing-openstack-object-storage-with-swift-cli.html">Manage objects and containers</a></li>
<li class="toctree-l2"><a class="reference internal" href="cli-create-and-manage-stacks.html">Create and manage stacks</a></li>
<li class="toctree-l2"><a class="reference internal" href="cli-ceilometer.html">Measure cloud resources</a></li>
<li class="toctree-l2"><a class="reference internal" href="trove-manage-db.html">Create and manage databases</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="sdk.html">OpenStack Python SDK</a></li>
<li class="toctree-l1"><a class="reference internal" href="hot.html">HOT Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="cli-cheat-sheet.html">OpenStack command-line interface cheat sheet</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="common/app-support.html">Community support</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="common/glossary.html">Glossary</a></li>
</ul>

    </div>
  </div>
</div>
      </div>
    </div>
<footer>
  <div class="container">
    <div class="row footer-links">
      <div class="col-lg-2 col-sm-2">
        <h3>OpenStack</h3>
        <ul>
          <li><a href="http://openstack.org/projects/">Projects</a></li>
          <li><a href="http://openstack.org/projects/openstack-security/">OpenStack Security</a></li>
          <li><a href="http://openstack.org/projects/openstack-faq/">Common Questions</a></li>
          <li><a href="http://openstack.org/blog/">Blog</a></li>
          <li><a href="http://openstack.org/news/">News</a></li>
        </ul>
      </div>
      <div class="col-lg-2 col-sm-2">
        <h3>Community</h3>
        <ul>
          <li><a href="http://openstack.org/community/">User Groups</a></li>
          <li><a href="http://openstack.org/community/events/">Events</a></li>
          <li><a href="http://openstack.org/community/jobs/">Jobs</a></li>
          <li><a href="http://openstack.org/foundation/companies/">Companies</a></li>
          <li><a href="http://docs.openstack.org/infra/manual/developers.html">Contribute</a></li>
        </ul>
      </div>
      <div class="col-lg-2 col-sm-2">
        <h3>Documentation</h3>
        <ul>
          <li><a href="http://docs.openstack.org">OpenStack Manuals</a></li>
          <li><a href="http://openstack.org/software/start/">Getting Started</a></li>
          <li><a href="http://developer.openstack.org">API Documentation</a></li>
          <li><a href="https://wiki.openstack.org">Wiki</a></li>
        </ul>
      </div>
      <div class="col-lg-2 col-sm-2">
        <h3>Branding & Legal</h3>
        <ul>
          <li><a href="http://openstack.org/brand/">Logos & Guidelines</a></li>
          <li><a href="http://openstack.org/brand/openstack-trademark-policy/">Trademark Policy</a></li>
          <li><a href="http://openstack.org/privacy/">Privacy Policy</a></li>
          <li><a href="https://wiki.openstack.org/wiki/How_To_Contribute#Contributor_License_Agreement">OpenStack CLA</a></li>
        </ul>
      </div>
      <div class="col-lg-4 col-sm-4">
        <h3>Stay In Touch</h3>
        <a href="https://twitter.com/OpenStack" target="_blank" class="social-icons footer-twitter"></a>
        <a href="https://www.facebook.com/openstack" target="_blank" class="social-icons footer-facebook"></a>
        <a href="https://www.linkedin.com/company/openstack" target="_blank" class="social-icons footer-linkedin"></a>
        <a href="https://www.youtube.com/user/OpenStackFoundation" target="_blank" class="social-icons footer-youtube"></a>
        <p class="fine-print">
          The OpenStack project is provided under the
          <a href="http://www.apache.org/licenses/LICENSE-2.0">Apache 2.0 license</a>. Openstack.org is powered by
          <a href="http://rackspace.com" target="_blank">Rackspace Cloud Computing</a>.
        </p>
      </div>
    </div>
  </div>
</footer>
<!-- jQuery -->
<script type="text/javascript" src="_static/js/jquery-3.1.1.js"></script>

<!-- Bootstrap JavaScript -->
<script type="text/javascript" src="_static/js/bootstrap.js"></script>

<!-- The rest of the JS -->
<script type="text/javascript" src="_static/js/navigation.js"></script>

<!-- Docs JS -->
<script type="text/javascript" src="_static/js/docs.js"></script>

<!-- Popovers -->
<script type="text/javascript" src="_static/js/webui-popover.js"></script>

<!-- Javascript for page -->
<script language="JavaScript">
/* build a description of this page including SHA, source location on git repo,
   build time and the project's launchpad bug tag. Set the HREF of the bug
   buttons */

    var lineFeed = "%0A";
    var gitURL = "Source: Can't derive source file URL";

    /* there have been cases where "pagename" wasn't set; better check for it */
        /* The URL of the source file on Git is based on the giturl variable
           in conf.py, which must be manually initialized to the source file
           URL in Git.
           "pagename" is a standard sphinx parameter containing the name of
           the source file, without extension.                             */

        var sourceFile = "cli-swift-large-object-creation" + ".rst";
        gitURL = "Source: https://git.openstack.org/cgit/openstack/openstack-manuals/tree/doc/user-guide/source" + "/" + sourceFile;

    /* gitsha, project and bug_tag rely on variables in conf.py */
    var gitSha = "SHA: 4ad6860c2d8531fd122db0b8b89a923cefdb682f";
        var bugProject = "openstack-manuals";
        var bugTitle = "Large objects in End User Guide";
    var fieldTags = "user-guide";

    /* "last_updated" is the build date and time. It relies on the
       conf.py variable "html_last_updated_fmt", which should include
       year/month/day as well as hours and minutes                   */
    var buildstring = "Release: 15.0.0 on 2018-02-08 07:37";

    var fieldComment = encodeURI(buildstring) +
                       lineFeed + encodeURI(gitSha) +
                       lineFeed + encodeURI(gitURL) ;

    logABug(bugTitle, bugProject, fieldComment, fieldTags);
</script>

<!-- Javascript for search boxes (both sidebar and top nav) -->
<script type="text/javascript">
(function() {
var cx = '000108871792296872333:noj9nikm74i';
var gcse = document.createElement('script');
gcse.type = 'text/javascript';
gcse.async = true;
gcse.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') +
'//www.google.com/cse/cse.js?cx=' + cx;
var s = document.getElementsByTagName('script')[0];
s.parentNode.insertBefore(gcse, s);
})();
</script>

  </body>
</html>