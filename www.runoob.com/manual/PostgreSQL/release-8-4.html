<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<HTML><HEAD><TITLE>发布8.4</TITLE><META NAME="GENERATOR" CONTENT="Modular DocBook HTML Stylesheet Version 1.79"><LINK REV="MADE" HREF="mailto:pgsql-docs@postgresql.org"><LINK REL="HOME" TITLE="PostgreSQL 9.3.1 中文手册" HREF="http://school.yunwei.edu/manual/PostgreSQL/index.html"><LINK REL="UP" TITLE="版本说明" HREF="http://school.yunwei.edu/manual/PostgreSQL/release.html"><LINK REL="PREVIOUS" TITLE="发布8.4.1" HREF="release-8-4-1.html"><LINK REL="NEXT" TITLE="发布8.3.23" HREF="release-8-3-23.html"><LINK REL="STYLESHEET" TYPE="text/css" HREF="http://school.yunwei.edu/manual/PostgreSQL/stylesheet.css"><META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=utf-8"><META NAME="creation" CONTENT="2015-07-11T14:00:17"></HEAD><BODY CLASS="SECT1">
<div style="text-align:right">
<a style="margin : 0px 0px 0px 10px;" href="https://github.com/postgres-cn/pgdoc-cn/issues/new" target="_blank" title="在Github上报告问题（请注明问题内容及所在章节）">问题报告</a>
<a style="margin : 0px 0px 0px 10px;" href="https://github.com/postgres-cn/pgdoc-cn/edit/master/postgresql/doc/src/sgml/release-8.4.sgml" target="_blank" title="直接在Github上纠错本页面">纠错本页面</a>
</div>
<DIV CLASS="NAVHEADER"><TABLE SUMMARY="Header navigation table" WIDTH="100%" BORDER="0" CELLPADDING="0" CELLSPACING="0"><TR><TH COLSPAN="5" ALIGN="center" VALIGN="bottom"><A HREF="http://school.yunwei.edu/manual/PostgreSQL/index.html">PostgreSQL 9.3.1 中文手册</A></TH></TR><TR><TD WIDTH="10%" ALIGN="left" VALIGN="top"><A TITLE="发布8.4.1" HREF="release-8-4-1.html" ACCESSKEY="P">&#19978;&#19968;&#39029;</A></TD><TD WIDTH="10%" ALIGN="left" VALIGN="top"><A HREF="http://school.yunwei.edu/manual/PostgreSQL/release.html" ACCESSKEY="U">&#19978;&#19968;&#32423;</A></TD><TD WIDTH="60%" ALIGN="center" VALIGN="bottom">&#38468;&#24405; E. 版本说明</TD><TD WIDTH="20%" ALIGN="right" VALIGN="top"><A TITLE="发布8.3.23" HREF="release-8-3-23.html" ACCESSKEY="N">&#19979;&#19968;&#39029;</A></TD></TR></TABLE><HR ALIGN="LEFT" WIDTH="100%"></DIV><DIV CLASS="SECT1"><H1 CLASS="SECT1"><A NAME="RELEASE-8-4">E.53. 发布8.4</A></H1><DIV CLASS="NOTE"><BLOCKQUOTE CLASS="NOTE"><P><B>发布日期: </B>2009-07-01</P></BLOCKQUOTE></DIV><DIV CLASS="SECT2"><H2 CLASS="SECT2"><A NAME="AEN125394">E.53.1. 概要</A></H2><P> 经过多年研发后，<SPAN CLASS="PRODUCTNAME">PostgreSQL</SPAN>已经在许多领域特性比较完整。
该发布显示一个针对性方法来添加特性（比如，认证，监测，空间重利用），
并且添加在以后SQL标准中定义的能力。增强的主要方面是：</P><P></P><UL><LI><P> 窗口函数</P></LI><LI><P> 通用表表达式和递归查询</P></LI><LI><P> 函数缺省和可变参数</P></LI><LI><P> 并行恢复</P></LI><LI><P> 列权限</P></LI><LI><P> 每个数据库本地设置</P></LI><LI><P> 改进的哈希索引</P></LI><LI><P> 改进<TT CLASS="LITERAL">EXISTS</TT>和<TT CLASS="LITERAL">NOT EXISTS</TT>查询连接性能</P></LI><LI><P> 容易使用热备份</P></LI><LI><P> 空闲空间映射的自动大小</P></LI><LI><P> 可见映射（大大降低了缓慢变化表的清理开销）</P></LI><LI><P> 版本感知psql(旧服务器之前使用反斜杠命令)</P></LI><LI><P> 支持用户认证的SSL证书</P></LI><LI><P> 每个函数运行时统计</P></LI><LI><P> psql中函数简单编辑</P></LI><LI><P> 新的contrib模块：pg_stat_statements, auto_explain, citext, btree_gin</P></LI></UL><P> 在下面章节中将详细解释以上所列项。</P></DIV><DIV CLASS="SECT2"><H2 CLASS="SECT2"><A NAME="AEN125434">E.53.2. 迁移到版本8.4</A></H2><P> 对于那些希望从任何以前发布中迁移数据是需要使用<SPAN CLASS="APPLICATION">pg_dump</SPAN>备份/恢复。</P><P> 观察下面的不兼容：</P><DIV CLASS="SECT3"><H3 CLASS="SECT3"><A NAME="AEN125439">E.53.2.1. 普遍的</A></H3><P></P><UL><LI><P> 缺省使用64位整数日期时间(Neil Conway)</P><P> 以前通过<SPAN CLASS="APPLICATION">configure</SPAN>的<TT CLASS="OPTION">--enable-integer-datetimes</TT>选项进行选择。为保留旧操作，
与<TT CLASS="OPTION">--disable-integer-datetimes</TT>一起编译。</P></LI><LI><P> 删除<SPAN CLASS="APPLICATION">ipcclean</SPAN>实用命令(Bruce)</P><P> 该功能仅仅工作于几个平台上。用户应该使用他们的操作系统工具。</P></LI></UL></DIV><DIV CLASS="SECT3"><H3 CLASS="SECT3"><A NAME="AEN125452">E.53.2.2. 服务器设置</A></H3><P></P><UL><LI><P> 为<TT CLASS="LITERAL">log_min_messages</TT>更改缺省设置为<TT CLASS="LITERAL">warning</TT>（以前为<TT CLASS="LITERAL">notice</TT>）
以减少日志文件数量(Tom)</P></LI><LI><P> 为<TT CLASS="LITERAL">max_prepared_transactions</TT>改变缺省设置为零（以前为5）(Tom)</P></LI><LI><P> 使得<TT CLASS="LITERAL">debug_print_parse</TT>, <TT CLASS="LITERAL">debug_print_rewritten</TT>,
和<TT CLASS="LITERAL">debug_print_plan</TT>在<TT CLASS="LITERAL">LOG</TT>消息级别输出，而不是像从前的<TT CLASS="LITERAL">DEBUG1</TT>(Tom)</P></LI><LI><P> <TT CLASS="LITERAL">debug_pretty_print</TT>缺省为<TT CLASS="LITERAL">on</TT> (Tom)</P></LI><LI><P> 删除<TT CLASS="VARNAME">explain_pretty_print</TT>参数（不再需要的）(Tom)</P></LI><LI><P> 通过超级用户使得<TT CLASS="VARNAME">log_temp_files</TT>可定位，像其它日志选项(Simon Riggs)</P></LI><LI><P> 当没有<TT CLASS="LITERAL">%</TT>转义出现在<TT CLASS="LITERAL">log_filename</TT>中的时候，删除epoch时间戳的自动追加(Robert Haas)&#13;</P><P> 该变化是因为有些用户想要一个已修复的日志文件名，用于外部日志轮换工具。</P></LI><LI><P> 从<TT CLASS="FILENAME">recovery.conf</TT>删除中删除<TT CLASS="VARNAME">log_restartpoints</TT>；
代替使用<TT CLASS="VARNAME">log_checkpoints</TT> (Simon)</P></LI><LI><P> 删除<TT CLASS="VARNAME">krb_realm</TT>和<TT CLASS="VARNAME">krb_server_hostname</TT>;
而是在<TT CLASS="FILENAME">pg_hba.conf</TT>中设置(Magnus)</P></LI><LI><P> 在<A HREF="release-8-4.html#RELEASE-8-4-PG-HBA-CONF"><TT CLASS="FILENAME">pg_hba.conf</TT></A>中有显著变化，如下所述。</P></LI></UL></DIV><DIV CLASS="SECT3"><H3 CLASS="SECT3"><A NAME="AEN125499">E.53.2.3. 查询</A></H3><P></P><UL><LI><P> 改变<TT CLASS="COMMAND">TRUNCATE</TT>和<TT CLASS="COMMAND">LOCK</TT>以适用于指定表的子表(Peter)</P><P> 这些命令现在接受避免处理子表的<TT CLASS="LITERAL">ONLY</TT>选项；如果需要旧操作，必须使用该选项。</P></LI><LI><P> <TT CLASS="COMMAND">SELECT DISTINCT</TT>和<TT CLASS="LITERAL">UNION</TT>/<TT CLASS="LITERAL">INTERSECT</TT>/<TT CLASS="LITERAL">EXCEPT</TT>
不再总是产生有序输出(Tom)</P><P> 之前，这些类型的查询总是通过排序/唯一的处理方式（即排序然后删除相邻重复）去除重复行。
现在，他们可以通过哈希来实现，这不会生成有序输出。如果应用程序依赖于按照排序顺序的输出，
??????那么推荐解决方法是添加一个<TT CLASS="LITERAL">ORDER BY</TT>子句。作为一个短期解决方法，
之前的操作可以通过禁用<TT CLASS="LITERAL">enable_hashagg</TT>被恢复，但是这是一个性能昂贵的修复。
<TT CLASS="LITERAL">SELECT DISTINCT ON</TT>从不使用散列，然而，因此，其操作不改变。</P></LI><LI><P> 强迫子表继承父表<TT CLASS="LITERAL">CHECK</TT>约束(Alex Hunsaker, Nikhil Sontakke, Tom)</P><P> 以前可能从子表中删除该约束，当扫描父表的时候，允许违背该约束的行可见。
这被认为是不一致的，也违背了SQL标准。</P></LI><LI><P> 禁止负的<TT CLASS="LITERAL">LIMIT</TT>或者<TT CLASS="LITERAL">OFFSET</TT>值，而不是将它们视为零(Simon) </P></LI><LI><P> 禁止事务块外的<TT CLASS="COMMAND">LOCK TABLE</TT>(Tom)</P><P> 这样的操作是无效的，因为该锁将被立即释放。</P></LI><LI><P> 现在序列包含一个额外的<TT CLASS="STRUCTFIELD">start_value</TT>列(Zoltan Boszormenyi)</P><P> 支持<TT CLASS="COMMAND">ALTER SEQUENCE ... RESTART</TT>。</P></LI></UL></DIV><DIV CLASS="SECT3"><H3 CLASS="SECT3"><A NAME="AEN125535">E.53.2.4. 函数和操作符</A></H3><P></P><UL><LI><P> 采用<TT CLASS="TYPE">numeric</TT>零放到分数幂上返回<TT CLASS="LITERAL">0</TT>，而不是抛出错误，
并且采用<TT CLASS="TYPE">numeric</TT>零放到零幂上返回<TT CLASS="LITERAL">1</TT>，而不是错误(Bruce)</P><P> 这匹配长期的<TT CLASS="TYPE">float8</TT>操作。</P></LI><LI><P> 允许浮点值的一元负号产生负零(Tom)</P><P> 修改后操作更加遵循<ACRONYM CLASS="ACRONYM">IEEE</ACRONYM>-标准。</P></LI><LI><P> 如果转义字符是<TT CLASS="LITERAL">LIKE</TT>模式中的最后一个字符，抛出一个错误（即它没有任何转义）(Tom)</P><P> 此前，这样的转义字符被默默忽略掉，从而可能掩盖应用程序逻辑错误。</P></LI><LI><P> 删除以前用于<TT CLASS="LITERAL">LIKE</TT>索引比较的<TT CLASS="LITERAL">~=~</TT> and <TT CLASS="LITERAL">~&lt;&gt;~</TT>操作符(Tom)</P><P> 模式索引目前使用规则平等操作符。</P></LI><LI><P> <CODE CLASS="FUNCTION">xpath()</CODE>现在将参数传递给<SPAN CLASS="APPLICATION">libxml</SPAN>没有任何变化(Andrew)</P><P> 这意味着XML参数必须是一个良好的XML文档。先前编码试图允许XML片段，
但它并没有很好地工作。</P></LI><LI><P> 让<CODE CLASS="FUNCTION">xmlelement()</CODE>格式属性值就好像目录值(Peter) </P><P> 此前，属性值是按照正常的SQL输出操作被格式化，有时不符合XML规则。</P></LI><LI><P> 为<SPAN CLASS="APPLICATION">libxml</SPAN>-使用函数重写内存管理(Tom)</P><P> 这种变化应该避免在PL/Perl中使用<SPAN CLASS="APPLICATION">libxml</SPAN>和其他附加代码的一些兼容性问题。</P></LI><LI><P> 为哈希函数采取更快速算法(Kenneth Marshall,依据Bob Jenkins的工作)</P><P> 许多内置哈希函数现在在小端和大端平台上提供不同的结果。</P></LI></UL><DIV CLASS="SECT4"><H4 CLASS="SECT4"><A NAME="AEN125577">E.53.2.4.1. 时间函数和操作符</A></H4><P></P><UL><LI><P> <TT CLASS="VARNAME">DateStyle</TT>不再控制<TT CLASS="TYPE">interval</TT>输出格式；
反而有一个新变量<TT CLASS="VARNAME">IntervalStyle</TT>(Ron Mayer)</P></LI><LI><P> 提高<TT CLASS="TYPE">timestamp</TT>和<TT CLASS="TYPE">interval</TT>输出中小数秒处理的一致性(Ron Mayer)</P><P> 这可能导致比以前显示不同数量的小数位，或者四舍五入而不是截断。</P></LI><LI><P> 使得<CODE CLASS="FUNCTION">to_char()</CODE>的本地的月份/日期名字依赖于<TT CLASS="VARNAME">LC_TIME</TT>，
而不是<TT CLASS="VARNAME">LC_MESSAGES</TT> (Euler Taveira de Oliveira)</P></LI><LI><P> 导致<CODE CLASS="FUNCTION">to_date()</CODE>和<CODE CLASS="FUNCTION">to_timestamp()</CODE>更加一致报告无效输入错误(Brendan Jurd)</P><P> 以前的版本中会常常忽略或默默地误读不匹配格式字符串的输入。
这种情况下将导致错误。</P></LI><LI><P> 为了子午线(<TT CLASS="LITERAL">AM</TT>/<TT CLASS="LITERAL">PM</TT>)和纪元
(<TT CLASS="LITERAL">BC</TT>/<TT CLASS="LITERAL">AD</TT>)格式名称修复<CODE CLASS="FUNCTION">to_timestamp()</CODE>而不需要大写/小写匹配(Brendan Jurd)</P><P> 比如，输入值<TT CLASS="LITERAL">ad</TT>匹配格式字符串<TT CLASS="LITERAL">AD</TT>。</P></LI></UL></DIV></DIV></DIV><DIV CLASS="SECT2"><H2 CLASS="SECT2"><A NAME="AEN125610">E.53.3. 变化</A></H2><P> 下面你会发现在<SPAN CLASS="PRODUCTNAME">PostgreSQL</SPAN> 8.4和之前主要发布之间变化的详细说明。</P><DIV CLASS="SECT3"><H3 CLASS="SECT3"><A NAME="AEN125614">E.53.3.1. 性能</A></H3><P></P><UL><LI><P> 完善优化统计计算(Jan Urbanski, Tom)</P><P> 尤其是，估计全文搜索操作符被大幅度提高。</P></LI><LI><P> 允许<TT CLASS="COMMAND">SELECT DISTINCT</TT>和<TT CLASS="LITERAL">UNION</TT>/<TT CLASS="LITERAL">INTERSECT</TT>/<TT CLASS="LITERAL">EXCEPT</TT>可以使用哈希(Tom)</P><P> 这意味着这些类型的查询不再自动生成有序输出。</P></LI><LI><P> 创建半连接和反连接明确概念(Tom)</P><P> 这项工作正规化<TT CLASS="LITERAL">IN(SELECT ...)</TT>子句之前的点对点处理，
并延伸到<TT CLASS="LITERAL">EXISTS</TT>和<TT CLASS="LITERAL">NOT EXISTS</TT>子句中。
它可能导致<TT CLASS="LITERAL">EXISTS</TT>和<TT CLASS="LITERAL">NOT EXISTS</TT>查询更好地规划。
一般情况下，逻辑上相同的<TT CLASS="LITERAL">IN</TT>和<TT CLASS="LITERAL">EXISTS</TT>子句有类似性能，
而此前的<TT CLASS="LITERAL">IN</TT>获胜。 </P></LI><LI><P> 提高外部链接下子选择优化(Tom)</P><P> 以前，一个子选择或视图不能被很好的优化，
如果它出现在外连接可空端并且在结果列中包含非严格表达式（比如，常量）。</P></LI><LI><P> 通过使用Boyer-Moore-Horspool搜索提高<CODE CLASS="FUNCTION">text_position()</CODE>和相关函数的性能(David Rowley)</P><P> 这对长期搜索模式特别有帮助。</P></LI><LI><P> 当需要的时候，通过写文件降低写入统计收集文件I/O负载(Martin Pihlak)</P></LI><LI><P> 提高批量插入性能(Robert Haas, Simon)</P></LI><LI><P> 从<TT CLASS="LITERAL">10</TT>到<TT CLASS="LITERAL">100</TT>增加<TT CLASS="VARNAME">default_statistics_target</TT>缺省值(Greg Sabino Mullane,Tom)</P><P> 最大值从<TT CLASS="LITERAL">1000</TT>增加到<TT CLASS="LITERAL">10000</TT>。 </P></LI><LI><P> 在涉及继承或者<TT CLASS="LITERAL">UNION ALL</TT>的查询中缺省执行<TT CLASS="VARNAME">constraint_exclusion</TT>检查(Tom)</P><P> 新的<TT CLASS="VARNAME">constraint_exclusion</TT>设置，<TT CLASS="LITERAL">分区</TT>被添加以指定该操作。</P></LI><LI><P> 允许I/O预读取位图索引扫描(Greg Stark)</P><P> 通过<TT CLASS="VARNAME">effective_io_concurrency</TT>控制预读数量。
只有内核有<CODE CLASS="FUNCTION">posix_fadvise()</CODE>支持时该功能可用。&#13;</P></LI><LI><P> 内置<TT CLASS="LITERAL">FROM</TT>子句中简单集合返回<ACRONYM CLASS="ACRONYM">SQL</ACRONYM>函数(Richard Rowell)</P></LI><LI><P> 通过为连接密钥值提供一种特殊情况来优化多批次哈希连接性能，
这种情况在外部关系中特别常见(Bryce Cutt, Ramon Lawrence) </P></LI><LI><P> 通过抑制<SPAN CLASS="QUOTE">"physical tlist"</SPAN>优化减少多批次哈希连接中临时数据量
(Michael Henderson, Ramon Lawrence) </P></LI><LI><P> 避免<TT CLASS="COMMAND">CREATE INDEX CONCURRENTLY</TT>中等待空闲事务会话(Simon)</P></LI><LI><P> 改进共享缓存无效性能(Tom)</P></LI></UL></DIV><DIV CLASS="SECT3"><H3 CLASS="SECT3"><A NAME="AEN125683">E.53.3.2. 服务器</A></H3><DIV CLASS="SECT4"><H4 CLASS="SECT4"><A NAME="AEN125685">E.53.3.2.1. 设置</A></H4><P></P><UL><LI><P> 转换许多<TT CLASS="FILENAME">postgresql.conf</TT>设置以枚举值，使得<TT CLASS="LITERAL">pg_settings</TT>
可以显示有效值(Magnus)</P></LI><LI><P> 添加<TT CLASS="VARNAME">cursor_tuple_fraction</TT>参数以控制规划器假设被抓取的游标行(Robert Hell)&#13;</P></LI><LI><P> 允许<TT CLASS="FILENAME">postgresql.conf</TT>中自定义变量类下的下划线(Tom)</P></LI></UL></DIV><DIV CLASS="SECT4"><H4 CLASS="SECT4"><A NAME="AEN125698">E.53.3.2.2. 身份验证和安全</A></H4><P></P><UL><LI><P> 删除支持(不安全) <TT CLASS="LITERAL">crypt</TT>认证方法(Magnus)</P><P> 这有效地淘汰了先前<SPAN CLASS="PRODUCTNAME">PostgreSQL</SPAN>7.2客户端库，
因为不再有他们可以使用的任何非明文口令方法。</P></LI><LI><P> 支持<TT CLASS="FILENAME">pg_ident.conf</TT>中正则表达式(Magnus)</P></LI><LI><P> 允许无需重启postmaster改变<SPAN CLASS="PRODUCTNAME">Kerberos</SPAN>/<ACRONYM CLASS="ACRONYM">GSSAPI</ACRONYM>参数(Magnus)</P></LI><LI><P> 支持服务器证书文件中<ACRONYM CLASS="ACRONYM">SSL</ACRONYM>证书链(Andrew Gierth)</P><P> 包括完整证书链使客户能够验证证书，
而不需要存在于本地存储中的所有中间CA证书，这是商业CA的常见情况。</P></LI><LI><P> 报告连接<TT CLASS="LITERAL">MD5</TT>认证和<TT CLASS="VARNAME">db_user_namespace</TT>启动的相应错误信息(Bruce)</P></LI></UL></DIV><DIV CLASS="SECT4"><H4 CLASS="SECT4"><A NAME="RELEASE-8-4-PG-HBA-CONF">E.53.3.2.3. <TT CLASS="FILENAME">pg_hba.conf</TT></A></H4><P></P><UL><LI><P> 改变所有身份验证选项使用<TT CLASS="LITERAL">name=value</TT>语法(Magnus)</P><P> 这使得不兼容变化到<TT CLASS="LITERAL">ldap</TT>,<TT CLASS="LITERAL">pam</TT>和<TT CLASS="LITERAL">ident</TT>身份验证方法。
所有使用这些方法的<TT CLASS="FILENAME">pg_hba.conf</TT>项需要使用新的格式被重写。</P></LI><LI><P> 删除<TT CLASS="LITERAL">ident sameuser</TT>选项，如果没有指定usermap，而不是使得该操作缺省(Magnus)</P></LI><LI><P> 允许为所有外部身份验证方法的usermap参数(Magnus)</P><P> 之前usermap只支持<TT CLASS="LITERAL">ident</TT>认证。</P></LI><LI><P> 添加<TT CLASS="LITERAL">clientcert</TT>选项以控制客户端证书请求(Magnus)</P><P> 以前这是通过服务器的数据目录中根证书文件被控制。</P></LI><LI><P> 添加<TT CLASS="LITERAL">cert</TT>认证方法以允许<SPAN CLASS="emphasis"><I CLASS="EMPHASIS">user</I></SPAN>认证通过<ACRONYM CLASS="ACRONYM">SSL</ACRONYM>证书(Magnus)</P><P> 此前<ACRONYM CLASS="ACRONYM">SSL</ACRONYM>证书只能验证客户端可以使用一个证书，而不是验证用户。</P></LI><LI><P> 允许在<TT CLASS="FILENAME">pg_hba.conf</TT>中指定<TT CLASS="LITERAL">krb5</TT>, <TT CLASS="LITERAL">gssapi</TT>和<TT CLASS="LITERAL">sspi</TT>
字段和<TT CLASS="LITERAL">krb5</TT>主机设置(Magnus)</P><P> 这些覆盖了<TT CLASS="FILENAME">postgresql.conf</TT>中设置。</P></LI><LI><P> 为<TT CLASS="LITERAL">krb5</TT>，<TT CLASS="LITERAL">gssapi</TT>和<TT CLASS="LITERAL">sspi</TT>方法添加<TT CLASS="VARNAME">include_realm</TT>参数(Magnus)</P><P> 这允许来自不同领域的相同用户名被认证为使用用户映射的不同数据库用户。</P></LI><LI><P> 当它被加载的时候，完整解析<TT CLASS="FILENAME">pg_hba.conf</TT>，以致于
可以立即报告错误(Magnus)</P><P> 此前，文件中的大多数错误直到客户端试图连接时才会被检测到，所以一个错误的文件可能导致系统
无法使用。随着新的操作，如果在重载时检测到错误，那么坏文件被拒绝，并且postmaster继续使用其旧副本。</P></LI><LI><P> 显示<TT CLASS="FILENAME">pg_hba.conf</TT>中所有解析错误
而不是在第一个之后终止(Selena Deckelmann) </P></LI><LI><P> 支持<SPAN CLASS="PRODUCTNAME">Solaris</SPAN>上Unix域套接字上的<TT CLASS="LITERAL">ident</TT>认证(Garick Hamlin)</P></LI></UL></DIV><DIV CLASS="SECT4"><H4 CLASS="SECT4"><A NAME="AEN125778">E.53.3.2.4. 连续归档</A></H4><P></P><UL><LI><P> 提供一个选项到<CODE CLASS="FUNCTION">pg_start_backup()</CODE>以强制尽快完成的隐含检查点(Tom)</P><P> 缺省操作避免过多I/O消耗，但是如果没有并发查询活动，这是毫无意义的。</P></LI><LI><P> 让<CODE CLASS="FUNCTION">pg_stop_backup()</CODE>等待修改的<ACRONYM CLASS="ACRONYM">WAL</ACRONYM>文件被归档(Simon)</P><P> 这保证备份在<CODE CLASS="FUNCTION">pg_stop_backup()</CODE>完成时是有效的。</P></LI><LI><P> 当启用归档时，在关闭时交替最后WAL段以致于所有事务可以立即被归档(Guillaume Smet, Heikki)</P></LI><LI><P> 当连续归档基础备份在进展中时，延迟<SPAN CLASS="QUOTE">"smart"</SPAN>关机(Laurenz Albe)</P></LI><LI><P> 如果请求<SPAN CLASS="QUOTE">"fast"</SPAN>关机，那么取消连续归档基础备份(Laurenz Albe)</P></LI><LI><P> 允许<TT CLASS="FILENAME">recovery.conf</TT>布尔变量采取同一范围字符串值作为<TT CLASS="FILENAME">postgresql.conf</TT>布尔值(Bruce)</P></LI></UL></DIV><DIV CLASS="SECT4"><H4 CLASS="SECT4"><A NAME="AEN125803">E.53.3.2.5. 监控</A></H4><P></P><UL><LI><P> 当最后加载<SPAN CLASS="PRODUCTNAME">PostgreSQL</SPAN>配置文件的时候，添加<CODE CLASS="FUNCTION">pg_conf_load_time()</CODE>以报告(George Gensure)</P></LI><LI><P> 添加<CODE CLASS="FUNCTION">pg_terminate_backend()</CODE>以安全终止后台（<TT CLASS="LITERAL">SIGTERM</TT>信号也如此）(Tom, Bruce)</P><P> 虽然它一直可能<TT CLASS="LITERAL">SIGTERM</TT>单一后端，
这个以前被认为是不支持的；
并且测试的情况下发现了一些被修复的错误。</P></LI><LI><P> 添加跟踪用户定义函数的调用计数以及运行时间能力(Martin Pihlak)</P><P> 函数统计出现在新的系统视图，<TT CLASS="LITERAL">pg_stat_user_functions</TT>中。
通过新的参数<TT CLASS="VARNAME">track_functions</TT>控制跟踪。</P></LI><LI><P> 在<TT CLASS="LITERAL">pg_stat_activity</TT>中通过新的<TT CLASS="VARNAME">track_activity_query_size</TT>参数
允许声明最大查询字符串大小(Thomas Lee)</P></LI><LI><P> 增大最大线长度发送到<SPAN CLASS="APPLICATION">syslog</SPAN>，希望优化性能(Tom)</P></LI><LI><P> 添加只读配置变量<TT CLASS="VARNAME">segment_size</TT>,<TT CLASS="VARNAME">wal_block_size</TT>和<TT CLASS="VARNAME">wal_segment_size</TT>
(Bernd Helmle)</P></LI><LI><P> 当报告死锁时，报告死锁服务器日志中涉及的所有查询文本(Itagaki Takahiro)</P></LI><LI><P> 添加<CODE CLASS="FUNCTION">pg_stat_get_activity(pid)</CODE>函数以返回关于指定进程id的信息(Magnus)</P></LI><LI><P> 允许通过<TT CLASS="VARNAME">stats_temp_directory</TT>指定服务器的统计文件的位置(Magnus)</P><P> 这允许统计文件被放置在<ACRONYM CLASS="ACRONYM">RAM</ACRONYM>固有目录中以减少I/O需求。
在启动/关闭时，文件被拷贝到它的传统位置(<TT CLASS="LITERAL">$PGDATA/global/</TT>)下，
所以重新启动时被保留。</P></LI></UL></DIV></DIV><DIV CLASS="SECT3"><H3 CLASS="SECT3"><A NAME="AEN125844">E.53.3.3. 查询</A></H3><P></P><UL><LI><P> 添加支持<TT CLASS="LITERAL">WINDOW</TT>函数(Hitoshi Harada)</P></LI><LI><P> 添加支持<TT CLASS="LITERAL">WITH</TT>子句(CTEs)，包含<TT CLASS="LITERAL">WITH RECURSIVE</TT> (Yoshiyuki Asaba, Tatsuo Ishii, Tom)</P></LI><LI><P> 添加<TT CLASS="COMMAND">TABLE</TT>命令(Peter)</P><P> <TT CLASS="LITERAL">TABLE tablename</TT>是<TT CLASS="LITERAL">SELECT * FROM tablename</TT>的一个SQL标准简写。</P></LI><LI><P> 当声明<TT CLASS="COMMAND">SELECT</TT> (或者<TT CLASS="LITERAL">RETURNING</TT>)列输出标签的时候，允许
<TT CLASS="LITERAL">AS</TT>为可选的(Hiroshi Saito) </P><P> 该操作只要列标签没有任何<SPAN CLASS="PRODUCTNAME">PostgreSQL</SPAN>关键字，否则仍然需要<TT CLASS="LITERAL">AS</TT>。</P></LI><LI><P> 支持在<TT CLASS="COMMAND">SELECT</TT>结果列表中设置返回函数，
即使对于通过tuplestore返回其结果的函数(Tom)</P><P> 特别是，这意味着用PL/pgSQL和其它PL/pgSQL语言书写的函数可以这样被调用。</P></LI><LI><P> 在聚集和分组查询输出中支持设置返回函数(Tom)</P></LI><LI><P> 允许<TT CLASS="COMMAND">SELECT FOR UPDATE</TT>/<TT CLASS="LITERAL">SHARE</TT>在继承树上进行操作(Tom)</P></LI><LI><P> 为<ACRONYM CLASS="ACRONYM">SQL/MED</ACRONYM>添加基础设施(Martin Pihlak, Peter)</P><P> 然而没有远程或外部<ACRONYM CLASS="ACRONYM">SQL/MED</ACRONYM>功能，
但这种变化提供了一个标准化的，面向未来系统，
用于管理类似模块<TT CLASS="FILENAME">dblink</TT>和<TT CLASS="FILENAME">plproxy</TT>连接信息。</P></LI><LI><P> 当引用的模式，函数，操作符或者操作符类被修改的时候，使缓存计划无效(Martin Pihlak, Tom)</P><P> 这提高了系统对反应传输中DDL变化的能力。</P></LI><LI><P> 允许复合类型比较以及匿名复合类型的数组(Tom)</P><P> 这允许构造比如<TT CLASS="LITERAL">row(1, 1.1) = any (array[row(7, 7.7), row(1, 1.0)])</TT>。
在递归查询中特别有用。</P></LI><LI><P> 添加使用代码点支持Unicode字符串文本和标识符规范，
比如<TT CLASS="LITERAL">U&amp;'d\0061t\+000061'</TT>(Peter)</P></LI><LI><P> 拒绝字符串文本中<TT CLASS="LITERAL">\000</TT>和<TT CLASS="COMMAND">COPY</TT>数据(Tom)</P><P> 之前，这被接受但是有终止字符串内容的影响。</P></LI><LI><P> 提高解析器报告错误位置的能力(Tom)</P><P> 为许多语义错误报道一个错误位置，
比如不匹配的数据类型，这在以前不可能被本地化。</P></LI></UL><DIV CLASS="SECT4"><H4 CLASS="SECT4"><A NAME="AEN125903">E.53.3.3.1. <TT CLASS="COMMAND">TRUNCATE</TT></A></H4><P></P><UL><LI><P> 支持语句级别<TT CLASS="LITERAL">ON TRUNCATE</TT>触发器(Simon)</P></LI><LI><P> 为了<TT CLASS="COMMAND">TRUNCATE TABLE</TT>添加<TT CLASS="LITERAL">RESTART</TT>/<TT CLASS="LITERAL">CONTINUE IDENTITY</TT>选项(Zoltan Boszormenyi)</P><P> 序列的起始值可以通过<TT CLASS="COMMAND">ALTER SEQUENCE START WITH</TT>被改变。</P></LI><LI><P> 允许<TT CLASS="COMMAND">TRUNCATE tab1, tab1</TT>成功(Bruce)</P></LI><LI><P> 添加单独<TT CLASS="COMMAND">TRUNCATE</TT>许可(Robert Haas)</P></LI></UL></DIV><DIV CLASS="SECT4"><H4 CLASS="SECT4"><A NAME="AEN125923">E.53.3.3.2. <TT CLASS="COMMAND">EXPLAIN</TT></A></H4><P></P><UL><LI><P> 采用<TT CLASS="COMMAND">EXPLAIN VERBOSE</TT>显示每个规划节点的输出列(Tom)</P><P> 此前<TT CLASS="COMMAND">EXPLAIN VERBOSE</TT>输出查询规划的内部表示。
（该操作通过<TT CLASS="VARNAME">debug_print_plan</TT>是可用的。）</P></LI><LI><P> 采用<TT CLASS="COMMAND">EXPLAIN</TT>标识子计划以及单一标签的初始计划(Tom)</P></LI><LI><P> 为了<TT CLASS="VARNAME">debug_print_plan</TT>采用<TT CLASS="COMMAND">EXPLAIN</TT>(Tom)</P></LI><LI><P> 允许在<TT CLASS="COMMAND">CREATE TABLE AS</TT>上进行<TT CLASS="COMMAND">EXPLAIN</TT>(Peter)</P></LI></UL></DIV><DIV CLASS="SECT4"><H4 CLASS="SECT4"><A NAME="AEN125944">E.53.3.3.3. <TT CLASS="LITERAL">LIMIT</TT>/<TT CLASS="LITERAL">OFFSET</TT></A></H4><P></P><UL><LI><P> 允许<TT CLASS="LITERAL">LIMIT</TT>和<TT CLASS="LITERAL">OFFSET</TT>中子选择(Tom)</P></LI><LI><P> 为了<TT CLASS="LITERAL">LIMIT</TT>/<TT CLASS="LITERAL">OFFSET</TT>性能添加<ACRONYM CLASS="ACRONYM">SQL</ACRONYM>标准语法(Peter)</P><P> 也就是说，<TT CLASS="LITERAL">OFFSET num {ROW|ROWS} FETCH {FIRST|NEXT} [num] {ROW|ROWS} ONLY</TT>。</P></LI></UL></DIV></DIV><DIV CLASS="SECT3"><H3 CLASS="SECT3"><A NAME="AEN125960">E.53.3.4. 对象操作</A></H3><P></P><UL><LI><P> 添加列级权限支持(Stephen Frost, KaiGai Kohei)</P></LI><LI><P> 重构多目标<TT CLASS="COMMAND">DROP</TT>操作以减少<TT CLASS="LITERAL">CASCADE</TT>的需要(Alex Hunsaker)</P><P> 比如，如果表<TT CLASS="LITERAL">B</TT>在表<TT CLASS="LITERAL">A</TT>上有依赖物，那么
命令<TT CLASS="LITERAL">DROP TABLE A, B</TT>不再需要<TT CLASS="LITERAL">CASCADE</TT>选项。</P></LI><LI><P> 通过确保在开始删除对象依赖之前采取锁定，修复各种并发<TT CLASS="COMMAND">DROP</TT>命令问题(Tom)</P></LI><LI><P> 改善<TT CLASS="COMMAND">DROP</TT>命令中依赖性报告(Tom)</P></LI><LI><P> 添加<TT CLASS="LITERAL">WITH [NO] DATA</TT>子句给<TT CLASS="COMMAND">CREATE TABLE AS</TT>，按照<ACRONYM CLASS="ACRONYM">SQL</ACRONYM>标准(Peter, Tom)</P></LI><LI><P> 添加支持用户自定义I/O转换模型(Heikki)</P></LI><LI><P> 允许<TT CLASS="COMMAND">CREATE AGGREGATE</TT>使用<TT CLASS="TYPE">internal</TT>转换数据类型(Tom)</P></LI><LI><P> 添加<TT CLASS="LITERAL">LIKE</TT>子句到<TT CLASS="COMMAND">CREATE TYPE</TT> (Tom)</P><P> 这简化了使用作为已存在类型同一内部表示形式的数据类型的创建。</P></LI><LI><P> 允许类型类别指定以及用户定义的基础类型<SPAN CLASS="QUOTE">"首选"</SPAN>状态(Tom) </P><P> 这允许控制用户定义类型的强制操作。</P></LI><LI><P> 允许<TT CLASS="COMMAND">CREATE OR REPLACE VIEW</TT>添加列到视图结尾(Robert Haas)</P></LI></UL><DIV CLASS="SECT4"><H4 CLASS="SECT4"><A NAME="AEN126003">E.53.3.4.1. <TT CLASS="COMMAND">ALTER</TT></A></H4><P></P><UL><LI><P> 添加<TT CLASS="COMMAND">ALTER TYPE RENAME</TT> (Petr Jelinek)</P></LI><LI><P> 添加<TT CLASS="COMMAND">ALTER SEQUENCE ... RESTART</TT>（无参数）以重置序列到其初始值(Zoltan Boszormenyi)</P></LI><LI><P> 修改<TT CLASS="COMMAND">ALTER TABLE</TT>语法以允许表，索引，序列以及视图合理组合(Tom) </P><P>
这种变化允许下面新语法：
<P></P></P><UL><LI><P> <TT CLASS="COMMAND">ALTER SEQUENCE OWNER TO</TT>
</P></LI><LI><P> <TT CLASS="COMMAND">ALTER VIEW ALTER COLUMN SET/DROP DEFAULT</TT>
</P></LI><LI><P> <TT CLASS="COMMAND">ALTER VIEW OWNER TO</TT>
</P></LI><LI><P> <TT CLASS="COMMAND">ALTER VIEW SET SCHEMA</TT>
</P></LI></UL><P>
这里没有实际的新功能，
但之前你不得不表明<TT CLASS="COMMAND">ALTER TABLE</TT>可以做这些事情，使其混淆。
</P></LI><LI><P> 添加支持语法<TT CLASS="COMMAND">ALTER TABLE ... ALTER COLUMN... SET DATA TYPE</TT> (Peter)</P><P> 这是已经支持的功能性<ACRONYM CLASS="ACRONYM">SQL</ACRONYM>标准语法。 </P></LI><LI><P> 采用<TT CLASS="COMMAND">ALTER TABLE SET WITHOUT OIDS</TT>重写表以物理删除<TT CLASS="TYPE">OID</TT>值(Tom)</P><P> 同时添加<TT CLASS="COMMAND">ALTER TABLE SET WITH OIDS</TT>重写表添加<TT CLASS="TYPE">OID</TT>。</P></LI></UL></DIV><DIV CLASS="SECT4"><H4 CLASS="SECT4"><A NAME="AEN126043">E.53.3.4.2. 数据库操作</A></H4><P></P><UL><LI><P> 当未提交预备事务的时候，改善<TT CLASS="COMMAND">CREATE</TT>/<TT CLASS="COMMAND">DROP</TT>/<TT CLASS="COMMAND">RENAME DATABASE</TT>错误报告(Tom)</P></LI><LI><P> 每个数据库设置采用<TT CLASS="VARNAME">LC_COLLATE</TT>和<TT CLASS="VARNAME">LC_CTYPE</TT>(Radek Strnad, Heikki)</P><P> 整理类似编码，总是配置每个数据库。</P></LI><LI><P> 完善检查数据库编码，整理(<TT CLASS="VARNAME">LC_COLLATE</TT>), 以及字符类(<TT CLASS="VARNAME">LC_CTYPE</TT>)匹配(Heikki, Tom)</P><P> 特别注意，当从<TT CLASS="LITERAL">template0</TT>拷贝的时候，一个新的数据库编码和语言环境设置被改变。
这避免了可能拷贝的数据不匹配该设置。</P></LI><LI><P> 添加<TT CLASS="COMMAND">ALTER DATABASE SET TABLESPACE</TT>移动数据库到一个新的表空间(Guillaume Lelarge, Bernd Helmle)</P></LI></UL></DIV></DIV><DIV CLASS="SECT3"><H3 CLASS="SECT3"><A NAME="AEN126065">E.53.3.5. 实用操作</A></H3><P></P><UL><LI><P> 添加<TT CLASS="LITERAL">VERBOSE</TT>选项到<TT CLASS="COMMAND">CLUSTER</TT>命令和<SPAN CLASS="APPLICATION">clusterdb</SPAN>中(Jim Cox)</P></LI><LI><P> 为记录待定的触发器事件减少内存需求(Tom)</P></LI></UL><DIV CLASS="SECT4"><H4 CLASS="SECT4"><A NAME="AEN126075">E.53.3.5.1. 索引</A></H4><P></P><UL><LI><P> 大幅提高建立并且访问哈希索引速度(Tom Raney, Shreya Bhargava)</P><P> 这使得散列索引有时比btree索引的速度更快。
然而，哈希索引仍然没有碰撞安全。</P></LI><LI><P> 使得哈希索引只存储哈希码，而不是索引列的完整值(Xiao Meng)</P><P> 这大大减少了为长索引值的散列索引的大小，从而提高了性能。</P></LI><LI><P> 实现GIN索引的快速更新选项(Teodor, Oleg)</P><P> 此选项大大提高了在搜索速度中小的不利后果上的更新速度。</P></LI><LI><P> <TT CLASS="LITERAL">xxx_pattern_ops</TT>索引可以用于简单平等比较，而不仅仅为<TT CLASS="LITERAL">LIKE</TT> (Tom)</P></LI></UL></DIV><DIV CLASS="SECT4"><H4 CLASS="SECT4"><A NAME="AEN126091">E.53.3.5.2. 全文索引</A></H4><P></P><UL><LI><P> 当在全文索引中执行<ACRONYM CLASS="ACRONYM">GIN</ACRONYM>加权查找时，删除该需求而使用<TT CLASS="LITERAL">@@@</TT>(Tom, Teodor)</P><P> 可以使用正常的<TT CLASS="LITERAL">@@</TT>文本搜索操作符。</P></LI><LI><P> 为<TT CLASS="LITERAL">@@</TT>文本搜索操作添加优化选择函数(Jan Urbanski)</P></LI><LI><P> 允许全文搜索中前缀匹配(Teodor Sigaev,Oleg Bartunov)</P></LI><LI><P> 支持多列<ACRONYM CLASS="ACRONYM">GIN</ACRONYM>索引(Teodor Sigaev)</P></LI><LI><P> 改善支持Nepali语言和Devanagari字母(Teodor)</P></LI></UL></DIV><DIV CLASS="SECT4"><H4 CLASS="SECT4"><A NAME="AEN126110">E.53.3.5.3. <TT CLASS="COMMAND">VACUUM</TT></A></H4><P></P><UL><LI><P> 在单独每个关系<SPAN CLASS="QUOTE">"fork"</SPAN>文件中跟踪自由空间(Heikki)</P><P> 通过<TT CLASS="COMMAND">VACUUM</TT>发现的自由空间在<TT CLASS="FILENAME">*_fsm</TT>文件中被记录，
而不是在一个固定大小的共享存储器区域中。
<TT CLASS="VARNAME">max_fsm_pages</TT>和<TT CLASS="VARNAME">max_fsm_relations</TT>设置已被移除，
从而大大简化了自由空间管理。 </P></LI><LI><P> 添加可见视图以跟踪不需要清理页面(Heikki)</P><P> 这允许<TT CLASS="COMMAND">VACUUM</TT>以避免扫描所有表，
只有表中的一部分需要清理的时候。可见视图被存储在每个关系<SPAN CLASS="QUOTE">"fork"</SPAN>文件。</P></LI><LI><P> 添加<TT CLASS="VARNAME">vacuum_freeze_table_age</TT>参数以控制
当<TT CLASS="COMMAND">VACUUM</TT>忽略可见视图并且执行全表扫描以冻结元组。</P></LI><LI><P> 更仔细追踪事务快照(Alvaro)</P><P> 这提高了<TT CLASS="COMMAND">VACUUM</TT>在长时间运行的事务中回收空间能力。</P></LI><LI><P> 添加指定每个关系autovacuum以及<TT CLASS="COMMAND">CREATE TABLE</TT>中<ACRONYM CLASS="ACRONYM">TOAST</ACRONYM>参数的能力(Alvaro, Euler Taveira de Oliveira)</P><P> 自动清理选项存储在系统表中。</P></LI><LI><P> 添加<TT CLASS="LITERAL">--freeze</TT>选项到<SPAN CLASS="APPLICATION">vacuumdb</SPAN>(Bruce)</P></LI></UL></DIV></DIV><DIV CLASS="SECT3"><H3 CLASS="SECT3"><A NAME="AEN126144">E.53.3.6. 数据类型</A></H3><P></P><UL><LI><P> 为文本搜索同义词词典添加<TT CLASS="LITERAL">CaseSensitive</TT>选项(Simon)</P></LI><LI><P> 完善<TT CLASS="TYPE">NUMERIC</TT>划分精度(Tom)</P></LI><LI><P> 为<TT CLASS="TYPE">int2</TT>与<TT CLASS="TYPE">int8</TT>添加基础算术操作符(Tom)</P><P> 这消除了在某些情况中显式投射需求。</P></LI><LI><P> 允许<TT CLASS="TYPE">UUID</TT>输入在每四位后面接受可选的连字符(Robert Haas)</P></LI><LI><P> 允许<TT CLASS="LITERAL">on</TT>/<TT CLASS="LITERAL">off</TT>作为布尔数据类型的输入(Itagaki Takahiro)</P></LI><LI><P> 为类型<TT CLASS="TYPE">numeric</TT>在输入字符串中<TT CLASS="LITERAL">NaN</TT>周围允许空格(Sam Mason)</P></LI></UL><DIV CLASS="SECT4"><H4 CLASS="SECT4"><A NAME="AEN126169">E.53.3.6.1. 时间数据类型</A></H4><P></P><UL><LI><P> 拒绝年<TT CLASS="LITERAL">0 BC</TT>以及<TT CLASS="LITERAL">000</TT>和<TT CLASS="LITERAL">0000</TT>(Tom)</P><P> 以前这些被解释为<TT CLASS="LITERAL">1 BC</TT>。（注意：年<TT CLASS="LITERAL">0</TT>和<TT CLASS="LITERAL">00</TT>仍然假定为2000。）</P></LI><LI><P> 在已知时区缩写缺省列表中包含<TT CLASS="LITERAL">SGT</TT> (Singapore时间)</P></LI><LI><P> 支持<TT CLASS="LITERAL">infinity</TT>和<TT CLASS="LITERAL">-infinity</TT>作为类型<TT CLASS="TYPE">date</TT>的值(Tom)</P></LI><LI><P> 使得<TT CLASS="TYPE">interval</TT>文本解析更加遵循标准(Tom, Ron Mayer)</P><P> 比如，<TT CLASS="LITERAL">INTERVAL '1' YEAR</TT>目前执行应该做的内容。</P></LI><LI><P> 在<TT CLASS="LITERAL">second</TT>关键字之后，按照<ACRONYM CLASS="ACRONYM">SQL</ACRONYM>标准允许指定<TT CLASS="TYPE">interval</TT>分数秒精度(Tom)</P><P> 之前在关键字<TT CLASS="TYPE">interval</TT>之后指定精度。（为了向后兼容，这种语法仍
支持，但不建议使用。）数据类型定义现在使用标准格式被输出。</P></LI><LI><P> 支持 <ACRONYM CLASS="ACRONYM">IS0 8601</ACRONYM> <TT CLASS="TYPE">interval</TT>语法(Ron Mayer, Kevin Grittner)</P><P> 比如，现在支持<TT CLASS="LITERAL">INTERVAL 'P1Y2M3DT4H5M6.7S'</TT>。</P></LI><LI><P> 添加<TT CLASS="VARNAME">IntervalStyle</TT>参数以控制<TT CLASS="TYPE">interval</TT>值如何输出(Ron Mayer)</P><P> 有效值是：<TT CLASS="LITERAL">postgres</TT>, <TT CLASS="LITERAL">postgres_verbose</TT>,
<TT CLASS="LITERAL">sql_standard</TT>, <TT CLASS="LITERAL">iso_8601</TT>。
只有当一些字段有正/负名称的时候，该设置也控制负<TT CLASS="TYPE">interval</TT>输入的处理。 &#13;</P></LI><LI><P> 在<TT CLASS="TYPE">timestamp</TT>和<TT CLASS="TYPE">interval</TT>输入中优化小数秒处理的一致性(Ron Mayer)</P></LI></UL></DIV><DIV CLASS="SECT4"><H4 CLASS="SECT4"><A NAME="AEN126221">E.53.3.6.2. 数组</A></H4><P></P><UL><LI><P> 优化适用于<TT CLASS="LITERAL">ARRAY[]</TT>结构映射处理，
比如<TT CLASS="LITERAL">ARRAY[...]::integer[]</TT>(Brendan Jurd)</P><P> 之前<SPAN CLASS="PRODUCTNAME">PostgreSQL</SPAN>试图为<TT CLASS="LITERAL">ARRAY[]</TT>结构而不引用随后计算确定一个数据类型。
这在许多情况下可能失败，特别是当<TT CLASS="LITERAL">ARRAY[]</TT>构造是空的或仅包含不明确项如<TT CLASS="LITERAL">NULL</TT>的时候。
现在协商该计算以确定该数组元素类型。</P></LI><LI><P> 使得<ACRONYM CLASS="ACRONYM">SQL</ACRONYM>语法<TT CLASS="TYPE">ARRAY</TT>尺寸可选以匹配<ACRONYM CLASS="ACRONYM">SQL</ACRONYM>标准(Peter)</P></LI><LI><P> 添加<CODE CLASS="FUNCTION">array_ndims()</CODE>以返回数组维数(Robert Haas)</P></LI><LI><P> 添加<CODE CLASS="FUNCTION">array_length()</CODE>以返回指定维数数组长度(Jim Nasby, Robert Haas, Peter Eisentraut)</P></LI><LI><P> 添加聚集函数<CODE CLASS="FUNCTION">array_agg()</CODE>作为一个数组返回所有聚集值(Robert Haas,Jeff Davis, Peter)</P></LI><LI><P> 添加<CODE CLASS="FUNCTION">unnest()</CODE>将一个数组转换为各行值(Tom)</P><P> 这是<CODE CLASS="FUNCTION">array_agg()</CODE>的反面。</P></LI><LI><P> 添加<CODE CLASS="FUNCTION">array_fill()</CODE>以创建初始化值数组(Pavel Stehule)</P></LI><LI><P> 添加<CODE CLASS="FUNCTION">generate_subscripts()</CODE>以简化生成数组下标范围(Pavel Stehule)</P></LI></UL></DIV><DIV CLASS="SECT4"><H4 CLASS="SECT4"><A NAME="AEN126258">E.53.3.6.3. 宽值存储(<ACRONYM CLASS="ACRONYM">TOAST</ACRONYM>)</A></H4><P></P><UL><LI><P> 认为<ACRONYM CLASS="ACRONYM">TOAST</ACRONYM>压缩值和32字节一样短（之前256字节）(Greg Stark)</P></LI><LI><P> 使用<ACRONYM CLASS="ACRONYM">TOAST</ACRONYM>压缩之前要求最低25％的空间节省，（之前20％为小值并且任何存储为大值）(Greg)</P></LI><LI><P> 优化具有较大和较小toastable字段混合行的<ACRONYM CLASS="ACRONYM">TOAST</ACRONYM>启发式，
使我们更愿意使得较大值超出范围并且不压缩较小值(Greg, Tom)</P></LI></UL></DIV></DIV><DIV CLASS="SECT3"><H3 CLASS="SECT3"><A NAME="AEN126271">E.53.3.7. 函数</A></H3><P></P><UL><LI><P> <CODE CLASS="FUNCTION">setseed()</CODE>文件允许从<TT CLASS="LITERAL">-1</TT>到<TT CLASS="LITERAL">1</TT>的值（不只是<TT CLASS="LITERAL">0</TT>到<TT CLASS="LITERAL">1</TT>），
并且执行有效范围(Kris Jurka)</P></LI><LI><P> 添加服务器端函数<CODE CLASS="FUNCTION">lo_import(filename, oid)</CODE>(Tatsuo)</P></LI><LI><P> 添加<CODE CLASS="FUNCTION">quote_nullable()</CODE>其操作类似于
<CODE CLASS="FUNCTION">quote_literal()</CODE>但为空参数返回字符串<TT CLASS="LITERAL">NULL</TT>(Brendan Jurd)</P></LI><LI><P> 优化全文本搜索<CODE CLASS="FUNCTION">headline()</CODE>函数以允许提取文本若干片段(Sushant Sinha)</P></LI><LI><P> 添加<CODE CLASS="FUNCTION">suppress_redundant_updates_trigger()</CODE>触发器函数以避免
无数据变化更新开销(Andrew)</P></LI><LI><P> 添加<CODE CLASS="FUNCTION">div(numeric, numeric)</CODE>执行<TT CLASS="TYPE">numeric</TT>除法而没有四舍五入(Tom)</P></LI><LI><P> 添加<CODE CLASS="FUNCTION">generate_series()</CODE>的<TT CLASS="TYPE">timestamp</TT>和<TT CLASS="TYPE">timestamptz</TT>版本(Hitoshi Harada)</P></LI></UL><DIV CLASS="SECT4"><H4 CLASS="SECT4"><A NAME="AEN126304">E.53.3.7.1. 对象信息函数</A></H4><P></P><UL><LI><P> 通过需要知道当前正在运行的查询的函数实现<CODE CLASS="FUNCTION">current_query()</CODE>的使用(Tomas Doran)</P></LI><LI><P> 添加<CODE CLASS="FUNCTION">pg_get_keywords()</CODE>返回解析关键字列表(Dave Page)</P></LI><LI><P> 添加<CODE CLASS="FUNCTION">pg_get_functiondef()</CODE>查看函数的定义(Abhijit Menon-Sen)</P></LI><LI><P> 当解析不包含变量的表达式时，允许<CODE CLASS="FUNCTION">pg_get_expr()</CODE>第二个参数为零(Tom)</P></LI><LI><P> 修改<CODE CLASS="FUNCTION">pg_relation_size()</CODE>以使用<TT CLASS="LITERAL">regclass</TT>(Heikki)</P><P> <CODE CLASS="FUNCTION">pg_relation_size(data_type_name)</CODE>不再起作用。</P></LI><LI><P> 添加<TT CLASS="LITERAL">boot_val</TT>和<TT CLASS="LITERAL">reset_val</TT>列到<TT CLASS="LITERAL">pg_settings</TT>输出(Greg Smith)</P></LI><LI><P> 为配置文件中变量设置添加源文件名和行号列到<TT CLASS="LITERAL">pg_settings</TT>输出(Magnus, Alvaro)</P><P> 出于安全原因，这些列只对超级用户可见。</P></LI><LI><P> 添加支持<TT CLASS="VARNAME">CURRENT_CATALOG</TT>,<TT CLASS="VARNAME">CURRENT_SCHEMA</TT>, <TT CLASS="VARNAME">SET CATALOG</TT>,
<TT CLASS="VARNAME">SET SCHEMA</TT>(Peter)</P><P> 为存在特性提供<ACRONYM CLASS="ACRONYM">SQL</ACRONYM>标准语法。</P></LI><LI><P> 添加<CODE CLASS="FUNCTION">pg_typeof()</CODE>返回任何值的数据类型(Brendan Jurd)</P></LI><LI><P> 采取<CODE CLASS="FUNCTION">version()</CODE>返回有关服务器是否是32或者64位二进制信息(Bruce)</P></LI><LI><P> 修复信息模式列<TT CLASS="STRUCTFIELD">is_insertable_into</TT>和<TT CLASS="STRUCTFIELD">is_updatable</TT>操作是一致的(Peter)</P></LI><LI><P> 改善信息模式<TT CLASS="STRUCTFIELD">datetime_precision</TT>列的操作(Peter) </P><P>这些列为<TT CLASS="TYPE">date</TT>列显示为零并且<TT CLASS="TYPE">time</TT>，<TT CLASS="TYPE">timestamp</TT>以及
没有声明精度的<TT CLASS="TYPE">interval</TT>显示为6（默认精度），而不如以前一样显示为空。</P></LI><LI><P> 转换剩余内置集合返回函数使用<TT CLASS="LITERAL">OUT</TT>参数(Jaime Casanova)</P><P> 这使得它可以调用没有指定列表的函数：<CODE CLASS="FUNCTION">pg_show_all_settings()</CODE>,
<CODE CLASS="FUNCTION">pg_lock_status()</CODE>, <CODE CLASS="FUNCTION">pg_prepared_xact()</CODE>,
<CODE CLASS="FUNCTION">pg_prepared_statement()</CODE>, <CODE CLASS="FUNCTION">pg_cursor()</CODE></P></LI><LI><P> 采用<CODE CLASS="FUNCTION">pg_*_is_visible()</CODE>和<CODE CLASS="FUNCTION">has_*_privilege()</CODE>为无效OID返回<TT CLASS="LITERAL">NULL</TT>，而不是抛出错误(Tom)</P></LI><LI><P> 扩展<CODE CLASS="FUNCTION">has_*_privilege()</CODE>函数以允许查询一个调用中多特权的OR(Stephen Frost, Tom)</P></LI><LI><P> 添加<CODE CLASS="FUNCTION">has_column_privilege()</CODE>和<CODE CLASS="FUNCTION">has_any_column_privilege()</CODE>函数(Stephen Frost, Tom)</P></LI></UL></DIV><DIV CLASS="SECT4"><H4 CLASS="SECT4"><A NAME="AEN126381">E.53.3.7.2. 函数创建</A></H4><P></P><UL><LI><P> 支持可变参数的函数（带有参数可变数量的函数）(Pavel Stehule)</P><P> 只有尾随参数是可选的，它们都必须是相同的数据类型。</P></LI><LI><P> 支持函数参数的缺省值(Pavel Stehule)</P></LI><LI><P> 添加<TT CLASS="COMMAND">CREATE FUNCTION ... RETURNS TABLE</TT>子句(Pavel Stehule)</P></LI><LI><P> 允许<ACRONYM CLASS="ACRONYM">SQL</ACRONYM>语言函数返回<TT CLASS="COMMAND">INSERT</TT>/<TT CLASS="COMMAND">UPDATE</TT>/<TT CLASS="COMMAND">DELETE</TT>
<TT CLASS="LITERAL">RETURNING</TT>子句的输出(Tom)</P></LI></UL></DIV><DIV CLASS="SECT4"><H4 CLASS="SECT4"><A NAME="AEN126399">E.53.3.7.3. PL/pgSQL服务器端语言</A></H4><P></P><UL><LI><P> 为了更容易地将数据值插入到动态查询字符串中支持<TT CLASS="LITERAL">EXECUTE USING</TT>(Pavel Stehule)</P></LI><LI><P> 允许循环使用<TT CLASS="LITERAL">FOR</TT>循环游标结果(Pavel Stehule)</P></LI><LI><P> 支持<TT CLASS="LITERAL">RETURN QUERY EXECUTE</TT> (Pavel Stehule)</P></LI><LI><P>
优化<TT CLASS="LITERAL">RAISE</TT>命令(Pavel Stehule)
<P></P></P><UL><LI><P>
支持<TT CLASS="LITERAL">DETAIL</TT>和<TT CLASS="LITERAL">HINT</TT>字段
</P></LI><LI><P> 支持<TT CLASS="LITERAL">SQLSTATE</TT>错误代码规范</P></LI><LI><P> 支持异常名字参数</P></LI><LI><P> 允许异常块中无参数<TT CLASS="LITERAL">RAISE</TT>重新抛出当前错误</P></LI></UL><P>
</P></LI><LI><P> 允许<TT CLASS="LITERAL">EXCEPTION</TT>列表中<TT CLASS="VARNAME">SQLSTATE</TT>代码规范(Pavel Stehule)</P><P> 这对于处理自定义<TT CLASS="VARNAME">SQLSTATE</TT>代码非常有用。</P></LI><LI><P> 支持<TT CLASS="LITERAL">CASE</TT>语句(Pavel Stehule)</P></LI><LI><P> 使用<TT CLASS="COMMAND">RETURN QUERY</TT>设置特殊的<TT CLASS="LITERAL">FOUND</TT>和
<TT CLASS="COMMAND">GET DIAGNOSTICS</TT> <TT CLASS="LITERAL">ROW_COUNT</TT>变量(Pavel Stehule)</P></LI><LI><P> 使用<TT CLASS="COMMAND">FETCH</TT>和<TT CLASS="COMMAND">MOVE</TT>设置
<TT CLASS="COMMAND">GET DIAGNOSTICS</TT> <TT CLASS="LITERAL">ROW_COUNT</TT>变量(Andrew Gierth)</P></LI><LI><P> 使用没有标签的<TT CLASS="COMMAND">EXIT</TT>总是退出最内层循环(Tom)</P><P> 之前，如果有一个<TT CLASS="LITERAL">BEGIN</TT>块比任何环路更加紧密的嵌套，
将退出该块。新的操作匹配Oracle(TM)并且也正如通过自身文档所讲述的。</P></LI><LI><P> 使得字符串文本处理和嵌套块注释匹配主SQL解析器的处理(Tom)</P><P> 特别是，在<TT CLASS="COMMAND">RAISE</TT>中格式字符串执行与任何其他字符串文本一样的操作，
包含从属于<TT CLASS="VARNAME">standard_conforming_strings</TT>。当<TT CLASS="VARNAME">standard_conforming_strings</TT>为on的时候，
这种变化也修复了有效命令失败的情况。
</P></LI><LI><P> 当在不同异常块嵌套深度中调用同一函数的时候，避免内存泄露(Tom)</P></LI></UL></DIV></DIV><DIV CLASS="SECT3"><H3 CLASS="SECT3"><A NAME="AEN126461">E.53.3.8. 客户端应用</A></H3><P></P><UL><LI><P> 修复<TT CLASS="LITERAL">pg_ctl restart</TT>保存命令行参数(Bruce)</P></LI><LI><P> 添加<TT CLASS="LITERAL">-w</TT>/<TT CLASS="LITERAL">--no-password</TT>选项防止在具有<TT CLASS="LITERAL">-W</TT>/<TT CLASS="LITERAL">--password</TT>
选项实用程序中的密码提示(Peter)</P></LI><LI><P> 删除<SPAN CLASS="APPLICATION">createdb</SPAN>,
<SPAN CLASS="APPLICATION">createuser</SPAN>, <SPAN CLASS="APPLICATION">dropdb</SPAN>,
<SPAN CLASS="APPLICATION">dropuser</SPAN>中的<TT CLASS="OPTION">-q</TT> (默默的)选项(Peter)</P><P> 这些选项不起作用因为<SPAN CLASS="PRODUCTNAME">PostgreSQL</SPAN> 8.3。</P></LI></UL><DIV CLASS="SECT4"><H4 CLASS="SECT4"><A NAME="AEN126482">E.53.3.8.1. <SPAN CLASS="APPLICATION">psql</SPAN></A></H4><P></P><UL><LI><P> 删除详细的启动标志，目前建议<TT CLASS="LITERAL">help</TT>(Joshua Drake)</P></LI><LI><P> 使用<TT CLASS="LITERAL">help</TT>显示常见的反斜杠命令(Greg Sabino Mullane)</P></LI><LI><P> 添加<TT CLASS="LITERAL">\pset格式包</TT>模式来包装输出到屏幕宽度，
或者文件/管道输出，如果设置<TT CLASS="LITERAL">\pset列</TT>(Bryce Nesbitt)</P></LI><LI><P> 允许<TT CLASS="COMMAND">\pset</TT>中布尔值的所有支持的拼写，而不仅仅<TT CLASS="LITERAL">on</TT>和<TT CLASS="LITERAL">off</TT> (Bruce)</P><P> 之前，除了<SPAN CLASS="QUOTE">"off"</SPAN>外的任何字符串默默地认为<TT CLASS="LITERAL">true</TT>。
<SPAN CLASS="APPLICATION">psql</SPAN>抱怨无法识别的拼写（但是仍然认为<TT CLASS="LITERAL">true</TT>）。 </P></LI><LI><P> 使用宽输出分页程序(Bruce)</P></LI><LI><P> 在一个字母反斜杠命令和它的第一个参数之间需要一个空格(Bernd Helmle)</P><P> 这消除了有歧义的历史渊源。</P></LI><LI><P> 改善标签完整支持模式修饰以及带引号标识符(Greg Sabino Mullane) </P></LI><LI><P> 为<TT CLASS="COMMAND">\timing</TT>添加可选的<TT CLASS="LITERAL">on</TT>/<TT CLASS="LITERAL">off</TT>参数(David Fetter)</P></LI><LI><P> 显示多行上的访问控制权(Brendan Jurd, Andreas Scherbaum)</P></LI><LI><P> 使用<TT CLASS="COMMAND">\l</TT>显示数据库访问权限(Andrew Gilligan)</P></LI><LI><P> 使用<TT CLASS="COMMAND">\l+</TT>显示数据库大小，如果权限允许(Andrew Gilligan)</P></LI><LI><P> 添加<TT CLASS="COMMAND">\ef</TT>命令编辑函数定义(Abhijit Menon-Sen)</P></LI></UL></DIV><DIV CLASS="SECT4"><H4 CLASS="SECT4"><A NAME="AEN126529">E.53.3.8.2. <SPAN CLASS="APPLICATION">psql</SPAN> \d* 命令</A></H4><P></P><UL><LI><P> 使得没有模式参数的<TT CLASS="COMMAND">\d*</TT>命令显示系统对象，
只有当指定<TT CLASS="LITERAL">S</TT>修饰语的时候(Greg Sabino Mullane, Bruce)</P><P> 前者操作与<TT CLASS="COMMAND">\d</TT>不同形式不一致，并且在大多数情况下它没有提供简单方法查看
用户对象。</P></LI><LI><P> 完善与旧的<SPAN CLASS="PRODUCTNAME">PostgreSQL</SPAN>服务器版本一起执行（追溯到7.4）的<TT CLASS="COMMAND">\d*</TT>命令，
而不仅仅是当前服务器版本(Guillaume Lelarge)</P></LI><LI><P> 使用<TT CLASS="COMMAND">\d</TT>显示引用已选择表的外键约束(Kenneth D'Souza)</P></LI><LI><P> 在序列上使用<TT CLASS="COMMAND">\d</TT>显示列值(Euler Taveira de Oliveira)</P></LI><LI><P> 添加列存储类型和其他关系选项到<TT CLASS="COMMAND">\d+</TT>显示中(Gregory Stark, Euler Taveira de Oliveira)</P></LI><LI><P> 显示<TT CLASS="COMMAND">\dt+</TT>输出中关系大小(Dickson S. Guedes)</P></LI><LI><P> 显示<TT CLASS="COMMAND">\dT+</TT>中<TT CLASS="LITERAL">enum</TT>类型可能值(David Fetter)</P></LI><LI><P> 允许<TT CLASS="COMMAND">\dC</TT>接受通配符模式，这可以匹配涉及到投射的数据类型(Tom)</P></LI><LI><P> 添加函数类型列到<TT CLASS="COMMAND">\df</TT>的输出，并且添加选项只列出函数所选类型(David Fetter)</P></LI><LI><P> <TT CLASS="COMMAND">\df</TT>不隐藏使用或者返回类型<TT CLASS="TYPE">cstring</TT>的函数(Tom)</P><P> 此前，这种函数被隐藏，因为他们大多是数据类型I/O函数，这被认为是没有意义的。
默认情况下有关隐藏系统函数的新策略使得该缺点不必要的。 </P></LI></UL></DIV><DIV CLASS="SECT4"><H4 CLASS="SECT4"><A NAME="AEN126570">E.53.3.8.3. <SPAN CLASS="APPLICATION">pg_dump</SPAN></A></H4><P></P><UL><LI><P> 添加<TT CLASS="LITERAL">--no-tablespaces</TT>选项到<SPAN CLASS="APPLICATION">pg_dump</SPAN>/<SPAN CLASS="APPLICATION">pg_dumpall</SPAN>/<SPAN CLASS="APPLICATION">pg_restore</SPAN>
这样转储可以恢复到具有非匹配表空间层次的集群中(Gavin Roy)</P></LI><LI><P> 从<SPAN CLASS="APPLICATION">pg_dump</SPAN>和<SPAN CLASS="APPLICATION">pg_dumpall</SPAN>中删除<TT CLASS="OPTION">-d</TT>和<TT CLASS="OPTION">-D</TT>选项(Tom) </P><P> 这些选项不应该过于频繁地与在其它<SPAN CLASS="PRODUCTNAME">PostgreSQL</SPAN>客户端应用程序中选择数据库名称的选项混淆。
该功能仍然可用，
但你现在必须拼写出长选项名称<TT CLASS="OPTION">--inserts</TT>或者<TT CLASS="OPTION">--column-inserts</TT>。&#13;</P></LI><LI><P> 从<SPAN CLASS="APPLICATION">pg_dump</SPAN>和<SPAN CLASS="APPLICATION">pg_dumpall</SPAN>中删除<TT CLASS="OPTION">-i</TT>/<TT CLASS="OPTION">--ignore-version</TT>选项(Tom)</P><P> 使用此选项不会抛出一个错误，但它没有效果。
该选项被移除，因为版本检查对安全性是必要的。</P></LI><LI><P> 在转储和恢复中禁用<TT CLASS="VARNAME">statement_timeout</TT>(Joshua Drake) </P></LI><LI><P> 添加<SPAN CLASS="APPLICATION">pg_dump</SPAN>/<SPAN CLASS="APPLICATION">pg_dumpall</SPAN>选项<TT CLASS="OPTION">--lock-wait-timeout</TT> (David Gould)</P><P> 如果在指定时间内无法获取共享锁，那么转储失败。</P></LI><LI><P> 重新排序<SPAN CLASS="APPLICATION">pg_dump</SPAN> <TT CLASS="LITERAL">--data-only</TT>输出
用来转储在引用表之前通过外键参考的表(Tom) </P><P> 当外键存在的时候，允许数据加载。如果循环引用采用一个不可能的安全排序，
发出<TT CLASS="LITERAL">NOTICE</TT>。 </P></LI><LI><P> 允许<SPAN CLASS="APPLICATION">pg_dump</SPAN>, <SPAN CLASS="APPLICATION">pg_dumpall</SPAN>和<SPAN CLASS="APPLICATION">pg_restore</SPAN>使用指定用户(Benedek L&aacute;szl&oacute;)</P></LI><LI><P> 允许<SPAN CLASS="APPLICATION">pg_restore</SPAN>使用多个并发连接执行恢复(Andrew)</P><P> 通过选项<TT CLASS="LITERAL">--jobs</TT>来控制连接数。这仅仅支持自定义格式归档。</P></LI></UL></DIV></DIV><DIV CLASS="SECT3"><H3 CLASS="SECT3"><A NAME="AEN126622">E.53.3.9. 编程工具</A></H3><DIV CLASS="SECT4"><H4 CLASS="SECT4"><A NAME="AEN126624">E.53.3.9.1. <SPAN CLASS="APPLICATION">libpq</SPAN></A></H4><P></P><UL><LI><P> 当通过新函数<CODE CLASS="FUNCTION">lo_import_with_oid()</CODE>导入大对象的时候，允许指定<TT CLASS="TYPE">OID</TT>(Tatsuo)</P></LI><LI><P> 添加<SPAN CLASS="QUOTE">"events"</SPAN>支持(Andrew Chernow, Merlin Moncure)</P><P> 这添加了注册回调能力来管理联系<TT CLASS="STRUCTNAME">PGconn</TT>和<TT CLASS="STRUCTNAME">PGresult</TT>对象的私有数据。</P></LI><LI><P> 优化错误处理以允许多个错误信息的返回作为多行错误报告(Magnus)</P></LI><LI><P> 采用<CODE CLASS="FUNCTION">PQexecParams()</CODE>和相关函数为空查询返回<TT CLASS="VARNAME">PGRES_EMPTY_QUERY</TT>(Tom)</P><P> 之前返回<TT CLASS="VARNAME">PGRES_COMMAND_OK</TT>。</P></LI><LI><P> 记录Windows上如何避免<CODE CLASS="FUNCTION">WSACleanup()</CODE>的开销(Andrew Chernow)</P></LI><LI><P> 不依赖于Kerberos来决定缺省数据库用户名(Magnus)</P><P> 之前，libpq的Kerberos编译将使用从任何可用的Kerberos标签作为缺省数据库用户名的主体名称，
即使连接没有使用Kerberos认证。
这被认为是不一致而且混乱的。
有或没有Kerberos同样的方式决定缺省用户名。
然而，当使用Kerberos身份验证的时候，需要注意的是数据库用户名必须匹配该标签。 </P></LI></UL></DIV><DIV CLASS="SECT4"><H4 CLASS="SECT4"><A NAME="AEN126652">E.53.3.9.2. <SPAN CLASS="APPLICATION">libpq</SPAN> <ACRONYM CLASS="ACRONYM">SSL</ACRONYM> (安全套接层)支持</A></H4><P></P><UL><LI><P> 修复<ACRONYM CLASS="ACRONYM">SSL</ACRONYM>连接的证书验证(Magnus)</P><P> <SPAN CLASS="APPLICATION">libpq</SPAN>现在支持验证两种证书
和<ACRONYM CLASS="ACRONYM">SSL</ACRONYM>连接时服务器的名称。
如果根证书不可用于验证，那么<ACRONYM CLASS="ACRONYM">SSL</ACRONYM>连接失败。
<TT CLASS="LITERAL">sslmode</TT>参数用于启用证书验证，并设置检查水平。
默认值还没有做任何验证，允许连接到不需要客户端根证书的SSL启用服务器中。
????????</P></LI><LI><P> 支持通配符服务器证书(Magnus)</P><P> 如果证书<ACRONYM CLASS="ACRONYM">CN</ACRONYM>以<TT CLASS="LITERAL">*</TT>开头，它将被视为一个通配符，当匹配hostname的时候，
允许多个服务器同一证书的使用。</P></LI><LI><P> 允许文件位置指定客户端证书(Mark Woodward, Alvaro, Magnus) </P></LI><LI><P> 增加<CODE CLASS="FUNCTION">PQinitOpenSSL</CODE>函数允许更大控制OpenSSL/libcrypto初始化(Andrew Chernow)</P></LI><LI><P> 当没有数据库连接保持打开的时候，
使用<SPAN CLASS="APPLICATION">libpq</SPAN>注销它的<SPAN CLASS="APPLICATION">OpenSSL</SPAN>回调(Bruce, Magnus, Russell Smith)</P><P> 卸载libpq库的应用程序是必须的，否则无效的<SPAN CLASS="APPLICATION">OpenSSL</SPAN>回调将保持不变。</P></LI></UL></DIV><DIV CLASS="SECT4"><H4 CLASS="SECT4"><A NAME="AEN126681">E.53.3.9.3. <SPAN CLASS="APPLICATION">ecpg</SPAN></A></H4><P></P><UL><LI><P> 添加信息本地化支持(Euler Taveira de Oliveira)</P></LI><LI><P> 从服务器解析器自动生成ecpg解析器(Michael)</P><P>
之前ecpg解析器手动维护。</P></LI></UL></DIV><DIV CLASS="SECT4"><H4 CLASS="SECT4"><A NAME="AEN126690">E.53.3.9.4. 服务器编程接口(<ACRONYM CLASS="ACRONYM">SPI</ACRONYM>)</A></H4><P></P><UL><LI><P> 添加超出行参数的单一使用规划(Tom)</P></LI><LI><P> 添加新的<TT CLASS="VARNAME">SPI_OK_REWRITTEN</TT>返回<CODE CLASS="FUNCTION">SPI_execute()</CODE>代码(Heikki)</P><P> 当命令被重写为命令的另一种类型的时候使用它。</P></LI><LI><P> 从<TT CLASS="FILENAME">executor/spi.h</TT>中删除不必要内含物(Tom)</P><P> 如果它们依赖<TT CLASS="FILENAME">spi.h</TT>包含它们需要的东西，
SPI使用模块可能需要添加一些<TT CLASS="LITERAL">#include</TT>行。
</P></LI></UL></DIV></DIV><DIV CLASS="SECT3"><H3 CLASS="SECT3"><A NAME="AEN126707">E.53.3.10. 编译选项</A></H3><P></P><UL><LI><P> 使用<SPAN CLASS="PRODUCTNAME">Autoconf</SPAN> 2.61更新编译系统(Peter)</P></LI><LI><P> 源码编译需要<SPAN CLASS="PRODUCTNAME">GNU bison</SPAN>(Peter) </P><P> 这个有效的使用了许多年，但是现在没有基础设施声明支持其它解析工具。</P></LI><LI><P> 添加<SPAN CLASS="APPLICATION">pg_config</SPAN> <TT CLASS="LITERAL">--htmldir</TT>选项(Peter)</P></LI><LI><P> 通过内部服务器传递<TT CLASS="TYPE">float4</TT>值(Zoltan Boszormenyi) </P><P> 添加<SPAN CLASS="APPLICATION">configure</SPAN>选项<TT CLASS="LITERAL">--disable-float4-byval</TT>以使用旧操作。
使用旧式（版本0）的外部C函数调用约定
并通过这个改变打破传递或者返回<TT CLASS="TYPE">float4</TT>值，
如果你具有这样的函数，并且不想更新它们，
所以你可能需要<SPAN CLASS="APPLICATION">configure</SPAN>选项。 </P></LI><LI><P> 通过64位平台上内部服务器传递<TT CLASS="TYPE">float8</TT>, <TT CLASS="TYPE">int8</TT>和相关数据类型值(Zoltan Boszormenyi) </P><P> 添加<SPAN CLASS="APPLICATION">configure</SPAN>选项<TT CLASS="LITERAL">--disable-float8-byval</TT>用来使用旧的操作。如上所述，
该变化可能打破旧形式外部C函数。</P></LI><LI><P> 添加配置选项<TT CLASS="LITERAL">--with-segsize</TT>,
<TT CLASS="LITERAL">--with-blocksize</TT>, <TT CLASS="LITERAL">--with-wal-blocksize</TT>,
<TT CLASS="LITERAL">--with-wal-segsize</TT> (Zdenek Kotala, Tom)</P><P> 这简化了编译时控制之前只能通过编辑<TT CLASS="FILENAME">pg_config_manual.h</TT>来改变的几个常数。</P></LI><LI><P>允许在<SPAN CLASS="PRODUCTNAME">Solaris</SPAN> 2.5上线程编译(Bruce)</P></LI><LI><P> 在<SPAN CLASS="PRODUCTNAME">Solaris</SPAN>上使用系统的<CODE CLASS="FUNCTION">getopt_long()</CODE>(Zdenek Kotala, Tom)</P><P> 这使得选项处理与Solaris用户期望的更加一致。</P></LI><LI><P> 添加<SPAN CLASS="PRODUCTNAME">Linux</SPAN>上<SPAN CLASS="PRODUCTNAME">Sun Studio</SPAN>编译器支持(Julius Stroffek)</P></LI><LI><P>追加主版本号到后端<SPAN CLASS="APPLICATION">gettext</SPAN>域，而<TT CLASS="LITERAL">soname</TT>主版本号
到库的<SPAN CLASS="APPLICATION">gettext</SPAN>域(Peter)</P><P> 这简化了多个版本并行安装。</P></LI><LI><P> 允许支持<SPAN CLASS="APPLICATION">gcov</SPAN>代码覆盖测试(Michelle Caisse)</P></LI><LI><P> 允许在<SPAN CLASS="PRODUCTNAME">Mingw</SPAN>和<SPAN CLASS="PRODUCTNAME">Cygwin</SPAN>上树外编译(Richard Evans)</P></LI><LI><P> 修复作为交叉编译源平台<SPAN CLASS="PRODUCTNAME">Mingw</SPAN>的使用(Peter)</P></LI></UL></DIV><DIV CLASS="SECT3"><H3 CLASS="SECT3"><A NAME="AEN126772">E.53.3.11. 源代码</A></H3><P></P><UL><LI><P> 支持64位时区数据文件(Heikki)</P><P> 这添加支持超出2038年夏令时(<ACRONYM CLASS="ACRONYM">DST</ACRONYM>)计算。</P></LI><LI><P> 不赞成平台的<TT CLASS="TYPE">time_t</TT>数据类型的使用(Tom)</P><P>有些平台已经迁移到64位<TT CLASS="TYPE">time_t</TT>，
有些不能，Windows无法下定决心它在做什么。
定义<TT CLASS="TYPE">pg_time_t</TT>和<TT CLASS="TYPE">time_t</TT>具有相同的含义，
但始终是64位（除非该平台不具有64位整数类型），
并且使用所有模块API中的类型和磁盘上的数据格式。</P></LI><LI><P> 当交叉编译的时候，修复时区数据库处理中错误(Richard Evans)</P></LI><LI><P> 在一个步骤中连接后端对象文件，而不是一个阶段中(Peter)</P></LI><LI><P> 完善<SPAN CLASS="APPLICATION">gettext</SPAN>支持以便复数的更好转化(Peter)</P></LI><LI><P> 添加PL语言的信息翻译支持(Alvaro, Peter)</P></LI><LI><P> 添加更多<SPAN CLASS="APPLICATION">DTrace</SPAN>探测(Robert Lor)</P></LI><LI><P> 启用<SPAN CLASS="APPLICATION">Mac OS X Leopard</SPAN>以及其它非Solaris平台上的<SPAN CLASS="APPLICATION">DTrace</SPAN>支持(Robert Lor) </P></LI><LI><P> 简化并且标准化C字符串和<TT CLASS="TYPE">text</TT>数据之间转换，出于此目的提供普通函数(Brendan Jurd, Tom)</P></LI><LI><P> 清理<TT CLASS="FILENAME">include/catalog/</TT>头文件以致于前端程序包含它们而不包含<TT CLASS="FILENAME">postgres.h</TT>(Zdenek Kotala)</P></LI><LI><P> 采取<TT CLASS="TYPE">name</TT>字符对齐，并且抑制索引中<TT CLASS="TYPE">name</TT>项的零填充(Tom)</P></LI><LI><P> 如果动态加载代码执行<CODE CLASS="FUNCTION">exit()</CODE>更好恢复(Tom)</P></LI><LI><P> 添加连接让插件监控执行者(Itagaki Takahiro)</P></LI><LI><P> 添加连接允许规划器的统计查找操作被覆盖(Simon Riggs)</P></LI><LI><P> 为自定义共享内存需求添加<CODE CLASS="FUNCTION">shmem_startup_hook()</CODE>(Tom)</P></LI><LI><P> 使用<CODE CLASS="FUNCTION">amgetbitmap</CODE>替换索引访问方法<CODE CLASS="FUNCTION">amgetmulti</CODE>切入点，
并且为<CODE CLASS="FUNCTION">amgettuple</CODE>扩展API可以支持操作符丢失的运行时计算(Heikki, Tom, Teodor) </P><P> 为GIN和GiST opclass <CODE CLASS="FUNCTION">consistent</CODE>函数的API已经被扩展。</P></LI><LI><P> 添加支持<ACRONYM CLASS="ACRONYM">GIN</ACRONYM>索引中局部匹配搜索(Teodor Sigaev, Oleg Bartunov)</P></LI><LI><P> 使用布尔<TT CLASS="STRUCTFIELD">relhastriggers</TT>替换<TT CLASS="STRUCTNAME">pg_class</TT>列<TT CLASS="STRUCTFIELD">reltriggers</TT>(Simon) </P><P> 同时删除未使用的<TT CLASS="STRUCTNAME">pg_class</TT>列
<TT CLASS="STRUCTFIELD">relukeys</TT>, <TT CLASS="STRUCTFIELD">relfkeys</TT>和
<TT CLASS="STRUCTFIELD">relrefs</TT>。</P></LI><LI><P> 添加<TT CLASS="STRUCTFIELD">relistemp</TT>列到<TT CLASS="STRUCTNAME">pg_class</TT>解除临时表识别(Tom)</P></LI><LI><P> 将平台<ACRONYM CLASS="ACRONYM">FAQ</ACRONYM>放到主文档中(Peter)</P></LI><LI><P> 防止解析器输入文件编译冲突(Peter)</P></LI><LI><P> 添加<TT CLASS="LITERAL">KOI8U</TT> (Ukrainian)编码(Peter) </P></LI><LI><P> 添加Japanese信息转化(Japan PostgreSQL用户组)</P><P> 这用于作为单一项目被维护。</P></LI><LI><P> 当在<SPAN CLASS="APPLICATION">MSVC</SPAN>编译系统上设置<TT CLASS="VARNAME">LC_MESSAGES</TT>的时候，
修复该问题(Hiroshi Inoue, Hiroshi Saito, Magnus)</P></LI></UL></DIV><DIV CLASS="SECT3"><H3 CLASS="SECT3"><A NAME="AEN126862">E.53.3.12. Contrib</A></H3><P></P><UL><LI><P> 添加<TT CLASS="FILENAME">contrib/auto_explain</TT>在查询超过指定时间上自动运行<TT CLASS="COMMAND">EXPLAIN</TT>(Itagaki Takahiro, Tom)</P></LI><LI><P> 添加<TT CLASS="FILENAME">contrib/btree_gin</TT>允许GIN索引处理更多数据类型(Oleg, Teodor)</P></LI><LI><P> 添加<TT CLASS="FILENAME">contrib/citext</TT>提供不区分大小写，多字节文本数据类型(David Wheeler)</P></LI><LI><P> 为语句执行统计的服务器范围追踪添加<TT CLASS="FILENAME">contrib/pg_stat_statements</TT>(Itagaki Takahiro)</P></LI><LI><P> 添加时间和查询模式选项到<TT CLASS="FILENAME">contrib/pgbench</TT>(Itagaki Takahiro)</P></LI><LI><P> <TT CLASS="FILENAME">contrib/pgbench</TT>使用表名<TT CLASS="STRUCTNAME">pgbench_accounts</TT>, <TT CLASS="STRUCTNAME">pgbench_branches</TT>,
<TT CLASS="STRUCTNAME">pgbench_history</TT>和<TT CLASS="STRUCTNAME">pgbench_tellers</TT>,
而不仅仅<TT CLASS="STRUCTNAME">accounts</TT>, <TT CLASS="STRUCTNAME">branches</TT>,
<TT CLASS="STRUCTNAME">history</TT>和<TT CLASS="STRUCTNAME">tellers</TT> (Tom)</P><P> 通过运行<SPAN CLASS="APPLICATION">pgbench</SPAN>以降低意外破坏真实数据的风险。</P></LI><LI><P> 修复<TT CLASS="FILENAME">contrib/pgstattuple</TT>处理表和超过20亿页面的索引(Tatsuhito Kasahara)</P></LI><LI><P> 在<TT CLASS="FILENAME">contrib/fuzzystrmatch</TT>中，添加Levenshtein字符串距离函数版本允许
用户声明插入，删除和替换成本(Volkan Yazici) </P></LI><LI><P> 采用<TT CLASS="FILENAME">contrib/ltree</TT>支持多字节编码(laser)</P></LI><LI><P> 启用<TT CLASS="FILENAME">contrib/dblink</TT>使用存储在SQL/MED目录中的连接信息(Joe Conway)</P></LI><LI><P> 完善来自远程服务器错误的<TT CLASS="FILENAME">contrib/dblink</TT>的报告(Joe Conway)</P></LI><LI><P> 使用<TT CLASS="FILENAME">contrib/dblink</TT>设置<TT CLASS="VARNAME">client_encoding</TT>以
匹配本地数据库的编码(Joe Conway)</P><P> 当与使用不同编码的远程数据库通信时，这可以避免编码问题。</P></LI><LI><P> 确保<TT CLASS="FILENAME">contrib/dblink</TT>使用用户提供的密码，
并且不是意外地采取服务器的<TT CLASS="FILENAME">.pgpass</TT>文件(Joe Conway)&#13;</P><P> 有一个小的安全增强功能。</P></LI><LI><P> 添加<CODE CLASS="FUNCTION">fsm_page_contents()</CODE>到<TT CLASS="FILENAME">contrib/pageinspect</TT> (Heikki)</P></LI><LI><P> 修改<CODE CLASS="FUNCTION">get_raw_page()</CODE>支持自由空间映射(<TT CLASS="FILENAME">*_fsm</TT>)文件。
同时更新<TT CLASS="FILENAME">contrib/pg_freespacemap</TT>。</P></LI><LI><P> 添加支持多字节编码到<TT CLASS="FILENAME">contrib/pg_trgm</TT>(Teodor)</P></LI><LI><P> 改写<TT CLASS="FILENAME">contrib/intagg</TT>使用新的函数<CODE CLASS="FUNCTION">array_agg()</CODE>和<CODE CLASS="FUNCTION">unnest()</CODE>(Tom)</P></LI><LI><P> 故障转移之前使用<TT CLASS="FILENAME">contrib/pg_standby</TT>回收所有可用WAL(Fujii Masao, Simon, Heikki)</P><P> 为了使这项工作安全，您现在需要设置<TT CLASS="FILENAME">recovery.conf</TT>中新的
<TT CLASS="LITERAL">recovery_end_command</TT>选项用来清理故障转移后的触发器文件。
<SPAN CLASS="APPLICATION">pg_standby</SPAN>将不再删除触发器文件本身。&#13;</P></LI><LI><P> <TT CLASS="FILENAME">contrib/pg_standby</TT>的<TT CLASS="OPTION">-l</TT>选项现在是一个空操作，
因为它使用符号链接不安全(Simon) </P></LI></UL></DIV></DIV></DIV><DIV CLASS="NAVFOOTER"><HR ALIGN="LEFT" WIDTH="100%"><TABLE SUMMARY="Footer navigation table" WIDTH="100%" BORDER="0" CELLPADDING="0" CELLSPACING="0"><TR><TD WIDTH="33%" ALIGN="left" VALIGN="top"><A HREF="release-8-4-1.html" ACCESSKEY="P">&#19978;&#19968;&#39029;</A></TD><TD WIDTH="34%" ALIGN="center" VALIGN="top"><A HREF="http://school.yunwei.edu/manual/PostgreSQL/index.html" ACCESSKEY="H">&#36215;&#22987;&#39029;</A></TD><TD WIDTH="33%" ALIGN="right" VALIGN="top"><A HREF="release-8-3-23.html" ACCESSKEY="N">&#19979;&#19968;&#39029;</A></TD></TR><TR><TD WIDTH="33%" ALIGN="left" VALIGN="top">发布8.4.1</TD><TD WIDTH="34%" ALIGN="center" VALIGN="top"><A HREF="http://school.yunwei.edu/manual/PostgreSQL/release.html" ACCESSKEY="U">&#19978;&#19968;&#32423;</A></TD><TD WIDTH="33%" ALIGN="right" VALIGN="top">发布8.3.23</TD></TR></TABLE></DIV></BODY></HTML>
