
<!DOCTYPE html>
<html lang="zh-cn">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<meta name="referrer" content="origin" />
<title>ç›‘æ§å‘½ä»¤ä¹‹tsar - æƒ¨ç»¿å°‘å¹´ - åšå®¢å›­</title>
<link type="text/css" rel="stylesheet" href="../../bundles/blog-common.css?v=PX31qVjOE47mNaZI9JUSFK-ajuzMnpXA9PeteRNR1Qw1"/>
<link type="text/css" rel="stylesheet" href="../../blog/customcss/378562.css?v=lIOm0gDHbWAp5zNowF7Kt56uNiM="/>
<link id="mobile-style" media="only screen and (max-width: 767px)" type="text/css" rel="stylesheet" href="../../skins/LessIsMore/bundle-LessIsMore-mobile.css?v=d9LctKHRIQp9rreugMcQ1-UJuq_j1fo0GZXTXj8Bqrk1"/>
<link title="RSS" type="application/rss+xml" rel="alternate" href="http://www.cnblogs.com/clsn/rss"/>
<link title="RSD" type="application/rsd+xml" rel="EditURI" href="http://www.cnblogs.com/clsn/rsd.xml"/>
<link type="application/wlwmanifest+xml" rel="wlwmanifest" href="http://www.cnblogs.com/clsn/wlwmanifest.xml"/>
<script src="https://common.cnblogs.com/scripts/jquery-2.2.0.min.js"></script>
<script type="text/javascript">var currentBlogApp = 'clsn', cb_enable_mathjax=true;var isLogined=false;</script>
<script type="text/x-mathjax-config">
    MathJax.Hub.Config({
        tex2jax: { inlineMath: [['$','$'], ['\\(','\\)']], processClass: 'blogpost-body', processEscapes: true },
        TeX: { 
            equationNumbers: { autoNumber: ['AMS'], useLabelIds: true }, extensions: ['extpfeil.js'] },
            'HTML-CSS': { linebreaks: { automatic: true } },
            SVG: { linebreaks: { automatic: true } }
        });
    </script><script src="https://mathjax.cnblogs.com/2_7_2/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
<script src="../../bundles/blog-common.js?v=ZYVeaIjo61MQ6cAGfOdV2UtOT1EphFo-_1mZgz9bJWA1" type="text/javascript"></script>
</head>
<body>
<a name="top"></a>
<!--PageBeginHtml Block Begin-->
<!-- æ‰“èµ
<script>
window.tctipConfig = {
staticPrefix: "http://static.tctip.com",
cssPrefix: "http://static.tctip.com",
buttonImageId: 1,
buttonTip: "dashang",
list:{
alipay: {qrimg: "https://files.cnblogs.com/files/clsn/zfb_skm.gif"},
weixin:{qrimg: "https://files.cnblogs.com/files/clsn/weixin_skm.gif"},
}
};
</script>
<script src="http://static.tctip.com/js/tctip.min.js"></script>
 -->


<!-- ä»¥ä¸‹æ˜¯æ–°æ ·å¼ -->
<script type="text/javascript">$("#mobile-style").remove();</script>
<link href="https://cdn.bootcss.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet"/>
<link href="https://files.cnblogs.com/files/clsn/lnh.cnblogs6.css" rel="stylesheet"/>
<script type="text/javascript" src="https://files.cnblogs.com/files/clsn/canvas-nest.min.js"></script>
<!--PageBeginHtml Block End-->

<div id="home">
<div id="header">
	<div id="blogTitle">
		
<!--done-->
<div class="title"><a id="Header1_HeaderTitle" class="headermaintitle" href="http://www.cnblogs.com/clsn/">æƒ¨ç»¿å°‘å¹´</a></div>
<div class="subtitle">â€”â€”Linuxè¿ç»´ä¹‹è·¯</div>



		
	</div><!--end: blogTitle åšå®¢çš„æ ‡é¢˜å’Œå‰¯æ ‡é¢˜ -->
	<div id="navigator">
		
<ul id="navList">
<li id="nav_sitehome"></li>
<li id="nav_myhome"><a id="blog_nav_myhome" class="menu" href="http://www.cnblogs.com/clsn/">é¦–é¡µ</a></li>
<li id="nav_newpost"><a id="blog_nav_newpost" class="menu" rel="nofollow" href="https://i.cnblogs.com/EditPosts.aspx?opt=1">æ–°éšç¬”</a></li>
<li id="nav_contact"><a id="blog_nav_contact" class="menu" rel="nofollow" href="https://msg.cnblogs.com/send/%E6%83%A8%E7%BB%BF%E5%B0%91%E5%B9%B4">è”ç³»</a></li>
<li id="nav_rss"><a id="blog_nav_rss" class="menu" href="http://www.cnblogs.com/clsn/rss">è®¢é˜…</a>
<!--<a id="blog_nav_rss_image" class="aHeaderXML" href="http://www.cnblogs.com/clsn/rss"><img src="//www.cnblogs.com/images/xml.gif" alt="è®¢é˜…" /></a>--></li>
<li id="nav_admin"><a id="blog_nav_admin" class="menu" rel="nofollow" href="https://i.cnblogs.com/">ç®¡ç†</a></li>
</ul>

		<div class="blogStats">
			
			
			
		</div><!--end: blogStats -->
	</div><!--end: navigator åšå®¢å¯¼èˆªæ  -->
</div><!--end: header å¤´éƒ¨ -->
<div id="main">
	<div id="mainContent">
	<div class="forFlow">
		
<div id="post_detail">
<!--done-->
<div id="topics">
	<div class = "post">
		<h1 class = "postTitle">
			<a id="cb_post_title_url" class="postTitle2" href="9135820.html">ç›‘æ§å‘½ä»¤ä¹‹tsar</a>
		</h1>
		<div class="clear"></div>
		<div class="postBody">
			<div id="cnblogs_post_body" class="blogpost-body"><h2>1.1 tsaræ˜¯ä»€ä¹ˆï¼Ÿ</h2>
<p>ã€€ã€€tsaræ˜¯æ·˜å®è‡ªå·±å¼€å‘çš„ä¸€ä¸ªé‡‡é›†å·¥å…·ï¼ˆç±»ä¼¼äºsarå·¥å…·ï¼‰ï¼Œä¸»è¦ç”¨æ¥æ”¶é›†æœåŠ¡å™¨çš„ç³»ç»Ÿä¿¡æ¯ï¼ˆå¦‚cpuï¼Œioï¼Œmemï¼Œtcpç­‰ï¼‰ï¼Œä»¥åŠåº”ç”¨æ•°æ®ï¼ˆå¦‚squid haproxy nginxç­‰ï¼‰ã€‚</p>
<p>ã€€ã€€æ”¶é›†åˆ°çš„æ•°æ®å­˜å‚¨åœ¨ç£ç›˜ä¸Šï¼Œå¯ä»¥éšæ—¶æŸ¥è¯¢å†å²ä¿¡æ¯ï¼Œè¾“å‡ºæ–¹å¼çµæ´»å¤šæ ·ï¼Œå¦å¤–æ”¯æŒå°†æ•°æ®å­˜å‚¨åˆ°mysqlä¸­ï¼Œä¹Ÿå¯ä»¥å°†æ•°æ®å‘é€åˆ°nagiosæŠ¥è­¦æœåŠ¡å™¨ã€‚</p>
<p>ã€€ã€€tsaråœ¨å±•ç¤ºæ•°æ®æ—¶ï¼Œå¯ä»¥æŒ‡å®šæ¨¡å—ï¼Œå¹¶ä¸”å¯ä»¥å¯¹å¤šæ¡ä¿¡æ¯çš„æ•°æ®è¿›è¡Œ<em>merge</em>è¾“å‡ºï¼Œå¸¦<em>--live</em>å‚æ•°å¯ä»¥è¾“å‡ºç§’çº§çš„å®æ—¶ä¿¡æ¯ã€‚</p>
<p>ã€€ã€€tsarå¯ä»¥é€šè¿‡ç¼–å†™æ¨¡å—è½»æ¾æ‰©å±•ï¼Œè¿™ä½¿å¾—å®ƒæˆä¸ºä¸€ä¸ªåŠŸèƒ½å¼ºå¤§ä¸”å¤šåŠŸèƒ½çš„æŠ¥å‘Šå·¥å…·ã€‚</p>
<p>&nbsp;&nbsp; å®˜æ–¹ç½‘å€ï¼š<a href="http://tsar.taobao.org/">http://tsar.taobao.org</a></p>
<p>githubåœ°å€ï¼š<a href="https://github.com/alibaba/tsar">https://github.com/alibaba/tsar</a></p>
<h3>1.1.1 æ€»ä½“æ¶æ„</h3>
<p>tsaræ˜¯åŸºäºæ¨¡å—åŒ–è®¾è®¡çš„ç¨‹åºï¼Œç¨‹åºæœ‰ä¸¤éƒ¨åˆ†ç»„æˆï¼šæ¡†æ¶å’Œæ¨¡å—ã€‚</p>
<p>æ¡†æ¶ç¨‹åºæºä»£ç ä¸»è¦åœ¨srcç›®å½•ï¼Œè€Œæ¨¡å—æºä»£ç ä¸»è¦åœ¨modulesç›®å½•ä¸­ã€‚</p>
<p>æ¡†æ¶æä¾›å¯¹é…ç½®æ–‡ä»¶çš„è§£æï¼Œæ¨¡å—çš„åŠ è½½ï¼Œå‘½ä»¤è¡Œå‚æ•°çš„è§£æï¼Œåº”ç”¨æ¨¡å—çš„æ¥å£å¯¹æ¨¡å—åŸå§‹æ•°æ®çš„è§£æä¸è¾“å‡ºã€‚ æ¨¡å—æä¾›æ¥å£ç»™æ¡†æ¶è°ƒç”¨ã€‚</p>
<p>tsarä¾èµ–ä¸cronæ¯åˆ†é’Ÿæ‰§è¡Œé‡‡é›†æ•°æ®ï¼Œå› æ­¤å®ƒéœ€è¦ç³»ç»Ÿå®‰è£…å¹¶å¯ç”¨crondï¼Œå®‰è£…åï¼Œtsaræ¯åˆ†é’Ÿä¼šæ‰§è¡Œtsar --cronæ¥å®šæ—¶é‡‡é›†ä¿¡æ¯ï¼Œå¹¶ä¸”è®°å½•åˆ°åŸå§‹æ—¥å¿—æ–‡ä»¶ã€‚</p>
<h3>1.1.2 tsarçš„è¿è¡Œæµç¨‹å›¾</h3>
<p align="center">&nbsp;<img src="https://images2018.cnblogs.com/blog/1190037/201806/1190037-20180604214121023-576776588.png" alt="" /></p>
<p>ä¸»è¦æ‰§è¡Œæµç¨‹æœ‰ï¼š</p>
<p>(1)è§£æè¾“å…¥</p>
<p>ã€€ã€€æ ¹æ®ç”¨æˆ·çš„è¾“å…¥ï¼Œåˆå§‹åŒ–ä¸€äº›å…¨å±€ä¿¡æ¯ï¼Œå¦‚é—´éš”æ—¶é—´ï¼Œæ˜¯å¦mergeï¼Œæ˜¯å¦æŒ‡å®šæ¨¡å—ï¼Œè¿è¡Œæ¨¡å¼</p>
<p>(2)è¯»å–é…ç½®æ–‡ä»¶ä¿¡æ¯</p>
<p>ã€€ã€€ä¸»è¦è§£ætsarçš„é…ç½®æ–‡ä»¶ï¼Œå¦‚æœincludeç”Ÿæ•ˆï¼Œåˆ™ä¼šè§£æincludeçš„é…ç½®æ–‡ä»¶</p>
<p>ã€€ã€€é…ç½®æ–‡ä»¶ç”¨æ¥è·å¾—tsaréœ€è¦åŠ è½½çš„æ¨¡å—ï¼Œè¾“å‡ºæ–¹å¼ï¼Œæ¯ä¸€ç±»è¾“å‡ºæ–¹å¼åŒ…å«çš„æ¨¡å—ï¼Œå’Œæ­¤è¾“å‡ºæ–¹å¼çš„æ¥æ”¶ä¿¡æ¯ï¼Œå¦‚mod_cpu onä»£è¡¨é‡‡é›†cpuçš„ä¿¡æ¯</p>
<p>ã€€ã€€output_interface file,nagiosè¡¨ç¤ºå‘æ–‡ä»¶å’ŒnagiosæœåŠ¡å™¨å‘é€é‡‡é›†ä¿¡æ¯å’ŒæŠ¥è­¦ä¿¡æ¯</p>
<p>(3)åŠ è½½ç›¸åº”æ¨¡å—</p>
<p>ã€€ã€€æ ¹æ®é…ç½®æ–‡ä»¶çš„æ¨¡å—å¼€å¯å…³é—­æƒ…å†µï¼Œå°†æ¨¡å—çš„åŠ¨æ€åº“loadåˆ°ç³»ç»Ÿ</p>
<p>(4)tsarçš„ä¸‰ç§è¿è¡Œæ¨¡å¼</p>
<p>ã€€ã€€tsaråœ¨è¿è¡Œçš„æ—¶å€™æœ‰ä¸‰ç§æ¨¡å¼ï¼š</p>
<p><strong>ã€€ã€€ã€€ã€€print</strong><strong>æ¨¡å¼,</strong>ä»…ä»…è¾“å‡ºæŒ‡å®šçš„æ¨¡å—ä¿¡æ¯ï¼Œé»˜è®¤æ˜¾ç¤ºæœ€è¿‘ä¸€å¤©çš„ï¼›</p>
<p><strong>ã€€ã€€ã€€ã€€live</strong><strong>æ¨¡å¼,</strong>æ˜¯è¾“å‡ºå½“å‰ä¿¡æ¯ï¼Œå¯ä»¥ç²¾ç¡®åˆ°ç§’çº§</p>
<p><strong>ã€€ã€€ã€€ã€€cron</strong><strong>æ¨¡å¼ï¼Œ</strong>æ­¤ä¸€èˆ¬æ˜¯crontabå®šæ—¶æ‰§è¡Œï¼Œæ¯ä¸€åˆ†é’Ÿé‡‡é›†ä¸€æ¬¡æ‰€æœ‰é…ç½®çš„æ¨¡å—ä¿¡æ¯ï¼Œå¹¶å°†æ•°æ®å†™å…¥åŸå§‹æ–‡ä»¶ï¼Œåœ¨cronè¿è¡Œçš„æ—¶å€™ ä¼šåˆ¤æ–­æ˜¯å¦é…ç½®è¾“å‡ºåˆ°dbæˆ–è€…nagiosï¼Œå¦‚æœé…ç½®åˆ™å°†ç›¸åº”æ ¼å¼çš„æ•°æ®è¾“å‡ºåˆ°å¯¹åº”æ¥å£ã€‚</p>
<p>(5)é‡Šæ”¾èµ„æº</p>
<p>ã€€ã€€ç¨‹åºæœ€åï¼Œé‡Šæ”¾åŠ¨æ€åº“ï¼Œç¨‹åºç»“æŸ</p>
<h2>1.2 tsarçš„å®‰è£…</h2>
<h3>1.2.1 ä½¿ç”¨gitä¸‹è½½æºç åŒ…</h3>
<p>ã€€ã€€å¯ä»¥è®¿é—®alibabaçš„githubæ‰¾åˆ°tsarè¿›è¡Œä¸‹è½½</p>
<div>
<div class="cnblogs_code">
<pre>$ git clone git://github.com/kongjian/<span style="color: #000000;">tsar.git
$ cd tsar
$ make
</span><span style="color: #008000;">#</span><span style="color: #008000;"> make install</span></pre>
</div>
</div>
<h3>1.2.2 ä¸‹è½½zipæ–‡ä»¶å¹¶å®‰è£…</h3>
<p>è®¿é—®è¿æ¥åœ°å€ï¼Œè·å–æºç åŒ…ï¼Œè¿›è¡Œç¼–è¯‘å®‰è£…</p>
<div>
<div class="cnblogs_code">
<pre>$ wget -O tsar.zip https://github.com/alibaba/tsar/archive/master.zip --no-check-<span style="color: #000000;">certificate
$ unzip tsar.zip
$ cd tsar
$ make
</span><span style="color: #008000;">#</span><span style="color: #008000;"> make install</span></pre>
</div>
</div>
<h3>1.2.3 ç›®å½•æ–‡ä»¶è¯´æ˜</h3>
<p>å®‰è£…åï¼Œæ‚¨å¯èƒ½ä¼šçœ‹åˆ°è¿™äº›æ–‡ä»¶ï¼š</p>
<div>
<div class="cnblogs_code">
<pre>/etc/tsar/<span style="color: #000000;">tsar.confï¼Œè¿™æ˜¯tsarçš„ä¸»è¦é…ç½®æ–‡ä»¶;
</span>/etc/cron.d/<span style="color: #000000;">tsarï¼Œç”¨äºæ¯åˆ†é’Ÿè¿è¡Œtsaræ”¶é›†ä¿¡æ¯;
</span>/etc/logrotate.d/<span style="color: #000000;">tsar å°†æ¯ä¸ªæœˆè½®è¯¢tsarçš„æ—¥å¿—æ–‡ä»¶;
</span>/usr/local/tsar/modules æ˜¯æ‰€æœ‰æ¨¡å—åº“ï¼ˆ*<span style="color: #000000;"> .soï¼‰æ‰€åœ¨çš„ç›®å½•;
</span>/usr/local/man/man8/ å¸®åŠ©æ–‡ä»¶</pre>
</div>
</div>
<h3>1.2.4 tsaré…ç½®æ–‡ä»¶è¯´æ˜</h3>
<div>
<div class="cnblogs_code">
<pre>[root@clsn6 tsar]<span style="color: #008000;">#</span><span style="color: #008000;"> cat /etc/tsar/tsar.conf</span><span style="color: #008000;">
#</span><span style="color: #008000;">###debug_level(INFO DEBUG WARN ERROR FATAL)</span>
debug_level ERROR  <span style="color: #008000;">#</span><span style="color: #008000;">æŒ‡å®štsarçš„è¿è¡Œçº§åˆ«ï¼Œä¸»è¦ç”¨æ¥è°ƒè¯•ä½¿ç”¨</span><span style="color: #008000;">
#</span><span style="color: #008000;">###[module]  ##on/off to enable mod</span>
<span style="color: #000000;">mod_cpu on
mod_mem on
mod_swap on
mod_tcp on
mod_udp on
mod_traffic on
mod_io on
mod_pcsw on
mod_partition on
mod_tcpx on
mod_load on
mod_apache off
mod_lvs off
mod_haproxy off
mod_squid off
mod_nginx off
mod_nginx_multiport off
mod_nginx_live off
</span><span style="color: #008000;">#</span><span style="color: #008000;">mod_nginx_sys_mport on 80 8080</span>
<span style="color: #000000;">mod_swift off
mod_swift_code off
mod_swift_domain off
mod_swift_esi off
mod_swift_fwd off
mod_swift_store off
mod_swift_swapdir off
mod_swift_purge off
mod_swift_sys off
mod_swift_tcmalloc off
mod_tmd off
mod_percpu off
mod_tcprt off
mod_proc off pidname
mod_pharos off
mod_tmd4 off
mod_keyserver off
</span><span style="color: #008000;">#</span><span style="color: #008000;">mod_erpc on /etc/tsar/erpc.conf</span><span style="color: #008000;">
#</span><span style="color: #008000;">mod_search on</span>

<span style="color: #008000;">#</span><span style="color: #008000;">###output_interface file,db,nagios</span>
output_interface file   <span style="color: #008000;">#</span><span style="color: #008000;">è®¾ç½®è¾“å‡ºç±»å‹ï¼Œæ”¯æŒfileï¼Œnagiosï¼Œdb</span>

<span style="color: #008000;">#</span><span style="color: #008000;">###[output_file] original data to store</span>
output_file_path /var/log/<span style="color: #000000;">tsar.data

</span><span style="color: #008000;">#</span><span style="color: #008000;">###[output_stdio] these mod will be show as using tsar command  #è®¾ç½®ç”¨æˆ·ç»ˆç«¯é»˜è®¤æ˜¾ç¤ºçš„æ¨¡å—</span>
<span style="color: #000000;">output_stdio_mod mod_swap,mod_partition,mod_cpu,mod_mem,mod_lvs,mod_haproxy,mod_traffic,mod_squid,mod_load,mod_tcp,mod_udp,mod_tcpx,mod_apache,mod_pcsw,mod_io,mod_percpu

</span><span style="color: #008000;">#</span><span style="color: #008000;">###[output_db]  #è®¾ç½®å“ªäº›æ¨¡å—è¾“å‡ºåˆ°æ•°æ®åº“</span><span style="color: #008000;">
#</span><span style="color: #008000;">output_db_mod mod_swap,mod_partition,mod_cpu,mod_mem,mod_traffic,mod_load,mod_tcp,mod_udp,mod_pcsw,mod_io</span><span style="color: #008000;">
#</span><span style="color: #008000;">output_db_addr console2:56677  #æ•°æ®åº“çš„ipå’Œç«¯å£</span>

<span style="color: #008000;">#</span><span style="color: #008000;">###[output_tcp]</span><span style="color: #008000;">
#</span><span style="color: #008000;">output_tcp_mod mod_swap,mod_cpu</span><span style="color: #008000;">
#</span><span style="color: #008000;">output_tcp_addr localhost:9666</span><span style="color: #008000;">
#</span><span style="color: #008000;">output_tcp_merge on</span>

<span style="color: #008000;">#</span><span style="color: #008000;">###support include other mod conf</span>
include /etc/tsar/conf.d/*<span style="color: #000000;">.conf

</span><span style="color: #008000;">#</span><span style="color: #008000;">###The IP address or the host running the NSCA daemon</span><span style="color: #008000;">
#</span><span style="color: #008000;">server_addr nagios.server.com</span><span style="color: #008000;">
#</span><span style="color: #008000;">###The port on which the daemon is running - default is 5667</span><span style="color: #008000;">
#</span><span style="color: #008000;">server_port 8086</span><span style="color: #008000;">
#</span><span style="color: #008000;">###The cycle of send alert to nagios</span><span style="color: #008000;">
#</span><span style="color: #008000;">cycle_time 300  #æŒ‡å®šä¸ŠæŠ¥çš„é—´éš”æ—¶é—´ï¼Œç”±äºtsaræ¯ä¸€åˆ†é’Ÿé‡‡é›†ä¸€æ¬¡ï¼Œä¸ŠæŠ¥æ—¶ä¼šåˆ¤æ–­æ˜¯å¦ç¬¦åˆæ—¶é—´é—´éš”ï¼Œå¦‚è®¾ç½®300çš„è¯ï¼Œåˆ™åœ¨0ï¼Œ5ç­‰æ•´ç‚¹åˆ†é’Ÿä¼šä¸ŠæŠ¥</span><span style="color: #008000;">
#</span><span style="color: #008000;">###nsca client program</span><span style="color: #008000;">
#</span><span style="color: #008000;">send_nsca_cmd /usr/bin/send_nsca</span><span style="color: #008000;">
#</span><span style="color: #008000;">send_nsca_conf /home/a/conf/amon/send_nsca.conf</span>

<span style="color: #008000;">#</span><span style="color: #008000;">###tsar mod alert config file</span><span style="color: #008000;">
#</span><span style="color: #008000;">###threshold servicename.key;w-min;w-max;c-min;cmax;</span><span style="color: #008000;">
#</span><span style="color: #008000;">threshold cpu.util;N;N;N;N;</span><span style="color: #008000;">
#</span><span style="color: #008000;">è®¾ç½®æŸä¸ªè¦æŠ¥è­¦é¡¹çš„é˜€å€¼,å‰é¢æ˜¯æ¨¡å—å’Œè¦ç›‘æ§çš„å…·ä½“åç§°ï¼Œåé¢çš„å››ä¸ªæ•°æ®ä»£è¡¨æŠ¥è­¦çš„èŒƒå›´ï¼Œwarnå’Œcriticalçš„èŒƒå›´ã€‚</span></pre>
</div>
</div>
<h2>1.3 tsarçš„ä½¿ç”¨</h2>
<p>æŸ¥çœ‹ä½¿ç”¨å¸®åŠ©</p>
<div>
<div class="cnblogs_code">
<pre>[root@clsn6 tsar]<span style="color: #008000;">#</span><span style="color: #008000;"> tsar --help </span>
<span style="color: #000000;">Usage: tsar [options]
Options:
    </span>-check         display last record <span style="color: #0000ff;">for</span> alert <span style="color: #008000;">#</span><span style="color: #008000;">æ£€æŸ¥æ˜¾ç¤ºè­¦æŠ¥çš„æœ€åè®°å½•</span>
    --check/-C     display last record <span style="color: #0000ff;">for</span> alert.example:tsar --check / tsar --check --cpu --<span style="color: #000000;">io
    </span>--watch/-w     display last records <span style="color: #0000ff;">in</span> N mimutes. example:tsar --watch 30 / tsar --watch 30 --cpu --<span style="color: #000000;">io
    </span>--cron/-c      run <span style="color: #0000ff;">in</span><span style="color: #000000;"> cron mode, output data to file
    </span>--interval/-i  specify intervals numbers, <span style="color: #0000ff;">in</span> minutes <span style="color: #0000ff;">if</span> with --live, it <span style="color: #0000ff;">is</span> <span style="color: #0000ff;">in</span> seconds  <span style="color: #008000;">#</span><span style="color: #008000;">æŒ‡å®šé—´éš”æ•°å­—ï¼Œå¦‚æœä½¿ç”¨--liveï¼Œåˆ™ä»¥åˆ†é’Ÿä¸ºå•ä½ï¼Œä»¥ç§’ä¸ºå•ä½</span>
    --list/-<span style="color: #000000;">L      list enabled modules
    </span>--live/-l      running <span style="color: #0000ff;">print</span> live mode, which module will <span style="color: #0000ff;">print</span>
    --file/-<span style="color: #000000;">f      specify a filepath as input
    </span>--ndays/-n     show the value <span style="color: #0000ff;">for</span> the past days (default: 1<span style="color: #000000;">)
    </span>--date/-d      show the value <span style="color: #0000ff;">for</span> the specify day(n <span style="color: #0000ff;">or</span><span style="color: #000000;"> YYYYMMDD)
    </span>--merge/-<span style="color: #000000;">m     merge multiply item to one
    </span>--detail/-D    do <span style="color: #0000ff;">not</span> conver data to K/M/G  <span style="color: #008000;">#</span><span style="color: #008000;">ä¸ä¼šå°†æ•°æ®è½¬æ¢ä¸ºK / M / G</span>
    --spec/-s      show spec field data, tsar --cpu -<span style="color: #000000;">s sys,util
    </span>--item/-I      show spec item data, tsar --io -<span style="color: #000000;">I sda
    </span>--help/-<span style="color: #000000;">h      help
Modules Enabled:
    </span>--cpu               CPU share (user, system, interrupt, nice, &amp;<span style="color: #000000;"> idle)
    </span>--<span style="color: #000000;">mem               Physical memory share (active, inactive, cached, free, wired)
    </span>--<span style="color: #000000;">swap              swap usage
    </span>--<span style="color: #000000;">tcp               TCP traffic     (v4)
    </span>--<span style="color: #000000;">udp               UDP traffic     (v4)
    </span>--<span style="color: #000000;">traffic           Net traffic statistics
    </span>--io                Linux I/<span style="color: #000000;">O performance
    </span>--pcsw              Process (task) creation <span style="color: #0000ff;">and</span><span style="color: #000000;"> context switch
    </span>--partition         Disk <span style="color: #0000ff;">and</span><span style="color: #000000;"> partition usage
    </span>--<span style="color: #000000;">tcpx              TCP connection data
    </span>--load              System Run Queue <span style="color: #0000ff;">and</span> load average</pre>
</div>
</div>
<h3>1.3.1 å¸¸ç”¨å‘½ä»¤</h3>
<p>&nbsp; #ä»¥1ç§’é’Ÿä¸ºé—´éš”ï¼Œå®æ—¶æ‰“å°tsarçš„æ¦‚è¿°æ•°æ®</p>
<div>
<div class="cnblogs_code">
<pre>[root@clsn6 tsar]<span style="color: #008000;">#</span><span style="color: #008000;">  tsar -i 1 -l </span>
Time              ---cpu-- ---mem-- ---tcp-- -----traffic---- --sda---  ---load-<span style="color: #000000;"> 
Time                util     util   retran    bytin  bytout     util     load1   
</span>04/06/18-21:09:22   0.00    18.48     0.00    60.00  278.00     0.00     0.00   
04/06/18-21:09:23   1.96    18.48     0.00    60.00  198.00     0.00     0.00   
04/06/18-21:09:24   0.00    18.48     0.00    60.00  198.00     0.00     0.00   
04/06/18-21:09:25   0.00    18.48     0.00    60.00  198.00     0.00     0.00   </pre>
</div>
</div>
<p># æ£€æŸ¥ç£ç›˜ioæƒ…å†µ</p>
<div>
<div class="cnblogs_code">
<pre>[root@clsn6 tsar]<span style="color: #008000;">#</span><span style="color: #008000;"> tsar --io  --check </span>
clsn6    tsar    io:sda:rrqms=0.0 io:sda:wrqms=0.0 io:sda:rs=0.0 io:sda:ws=0.1 io:sda:rsecs=0.0 io:sda:wsecs=0.7 io:sda:rqsize=4.9 io:sda:qusize=0.0 io:sda:await=0.7 io:sda:svctm=0.6 io:sda:util=0.0</pre>
</div>
</div>
<p># tsar æ˜¾ç¤º1å¤©å†…çš„å†å²æ±‡æ€»ï¼ˆsummuryï¼‰ä¿¡æ¯ï¼Œä»¥é»˜è®¤5åˆ†é’Ÿä¸ºé—´éš”</p>
<div>
<div class="cnblogs_code">
<pre>[root@clsn6 tsar]<span style="color: #008000;">#</span><span style="color: #008000;"> tsar --swap   --check </span>
clsn6    tsar    swap:swpin=0.0 swap:swpout=0.0 swap:total=805302272.0 swap:util=0.0<span style="color: #000000;"> 
[root@clsn6 tsar]</span><span style="color: #008000;">#</span><span style="color: #008000;"> tsar</span>
Time           ---cpu-- ---mem-- ---tcp-- -----traffic---- --sda---  ---load-<span style="color: #000000;"> 
Time             util     util   retran    bytin  bytout     util     load1   
</span>04/06/18-20:45   0.16    18.39     0.00    72.00   89.00     0.15     0.00   
04/06/18-20:50   0.16    18.41     0.00     5.00    3.00     0.03     0.00   
04/06/18-20:55   0.15    18.39     0.00     4.00    3.00     0.01     0.00   
04/06/18-21:00   0.15    18.54     0.00     4.00    3.00     0.02     0.00   
04/06/18-21:05   0.16    18.24     0.00    21.00   32.00     0.10     0.00   
04/06/18-21:10   0.18    18.27     0.00    19.00   24.00     0.01     0.00<span style="color: #000000;">   

MAX              </span>0.16    18.54     0.00    72.00   89.00     0.15     0.00<span style="color: #000000;">   
MEAN             </span>0.16    18.37     0.00    10.60   13.00     0.03     0.00<span style="color: #000000;">   
MIN              </span>0.16    18.24     0.00     4.00    3.00     0.03     0.00   </pre>
</div>
</div>
<p># tsar --cpu -i 1 æ˜¾ç¤ºä¸€å¤©å†…cpuçš„å†å²ä¿¡æ¯ï¼Œä»¥1åˆ†é’Ÿä¸ºé—´éš”</p>
<div>
<div class="cnblogs_code">
<pre>[root@clsn6 tsar]<span style="color: #008000;">#</span><span style="color: #008000;"> tsar --cpu -i 1</span>
Time           -----------------------cpu----------------------<span style="color: #000000;"> 
Time             user     sys    wait    hirq    sirq    util   
</span>04/06/18-20:37   0.01    0.10    0.02    0.00    0.03    0.14   
04/06/18-20:38   0.00    0.13    0.30    0.00    0.02    0.15   
04/06/18-20:39   0.02    0.12    0.00    0.00    0.05    0.18   
04/06/18-20:40   0.02    0.13    0.00    0.00    0.03    0.18   
04/06/18-20:41   0.00    0.08    0.00    0.00    0.03    0.12   
04/06/18-20:42   0.02    0.10    0.00    0.00    0.03    0.15<span style="color: #000000;">   
&middot;&middot;&middot;</span></pre>
</div>
</div>
<p># tsar --live --mem -i 2 ä»¥2ç§’é’Ÿä¸ºé—´éš”ï¼Œå®æ—¶æ‰“å°memçš„æ•°æ®ã€‚</p>
<div>
<div class="cnblogs_code">
<pre>[root@clsn6 tsar]<span style="color: #008000;">#</span><span style="color: #008000;"> tsar --live --mem -i 2</span>
Time              -----------------------mem----------------------<span style="color: #000000;"> 
Time                free    used    buff    cach   total    util   
</span>04/06/18-21:14:47 142.1M   87.5M   51.2M  193.8M  474.6M   18.44   
04/06/18-21:14:49 142.1M   87.5M   51.2M  193.8M  474.6M   18.44   
04/06/18-21:14:51 142.1M   87.5M   51.2M  193.8M  474.6M   18.44<span style="color: #000000;">   
&middot;&middot;&middot;</span></pre>
</div>
</div>
<p># tsar --cpu --mem -i 1 æ˜¾ç¤ºä¸€å¤©å†…çš„cpuå’Œå†…å­˜å†å²æ•°æ®ï¼Œä»¥1åˆ†é’Ÿä¸ºé—´éš”ã€‚</p>
<div>
<div class="cnblogs_code">
<pre>[root@clsn6 tsar]<span style="color: #008000;">#</span><span style="color: #008000;"> tsar --cpu --mem -i 1 </span>
Time           -----------------------cpu---------------------- -----------------------<span style="color: #000000;">
mem</span>----------------------<span style="color: #000000;"> 
Time             user     sys    wait    hirq    sirq    util     free    used    buff 
   cach   total    util   
</span>04/06/18-20:37   0.01    0.10    0.02    0.00    0.03    0.14   148.0M   84.7M   50<span style="color: #000000;">.3M 
 </span>191.6M  474.6M   17.85   
04/06/18-20:38   0.00    0.13    0.30    0.00    0.02    0.15   147.6M   84.8M   50<span style="color: #000000;">.4M 
 </span>191.8M  474.6M   17.87   
04/06/18-20:39   0.02    0.12    0.00    0.00    0.05    0.18   147.6M   84.8M   50<span style="color: #000000;">.4M 
 </span>191.8M  474.6M   17.88   
04/06/18-20:40   0.02    0.13    0.00    0.00    0.03    0.18   146.3M   86.1M   50<span style="color: #000000;">.4M 
 </span>191.8M  474.6M   18.15   
04/06/18-20:41   0.00    0.08    0.00    0.00    0.03    0.12   147.5M   84.9M   50<span style="color: #000000;">.4M 
 </span>191.8M  474.6M   17.89<span style="color: #000000;">   
&middot;&middot;&middot;</span></pre>
</div>
</div>
<h2>1.4 tsaræ·»åŠ æ¨¡å—</h2>
<h3>1.4.1 æ¨¡å—å¼€å‘</h3>
<p>tsarç¼–è¯‘å®‰è£…åå³å¯ä»¥è¿›è¡Œè‡ªå®šä¹‰æ¨¡å—çš„å¼€å‘</p>
<p>æ­¥éª¤å¦‚ä¸‹</p>
<p>1.æ‰§è¡Œtsardevel mymodä¼šåœ¨å½“å‰ç›®å½•ç”Ÿæˆä¸€ä¸ªmymodæ–‡ä»¶å¤¹</p>
<div>
<div class="cnblogs_code">
<pre>[root@clsn6 tsar]<span style="color: #008000;">#</span><span style="color: #008000;">  tsardevel mymod </span>
<span style="color: #000000;">build:make
install:make install
uninstall:make uninstall
test:tsar </span>--list <span style="color: #0000ff;">or</span> tsar --mymod --live -i 1<span style="color: #000000;">
[root@clsn6 tsar]</span><span style="color: #008000;">#</span><span style="color: #008000;">  tsardevel mymod </span>
<span style="color: #000000;">build:make
install:make install
uninstall:make uninstall
test:tsar </span>--list <span style="color: #0000ff;">or</span> tsar --mymod --live -i 1</pre>
</div>
</div>
<p>2.<strong>ä¿®æ”¹é‡Œé¢çš„mod_mymod.c</strong><strong>æˆè‡ªå·±æƒ³è¦çš„é‡‡é›†ç¨‹åºå¼€å‘æ‰‹å†Œ</strong>ï¼Œmake make installå³å¯ä»¥å®‰è£…åˆ°ç³»ç»Ÿ</p>
<div>
<div class="cnblogs_code">
<pre>[root@clsn6 mymod]<span style="color: #008000;">#</span><span style="color: #008000;"> make </span>
gcc -I/usr/local/tsar/devel -Wall -fPIC --shared -g  mod_mymod.c -<span style="color: #000000;">o mod_mymod.so
[root@clsn6 mymod]</span><span style="color: #008000;">#</span><span style="color: #008000;"> make install </span>
cp ./mod_mymod.so /usr/local/tsar/modules/<span style="color: #000000;">
cp .</span>/mod_mymod.conf /etc/tsar/conf.d/mymod.conf</pre>
</div>
</div>
<p>3.è¿™æ—¶ç³»ç»Ÿå³å¯ä»¥ä½¿ç”¨mymodçš„é‡‡é›†ï¼š</p>
<div>
<div class="cnblogs_code">
<pre>[root@clsn6 mymod]<span style="color: #008000;">#</span><span style="color: #008000;"> tsar -i 1 -l --mymod</span>
Time        ----------mymod---------<span style="color: #000000;"> 
Time                  value1  value2  value3   
</span>04/06/18-21:32:19    1.0     1.0     1.0   
04/06/18-21:32:20    1.0     1.0     1.0   
04/06/18-21:32:21    1.0     1.0     1.0   </pre>
</div>
</div>
<p>4.è‡ªå®šä¹‰çš„æ¨¡å—é…ç½®ï¼š/etc/tsar/conf.d/mymod.conf å¯ä»¥åœ¨è¿™ä¸ªæ–‡ä»¶é…ç½®æ¨¡å—å¼€å¯å…³é—­ï¼Œæ˜¯å¦è¾“å‡ºåˆ°db/nagiosï¼Œä»¥åŠnagiosçš„æŠ¥è­¦é˜€å€¼ mod_mymod on</p>
<div>
<div class="cnblogs_code">
<pre><span style="color: #008000;">#</span><span style="color: #008000;">add it to tsar default output</span>
<span style="color: #000000;">output_stdio_mod mod_mymod
</span><span style="color: #008000;">#</span><span style="color: #008000;">add it to center db</span><span style="color: #008000;">
#</span><span style="color: #008000;">output_db_mod mod_mymod</span><span style="color: #008000;">
#</span><span style="color: #008000;">add it to nagios send</span><span style="color: #008000;">
#</span><span style="color: #008000;">set nagios threshold for alert</span>
<span style="color: #000000;">output_nagios_mod mod_mymod
threshold mymod.value1;N;N;N;N;</span>&nbsp;</pre>
</div>
</div>
<h3>1.4.2 å®‰è£…nginxæ¨¡å—</h3>
<p>tsarä¸­å¯ä»¥æ·»åŠ å¾ˆå¤šçš„ç›‘æ§æ¨¡å—ï¼Œè¿™æ¬¡æ·»åŠ nginxç›‘æ§æ¨¡å—ã€‚</p>
<p>&nbsp;&nbsp; tsarçš„nginxæ‰©å±•æ¨¡å—é¡¹ç›®ä¸»é¡µä¸ºï¼šhttps://github.com/taobao/tsar-mod_nginx ï¼Œç‚¹å‡»ä¸‹è½½zipåŒ…ã€‚</p>
<div>
<div class="cnblogs_code">
<pre>[root@clsn6 tsar]<span style="color: #008000;">#</span><span style="color: #008000;">   unzip tsar-mod_nginx-master.zip </span>
[root@clsn6 tsar]<span style="color: #008000;">#</span><span style="color: #008000;">   tsardevel nginx</span>
<span style="color: #000000;">build:make
install:make install
uninstall:make uninstall
test:tsar </span>--list <span style="color: #0000ff;">or</span> tsar --nginx --live -i 1<span style="color: #000000;">
[root@clsn6 tsar]</span><span style="color: #008000;">#</span><span style="color: #008000;">   cp tsar-mod_nginx-master/mod_nginx.c nginx/</span>
cpï¼šæ˜¯å¦è¦†ç›–<span style="color: #800000;">"</span><span style="color: #800000;">nginx/mod_nginx.c</span><span style="color: #800000;">"</span><span style="color: #000000;">ï¼Ÿ y
[root@clsn6 tsar]</span><span style="color: #008000;">#</span><span style="color: #008000;">   cd nginx/</span>
[root@clsn6 nginx]<span style="color: #008000;">#</span><span style="color: #008000;"> ls</span>
<span style="color: #000000;">Makefile  mod_nginx.c  mod_nginx.conf
[root@clsn6 nginx]</span><span style="color: #008000;">#</span><span style="color: #008000;"> make &amp;&amp; make install</span></pre>
</div>
</div>
<p><strong>æµ‹è¯•</strong></p>
<div>
<div class="cnblogs_code">
<pre>[root@clsn6 nginx]<span style="color: #008000;">#</span><span style="color: #008000;"> service nginx start</span>
<span style="color: #000000;">æ­£åœ¨å¯åŠ¨ nginxï¼š                                           [ç¡®å®š]
[root@clsn6 nginx]</span><span style="color: #008000;">#</span><span style="color: #008000;"> tsar --nginx --live -i 1</span></pre>
</div>
</div>
<h3>1.4.3 nginxæ¨¡å—ä¸èƒ½ç”¨é—®é¢˜çš„å¤„ç†</h3>
<p>æ­¤æ—¶é€šè¿‡ä½¿ç”¨tsar --nginx --live -i 1 å‘½ä»¤æŸ¥çœ‹ï¼Œè‹¥å‡ºç°éƒ½æ˜¯æ¨ªçº¿ã€‚æ˜¯å› ä¸ºnginxæ²¡æœ‰å¼€å¯statusç»Ÿè®¡é¡µé¢ ã€‚</p>
<p>å› ä¸ºè¯¥å·¥å…·ç»Ÿè®¡çš„åŸç†æ˜¯é€šè¿‡è·å–statusé¡µé¢çš„è¾“å‡ºç»“æœï¼Œå¹¶å¯¹è¾“å‡ºå†…å®¹è¿›è¡Œç»Ÿè®¡å’Œè®¡ç®—å¾—å‡ºçš„ç»“æœã€‚è€Œä¸”å…¶è·å–çŠ¶æ€é¡µçš„urlé»˜è®¤æ˜¯http://127.0.0.1/nginx_status ï¼Œæ‰€ä»¥åœ¨nginxä¸Šä½ å¿…é¡»æœ‰å¦‚ä¸‹çš„é…ç½®ï¼š</p>
<div>
<div class="cnblogs_code">
<pre>location /<span style="color: #000000;">nginx_status {
          stub_status on;
          access_log   off;
          allow </span>127.0.0.1<span style="color: #000000;">;
          deny all;
        }</span></pre>
</div>
</div>
<p>æ³¨ï¼šä»¥ä¸Šçš„urlå¹¶éä¸èƒ½æ›´æ”¹ï¼Œå¯ä»¥ä¿®æ”¹ç¯å¢ƒå˜é‡å®ç°ã€‚å…¶è‡ªå¸¦çš„å‡ ä¸ªç¯å¢ƒå˜é‡å¦‚ä¸‹ã€‚</p>
<div>
<div class="cnblogs_code">
<pre>export NGX_TSAR_HOST=192.168.0.1<span style="color: #000000;">
export NGX_TSAR_PORT</span>=8080<span style="color: #000000;">
export NGX_TSAR_SERVER_NAME</span>=<span style="color: #000000;">status.taobao.com
export NGX_TSAR_URI</span>=/nginx_status</pre>
</div>
</div>
<h2>1.5 å‚è€ƒæ–‡çŒ®</h2>
<div>
<blockquote>
<div>
<p class="a">[1]&nbsp;&nbsp;<a href="http://code.taobao.org/p/tsar/wiki/intro/">http://code.taobao.org/p/tsar/wiki/intro/</a></p>
<p class="a">[2]&nbsp;&nbsp;<a href="https://blog.csdn.net/tanga842428/article/details/52913883">https://blog.csdn.net/tanga842428/article/details/52913883</a></p>
<p class="a">[3]&nbsp;&nbsp;<a href="http://blog.51cto.com/cuchadanfan/1738568">http://blog.51cto.com/cuchadanfan/1738568</a></p>
<p class="a">[4]&nbsp;&nbsp;<a href="https://github.com/taobao/tsar-mod_nginx">https://github.com/taobao/tsar-mod_nginx</a></p>
<p class="a">[5]&nbsp;&nbsp;<a href="https://github.com/alibaba/tsar">https://github.com/alibaba/tsar</a></p>
</div>
<p>[6]&nbsp;&nbsp;<a href="https://github.com/taobao/tsar-mod_nginx">https://github.com/taobao/tsar-mod_nginx</a></p>
</blockquote>
</div></div><div id="MySignature"></div>
<div class="clear"></div>
<div id="blog_post_info_block">
<div id="BlogPostCategory"></div>
<div id="EntryTag"></div>
<div id="blog_post_info">
</div>
<div class="clear"></div>
<div id="post_next_prev"></div>
</div>


		</div>
		<div class = "postDesc">posted @ <span id="post-date">2018-06-04 21:49</span> <a href='http://www.cnblogs.com/clsn/'>æƒ¨ç»¿å°‘å¹´</a> é˜…è¯»(<span id="post_view_count">...</span>) è¯„è®º(<span id="post_comment_count">...</span>)  <a href ="https://i.cnblogs.com/EditPosts.aspx?postid=9135820" rel="nofollow">ç¼–è¾‘</a> <a href="9135820.html#" onclick="AddToWz(9135820);return false;">æ”¶è—</a></div>
	</div>
	<script type="text/javascript">var allowComments=true,cb_blogId=378562,cb_entryId=9135820,cb_blogApp=currentBlogApp,cb_blogUserGuid='703f2914-e8f1-45a1-f927-08d49c352df2',cb_entryCreatedDate='2018/6/4 21:49:00';loadViewCount(cb_entryId);var cb_postType=1;</script>
	
</div><!--end: topics æ–‡ç« ã€è¯„è®ºå®¹å™¨-->
</div><a name="!comments"></a><div id="blog-comments-placeholder"></div><script type="text/javascript">var commentManager = new blogCommentManager();commentManager.renderComments(0);</script>
<div id='comment_form' class='commentform'>
<a name='commentform'></a>
<div id='divCommentShow'></div>
<div id='comment_nav'><span id='span_refresh_tips'></span><a href='javascript:void(0);' onclick='return RefreshCommentList();' id='lnk_RefreshComments' runat='server' clientidmode='Static'>åˆ·æ–°è¯„è®º</a><a href='9135820.html#' onclick='return RefreshPage();'>åˆ·æ–°é¡µé¢</a><a href='9135820.html#top'>è¿”å›é¡¶éƒ¨</a></div>
<div id='comment_form_container'></div>
<div class='ad_text_commentbox' id='ad_text_under_commentbox'></div>
<div id='ad_t2'></div>
<div id='opt_under_post'></div>
<div id='cnblogs_c1' class='c_ad_block'></div>
<div id='under_post_news'></div>
<div id='cnblogs_c2' class='c_ad_block'></div>
<div id='under_post_kb'></div>
<div id='HistoryToday' class='c_ad_block'></div>
<script type='text/javascript'>
    fixPostBody();
    setTimeout(function () { incrementViewCount(cb_entryId); }, 50);
    deliverAdT2();
    deliverAdC1();
    deliverAdC2();    
    loadNewsAndKb();
    loadBlogSignature();
    LoadPostInfoBlock(cb_blogId, cb_entryId, cb_blogApp, cb_blogUserGuid);
    GetPrevNextPost(cb_entryId, cb_blogId, cb_entryCreatedDate, cb_postType);
    loadOptUnderPost();
    GetHistoryToday(cb_blogId, cb_blogApp, cb_entryCreatedDate);   
</script>
</div>


	</div><!--end: forFlow -->
	</div><!--end: mainContent ä¸»ä½“å†…å®¹å®¹å™¨-->

	<div id="sideBar">
		<div id="sideBarMain">
			
<!--done-->
<div class="newsItem">
<h3 class="catListTitle">å…¬å‘Š</h3>
	<div id="blog-news"></div><script type="text/javascript">loadBlogNews();</script>
</div>

			<div id="calendar"><div id="blog-calendar" style="display:none"></div><script type="text/javascript">loadBlogDefaultCalendar();</script></div>
			
			<div id="leftcontentcontainer">
				<div id="blog-sidecolumn"></div><script type="text/javascript">loadBlogSideColumn();</script>
			</div>
			
		</div><!--end: sideBarMain -->
	</div><!--end: sideBar ä¾§è¾¹æ å®¹å™¨ -->
	<div class="clear"></div>
	</div><!--end: main -->
	<div class="clear"></div>
	<div id="footer">
		
<!--done-->
Copyright &copy;2018 æƒ¨ç»¿å°‘å¹´
	</div><!--end: footer -->
</div><!--end: home è‡ªå®šä¹‰çš„æœ€å¤§å®¹å™¨ -->
<!--PageEndHtml Block Begin-->
<!--å›¾æ ‡-->
<script type="text/javascript" language="javascript">
ã€€ã€€//Setting ico for cnblogs
ã€€ã€€var linkObject = document.createElement('link');
ã€€ã€€linkObject.rel = "shortcut icon";
ã€€ã€€linkObject.href = "https://files.cnblogs.com/files/clsn/clsn_favicon.ico";
ã€€ã€€document.getElementsByTagName("head")[0].appendChild(linkObject);
</script>
<!--ç»Ÿè®¡
<script type="text/javascript">var cnzz_protocol = (("https:" == document.location.protocol) ? " https://" : " http://");document.write(unescape("%3Cspan id='cnzz_stat_icon_1271332834'%3E%3C/span%3E%3Cscript src='" + cnzz_protocol + "s22.cnzz.com/z_stat.php%3Fid%3D1271332834' type='text/javascript'%3E%3C/script%3E"));</script>
-->

<script type="text/javascript">
window.onload=function(){
	document.getElementsByClassName("itnews c_ad_block")[0].parentNode.removeChild(document.getElementsByClassName("itnews c_ad_block")[0]);
};
</script>

<script type="text/javascript" language="javascript"> 
    <!--ä¸ºå³ä¸‹è§’æ¨èæ¨èåŒºåŸŸæ·»åŠ å…³æ³¨æŒ‰é’®-->
window.onload = function () {
    $('#div_digg').prepend('<div style="padding-bottom: 5px"><span class="icon_favorite" style="padding-top: 2px"></span><a onclick="follow(\'703f2914-e8f1-45a1-f927-08d49c352df2\');" href="javascript:void(0);"  style="font-weight: bold; padding-left:5px;">ğŸŒµå…³æ³¨ä¸€ä¸‹æˆ‘å‘—ï½</a> </div>');
}
</script>
<!-- ä»¥ä¸‹æ˜¯æ–°æ ·å¼ -->
<script type="text/javascript" src="https://files.cnblogs.com/files/clsn/clsn.cnblogs.js"></script>
<!--PageEndHtml Block End-->
</body>
</html>
