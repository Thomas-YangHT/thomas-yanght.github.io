<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<HTML><HEAD><TITLE>二进制字符串函数和操作符</TITLE><META NAME="GENERATOR" CONTENT="Modular DocBook HTML Stylesheet Version 1.79"><LINK REV="MADE" HREF="mailto:pgsql-docs@postgresql.org"><LINK REL="HOME" TITLE="PostgreSQL 9.3.1 中文手册" HREF="http://school.yunwei.edu/manual/PostgreSQL/index.html"><LINK REL="UP" TITLE="函数和操作符" HREF="http://school.yunwei.edu/manual/PostgreSQL/functions.html"><LINK REL="PREVIOUS" TITLE="字符串函数和操作符" HREF="functions-string.html"><LINK REL="NEXT" TITLE="位串函数和操作符" HREF="functions-bitstring.html"><LINK REL="STYLESHEET" TYPE="text/css" HREF="http://school.yunwei.edu/manual/PostgreSQL/stylesheet.css"><META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=utf-8"><META NAME="creation" CONTENT="2015-07-11T14:00:17"></HEAD><BODY CLASS="SECT1">
<div style="text-align:right">
<a style="margin : 0px 0px 0px 10px;" href="https://github.com/postgres-cn/pgdoc-cn/issues/new" target="_blank" title="在Github上报告问题（请注明问题内容及所在章节）">问题报告</a>
<a style="margin : 0px 0px 0px 10px;" href="https://github.com/postgres-cn/pgdoc-cn/edit/master/postgresql/doc/src/sgml/func.sgml" target="_blank" title="直接在Github上纠错本页面">纠错本页面</a>
</div>
<DIV CLASS="NAVHEADER"><TABLE SUMMARY="Header navigation table" WIDTH="100%" BORDER="0" CELLPADDING="0" CELLSPACING="0"><TR><TH COLSPAN="5" ALIGN="center" VALIGN="bottom"><A HREF="http://school.yunwei.edu/manual/PostgreSQL/index.html">PostgreSQL 9.3.1 中文手册</A></TH></TR><TR><TD WIDTH="10%" ALIGN="left" VALIGN="top"><A TITLE="字符串函数和操作符" HREF="functions-string.html" ACCESSKEY="P">&#19978;&#19968;&#39029;</A></TD><TD WIDTH="10%" ALIGN="left" VALIGN="top"><A HREF="http://school.yunwei.edu/manual/PostgreSQL/functions.html" ACCESSKEY="U">&#19978;&#19968;&#32423;</A></TD><TD WIDTH="60%" ALIGN="center" VALIGN="bottom">&#31456; 9. 函数和操作符</TD><TD WIDTH="20%" ALIGN="right" VALIGN="top"><A TITLE="位串函数和操作符" HREF="functions-bitstring.html" ACCESSKEY="N">&#19979;&#19968;&#39029;</A></TD></TR></TABLE><HR ALIGN="LEFT" WIDTH="100%"></DIV><DIV CLASS="SECT1"><H1 CLASS="SECT1"><A NAME="FUNCTIONS-BINARYSTRING">9.5. 二进制字符串函数和操作符</A></H1><P>本节描述那些检查和操作类型为<TT CLASS="TYPE">bytea</TT>数值的函数和操作符。</P><P><ACRONYM CLASS="ACRONYM">SQL</ACRONYM>定义了一些字符串函数，
在这些函数里使用关键字而不是逗号来分隔参数。
详情请见<A HREF="functions-binarystring.html#FUNCTIONS-BINARYSTRING-SQL">&#34920; 9-8</A>。
<SPAN CLASS="PRODUCTNAME">PostgreSQL</SPAN>也提供了使用常用语法进行函数调用的函数的版本
(参阅<A HREF="functions-binarystring.html#FUNCTIONS-BINARYSTRING-OTHER">&#34920; 9-9</A>)。</P><DIV CLASS="NOTE"><BLOCKQUOTE CLASS="NOTE"><P><B>&#27880;&#24847;: </B>本页面例子的结果在假设服务器的参数<A HREF="runtime-config-client.html#GUC-BYTEA-OUTPUT"><TT CLASS="VARNAME">bytea_output</TT></A>
设置为<TT CLASS="LITERAL">escape</TT>的基础上的（传统的PostgreSQL格式）。</P></BLOCKQUOTE></DIV><DIV CLASS="TABLE"><A NAME="FUNCTIONS-BINARYSTRING-SQL"></A><P><B>&#34920; 9-8. <ACRONYM CLASS="ACRONYM">SQL</ACRONYM> 二进制字符串函数和操作符</B></P><TABLE BORDER="1" CLASS="CALSTABLE"><COL><COL><COL><COL><COL><THEAD><TR><TH>函数</TH><TH>返回类型</TH><TH>描述</TH><TH>例子</TH><TH>结果</TH></TR></THEAD><TBODY><TR><TD><TT CLASS="LITERAL"><TT CLASS="PARAMETER">string</TT> <TT CLASS="LITERAL">||</TT>
<TT CLASS="PARAMETER">string</TT></TT></TD><TD> <TT CLASS="TYPE">bytea</TT> </TD><TD>
字符串连接
</TD><TD><TT CLASS="LITERAL">E'\\\\Post'::bytea || E'\\047gres\\000'::bytea</TT></TD><TD><TT CLASS="LITERAL">\\Post'gres\000</TT></TD></TR><TR><TD>
<TT CLASS="LITERAL"><CODE CLASS="FUNCTION">octet_length(<TT CLASS="PARAMETER">string</TT>)</CODE></TT>
</TD><TD><TT CLASS="TYPE">int</TT></TD><TD>二进制字符串中的字节数</TD><TD><TT CLASS="LITERAL">octet_length(E'jo\\000se'::bytea)</TT></TD><TD><TT CLASS="LITERAL">5</TT></TD></TR><TR><TD>
<TT CLASS="LITERAL"><CODE CLASS="FUNCTION">overlay(<TT CLASS="PARAMETER">string</TT> placing <TT CLASS="PARAMETER">string</TT> from <TT CLASS="TYPE">int</TT> [<SPAN CLASS="OPTIONAL">for <TT CLASS="TYPE">int</TT></SPAN>])</CODE></TT>
</TD><TD><TT CLASS="TYPE">bytea</TT></TD><TD>
替换子串
</TD><TD><TT CLASS="LITERAL">overlay(E'Th\\000omas'::bytea placing E'\\002\\003'::bytea from 2 for 3)</TT></TD><TD><TT CLASS="LITERAL">T\\002\\003mas</TT></TD></TR><TR><TD>
<TT CLASS="LITERAL"><CODE CLASS="FUNCTION">position(<TT CLASS="PARAMETER">substring</TT> in <TT CLASS="PARAMETER">string</TT>)</CODE></TT>
</TD><TD><TT CLASS="TYPE">int</TT></TD><TD>特定子字符串的位置</TD><TD><TT CLASS="LITERAL">position(E'\\000om'::bytea in E'Th\\000omas'::bytea)</TT></TD><TD><TT CLASS="LITERAL">3</TT></TD></TR><TR><TD>
<TT CLASS="LITERAL"><CODE CLASS="FUNCTION">substring(<TT CLASS="PARAMETER">string</TT> [<SPAN CLASS="OPTIONAL">from <TT CLASS="TYPE">int</TT></SPAN>] [<SPAN CLASS="OPTIONAL">for <TT CLASS="TYPE">int</TT></SPAN>])</CODE></TT>
</TD><TD><TT CLASS="TYPE">bytea</TT></TD><TD>
截取子串
</TD><TD><TT CLASS="LITERAL">substring(E'Th\\000omas'::bytea from 2 for 3)</TT></TD><TD><TT CLASS="LITERAL">h\000o</TT></TD></TR><TR><TD>
<TT CLASS="LITERAL"><CODE CLASS="FUNCTION">trim([<SPAN CLASS="OPTIONAL">both</SPAN>]
<TT CLASS="PARAMETER">bytes</TT> from
<TT CLASS="PARAMETER">string</TT>)</CODE></TT>
</TD><TD><TT CLASS="TYPE">bytea</TT></TD><TD>
从<TT CLASS="PARAMETER">string</TT>的开头和结尾删除只包含
<TT CLASS="PARAMETER">bytes</TT>中字节的最长字符串
</TD><TD><TT CLASS="LITERAL">trim(E'\\000'::bytea from E'\\000Tom\\000'::bytea)</TT></TD><TD><TT CLASS="LITERAL">Tom</TT></TD></TR></TBODY></TABLE></DIV><P>还有一些二进制字符串处理函数可以使用，在<A HREF="functions-binarystring.html#FUNCTIONS-BINARYSTRING-OTHER">&#34920; 9-9</A>
列出。其中有一些是在内部使用，用于实现<A HREF="functions-binarystring.html#FUNCTIONS-BINARYSTRING-SQL">&#34920; 9-8</A>
列出的<ACRONYM CLASS="ACRONYM">SQL</ACRONYM>标准的字符串函数。</P><DIV CLASS="TABLE"><A NAME="FUNCTIONS-BINARYSTRING-OTHER"></A><P><B>&#34920; 9-9. 其它二进制字符串函数</B></P><TABLE BORDER="1" CLASS="CALSTABLE"><COL><COL><COL><COL><COL><THEAD><TR><TH>函数</TH><TH>返回类型</TH><TH>描述</TH><TH>例子</TH><TH>结果</TH></TR></THEAD><TBODY><TR><TD>
<TT CLASS="LITERAL"><CODE CLASS="FUNCTION">btrim(<TT CLASS="PARAMETER">string</TT>
<TT CLASS="TYPE">bytea</TT>, <TT CLASS="PARAMETER">bytes</TT> <TT CLASS="TYPE">bytea</TT>)</CODE></TT>
</TD><TD><TT CLASS="TYPE">bytea</TT></TD><TD>
从<TT CLASS="PARAMETER">string</TT>的开头和结尾删除只包含<TT CLASS="PARAMETER">bytes</TT>
中字节的最长的字符串
</TD><TD><TT CLASS="LITERAL">btrim(E'\\000trim\\000'::bytea, E'\\000'::bytea)</TT></TD><TD><TT CLASS="LITERAL">trim</TT></TD></TR><TR><TD>
<TT CLASS="LITERAL"><CODE CLASS="FUNCTION">decode(<TT CLASS="PARAMETER">string</TT> <TT CLASS="TYPE">text</TT>,
<TT CLASS="PARAMETER">format</TT> <TT CLASS="TYPE">text</TT>)</CODE></TT>
</TD><TD><TT CLASS="TYPE">bytea</TT></TD><TD>
把<TT CLASS="PARAMETER">string</TT>中的文本表示解码为二进制数据。<TT CLASS="PARAMETER">format</TT>
的选项和<CODE CLASS="FUNCTION">encode</CODE>相同。
</TD><TD><TT CLASS="LITERAL">decode(E'123\\000456', 'escape')</TT></TD><TD><TT CLASS="LITERAL">123\000456</TT></TD></TR><TR><TD>
<TT CLASS="LITERAL"><CODE CLASS="FUNCTION">encode(<TT CLASS="PARAMETER">data</TT> <TT CLASS="TYPE">bytea</TT>,
<TT CLASS="PARAMETER">format</TT> <TT CLASS="TYPE">text</TT>)</CODE></TT>
</TD><TD><TT CLASS="TYPE">text</TT></TD><TD>
把二进制数据编码为文本表现形式。支持的格式：<TT CLASS="LITERAL">base64</TT>,
<TT CLASS="LITERAL">hex</TT>, <TT CLASS="LITERAL">escape</TT>。<TT CLASS="LITERAL">escape</TT>
转换零字节和高位设置字节为八进制序列(<TT CLASS="LITERAL">\</TT><TT CLASS="REPLACEABLE"><I>nnn</I></TT>)
和双写反斜杠。
</TD><TD><TT CLASS="LITERAL">encode(E'123\\000456'::bytea, 'escape')</TT></TD><TD><TT CLASS="LITERAL">123\000456</TT></TD></TR><TR><TD>
<TT CLASS="LITERAL"><CODE CLASS="FUNCTION">get_bit(<TT CLASS="PARAMETER">string</TT>, <TT CLASS="PARAMETER">offset</TT>)</CODE></TT>
</TD><TD><TT CLASS="TYPE">int</TT></TD><TD>
从字符串中抽取位
</TD><TD><TT CLASS="LITERAL">get_bit(E'Th\\000omas'::bytea, 45)</TT></TD><TD><TT CLASS="LITERAL">1</TT></TD></TR><TR><TD>
<TT CLASS="LITERAL"><CODE CLASS="FUNCTION">get_byte(<TT CLASS="PARAMETER">string</TT>, <TT CLASS="PARAMETER">offset</TT>)</CODE></TT>
</TD><TD><TT CLASS="TYPE">int</TT></TD><TD>
从字符串中抽取字节
</TD><TD><TT CLASS="LITERAL">get_byte(E'Th\\000omas'::bytea, 4)</TT></TD><TD><TT CLASS="LITERAL">109</TT></TD></TR><TR><TD>
<TT CLASS="LITERAL"><CODE CLASS="FUNCTION">length(<TT CLASS="PARAMETER">string</TT>)</CODE></TT>
</TD><TD><TT CLASS="TYPE">int</TT></TD><TD>
二进制字符串的长度
</TD><TD><TT CLASS="LITERAL">length(E'jo\\000se'::bytea)</TT></TD><TD><TT CLASS="LITERAL">5</TT></TD></TR><TR><TD>
<TT CLASS="LITERAL"><CODE CLASS="FUNCTION">md5(<TT CLASS="PARAMETER">string</TT>)</CODE></TT>
</TD><TD><TT CLASS="TYPE">text</TT></TD><TD>
计算<TT CLASS="PARAMETER">string</TT>的MD5散列值，以十六进制方式返回结果。
</TD><TD><TT CLASS="LITERAL">md5(E'Th\\000omas'::bytea)</TT></TD><TD><TT CLASS="LITERAL">8ab2d3c9689aaf18 b4958c334c82d8b1</TT></TD></TR><TR><TD>
<TT CLASS="LITERAL"><CODE CLASS="FUNCTION">set_bit(<TT CLASS="PARAMETER">string</TT>,
<TT CLASS="PARAMETER">offset</TT>, <TT CLASS="PARAMETER">newvalue</TT>)</CODE></TT>
</TD><TD><TT CLASS="TYPE">bytea</TT></TD><TD>
设置字符串中的位
</TD><TD><TT CLASS="LITERAL">set_bit(E'Th\\000omas'::bytea, 45, 0)</TT></TD><TD><TT CLASS="LITERAL">Th\000omAs</TT></TD></TR><TR><TD>
<TT CLASS="LITERAL"><CODE CLASS="FUNCTION">set_byte(<TT CLASS="PARAMETER">string</TT>,
<TT CLASS="PARAMETER">offset</TT>, <TT CLASS="PARAMETER">newvalue</TT>)</CODE></TT>
</TD><TD><TT CLASS="TYPE">bytea</TT></TD><TD>
设置字符串中的字节
</TD><TD><TT CLASS="LITERAL">set_byte(E'Th\\000omas'::bytea, 4, 64)</TT></TD><TD><TT CLASS="LITERAL">Th\000o@as</TT></TD></TR></TBODY></TABLE></DIV><P><CODE CLASS="FUNCTION">get_byte</CODE>和<CODE CLASS="FUNCTION">set_byte</CODE>数以二进制字符串的第一个字节为0字节。
<CODE CLASS="FUNCTION">get_bit</CODE>和<CODE CLASS="FUNCTION">set_bit</CODE>从每个字节的右边取位；
例如位0是第一个字节的最低位，位15是第二个字节的最高位。</P><P>又见<A HREF="functions-aggregate.html">第 9.20 &#33410;</A>中的聚集函数<CODE CLASS="FUNCTION">string_agg</CODE>。</P></DIV><DIV CLASS="NAVFOOTER"><HR ALIGN="LEFT" WIDTH="100%"><TABLE SUMMARY="Footer navigation table" WIDTH="100%" BORDER="0" CELLPADDING="0" CELLSPACING="0"><TR><TD WIDTH="33%" ALIGN="left" VALIGN="top"><A HREF="functions-string.html" ACCESSKEY="P">&#19978;&#19968;&#39029;</A></TD><TD WIDTH="34%" ALIGN="center" VALIGN="top"><A HREF="http://school.yunwei.edu/manual/PostgreSQL/index.html" ACCESSKEY="H">&#36215;&#22987;&#39029;</A></TD><TD WIDTH="33%" ALIGN="right" VALIGN="top"><A HREF="functions-bitstring.html" ACCESSKEY="N">&#19979;&#19968;&#39029;</A></TD></TR><TR><TD WIDTH="33%" ALIGN="left" VALIGN="top">字符串函数和操作符</TD><TD WIDTH="34%" ALIGN="center" VALIGN="top"><A HREF="http://school.yunwei.edu/manual/PostgreSQL/functions.html" ACCESSKEY="U">&#19978;&#19968;&#32423;</A></TD><TD WIDTH="33%" ALIGN="right" VALIGN="top">位串函数和操作符</TD></TR></TABLE></DIV></BODY></HTML>
